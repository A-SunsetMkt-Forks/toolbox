(self["webpackChunk"]=self["webpackChunk"]||[]).push([[807],{65252:function(e,t,n){"use strict";n.d(t,{ip:function(){return Xs},ML:function(){return Qa},Iq:function(){return ta},R3:function(){return ua},Xo:function(){return La},ml:function(){return ja},uW:function(){return Va},U7:function(){return Ia},ev:function(){return Ka},tQ:function(){return oa},ZP:function(){return da},pB:function(){return fa},ZV:function(){return ia},CG:function(){return sa},KP:function(){return za},le:function(){return ha},LS:function(){return Ga},Qn:function(){return Ja},z6:function(){return aa}});var r={};n.r(r),n.d(r,{attentionMarkers:function(){return Zn},contentInitial:function(){return qn},disable:function(){return Qn},document:function(){return Hn},flow:function(){return Yn},flowInitial:function(){return Jn},insideSpan:function(){return Gn},string:function(){return Kn},text:function(){return Un}});var o,i,s,a,c=n(60082),l=Object.defineProperty,u=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&f(e,n,t[n]);if(u)for(var n of u(t))p.call(t,n)&&f(e,n,t[n]);return e},m=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},v=(e,t,n)=>(m(e,t,"read from private field"),n?n.call(e):t.get(e)),g=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},y=(e,t,n,r)=>(m(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const w=()=>{const e=new Map,t=t=>{const n=e.get(t.id);if(!n)throw(0,c.KE)(t.sliceName);return n},n=t=>{const n=[...e.values()].find((e=>e.name===t));return n||null};return{getSlice:t,sliceMap:e,getSliceByName:n}},b=e=>Array.isArray(e)?[...e]:"object"===typeof e?d({},e):e,k=(e,t)=>{const n=Symbol("Context"),r=(r,o=b(e))=>{let i=o;const s={name:t,id:n,set:e=>{i=e},get:()=>i,update:e=>{i=e(i)}};return r.set(n,s),s};return r.sliceName=t,r.id=n,r._typeInfo=()=>{throw(0,c.S1)()},r};class x{constructor(e,t){g(this,o,void 0),g(this,i,void 0),this.use=e=>v(this,o).getSlice(e),this.useByName=e=>v(this,o).getSliceByName(e),this.get=e=>this.use(e).get(),this.set=(e,t)=>this.use(e).set(t),this.update=(e,t)=>this.use(e).update(t),this.timing=e=>v(this,i).get(e),this.wait=e=>this.timing(e)(),this.done=e=>this.timing(e).done(),this.waitTimers=async e=>{await Promise.all(this.get(e).map((e=>this.wait(e))))},y(this,o,e),y(this,i,t)}}o=new WeakMap,i=new WeakMap;class S{constructor(e,t){g(this,s,void 0),g(this,a,void 0),this.inject=(e,t)=>(e(v(this,s).sliceMap,t),this),this.record=e=>(e(v(this,a).store),this),y(this,s,e),y(this,a,t)}}s=new WeakMap,a=new WeakMap;const C=()=>{const e=new Map,t=t=>{const n=e.get(t.id);if(!n)throw(0,c._O)();return n};return{store:e,get:t}},M=(e,t=3e3)=>{const n=Symbol("Timer"),r=r=>{const o=Symbol(e),i=()=>new Promise(((n,r)=>{setTimeout((()=>{r(`Timing ${e} timeout.`)}),t),addEventListener(e,(e=>{e instanceof CustomEvent&&e.detail.id===o&&n(void 0)}))}));return i.done=()=>{const t=new CustomEvent(e,{detail:{id:o}});dispatchEvent(t)},r.set(n,i),i};return r.id=n,r};var O=n(27649),E=n(38638),A=n(76922),N=n(54751),T=n(42778),D=n(98780);function I(e){if(e)throw e}var R=n(48738),z=n(94470);function F(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function P(){const e=[],t={run:n,use:r};return t;function n(...t){let n=-1;const r=t.pop();if("function"!==typeof r)throw new TypeError("Expected function as last argument, not "+r);function o(i,...s){const a=e[++n];let c=-1;if(i)r(i);else{while(++c<t.length)null!==s[c]&&void 0!==s[c]||(s[c]=t[c]);t=s,a?$(a,o)(...s):r(null,...s)}}o(null,...t)}function r(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}}function $(e,t){let n;return r;function r(...t){const r=e.length>t.length;let s;r&&t.push(o);try{s=e.apply(this,t)}catch(a){const e=a;if(r&&n)throw e;return o(e)}r||(s instanceof Promise?s.then(i,o):s instanceof Error?o(s):i(s))}function o(e,...r){n||(n=!0,t(e,...r))}function i(e){o(null,e)}}var B={}.hasOwnProperty;function _(e){return e&&"object"===typeof e?B.call(e,"position")||B.call(e,"type")?L(e.position):B.call(e,"start")||B.call(e,"end")?L(e):B.call(e,"line")||B.call(e,"column")?j(e):"":""}function j(e){return V(e&&e.line)+":"+V(e&&e.column)}function L(e){return j(e&&e.start)+"-"+j(e&&e.end)}function V(e){return e&&"number"===typeof e?e:1}class W extends Error{constructor(e,t,n){var r,o=[null,null],i={start:{line:null,column:null},end:{line:null,column:null}};super(),"string"===typeof t&&(n=t,t=null),"string"===typeof n&&(r=n.indexOf(":"),-1===r?o[1]=n:(o[0]=n.slice(0,r),o[1]=n.slice(r+1))),t&&("type"in t||"position"in t?t.position&&(i=t.position):"start"in t||"end"in t?i=t:("line"in t||"column"in t)&&(i.start=t)),this.name=_(t)||"1:1",this.message="object"===typeof e?e.message:e,this.stack="object"===typeof e?e.stack:"",this.reason=this.message,this.fatal,this.line=i.start.line,this.column=i.start.column,this.source=o[0],this.ruleId=o[1],this.position=i,this.actual,this.expected,this.file,this.url,this.note}}W.prototype.file="",W.prototype.name="",W.prototype.reason="",W.prototype.message="",W.prototype.stack="",W.prototype.fatal=null,W.prototype.column=null,W.prototype.line=null,W.prototype.source=null,W.prototype.ruleId=null,W.prototype.position=null;const H={basename:q,dirname:J,extname:Y,join:K,sep:"/"};function q(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');Z(e);let n,r=0,o=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){while(i--)if(47===e.charCodeAt(i)){if(n){r=i+1;break}}else o<0&&(n=!0,o=i+1);return o<0?"":e.slice(r,o)}if(t===e)return"";let s=-1,a=t.length-1;while(i--)if(47===e.charCodeAt(i)){if(n){r=i+1;break}}else s<0&&(n=!0,s=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(o=i):(a=-1,o=s));return r===o?o=s:o<0&&(o=e.length),e.slice(r,o)}function J(e){if(Z(e),0===e.length)return".";let t,n=-1,r=e.length;while(--r)if(47===e.charCodeAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)}function Y(e){Z(e);let t,n=e.length,r=-1,o=0,i=-1,s=0;while(n--){const a=e.charCodeAt(n);if(47!==a)r<0&&(t=!0,r=n+1),46===a?i<0?i=n:1!==s&&(s=1):i>-1&&(s=-1);else if(t){o=n+1;break}}return i<0||r<0||0===s||1===s&&i===r-1&&i===o+1?"":e.slice(i,r)}function K(...e){let t,n=-1;while(++n<e.length)Z(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":U(t)}function U(e){Z(e);const t=47===e.charCodeAt(0);let n=G(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/"),t?"/"+n:n}function G(e,t){let n,r,o="",i=0,s=-1,a=0,c=-1;while(++c<=e.length){if(c<e.length)n=e.charCodeAt(c);else{if(47===n)break;n=47}if(47===n){if(s===c-1||1===a);else if(s!==c-1&&2===a){if(o.length<2||2!==i||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2))if(o.length>2){if(r=o.lastIndexOf("/"),r!==o.length-1){r<0?(o="",i=0):(o=o.slice(0,r),i=o.length-1-o.lastIndexOf("/")),s=c,a=0;continue}}else if(o.length>0){o="",i=0,s=c,a=0;continue}t&&(o=o.length>0?o+"/..":"..",i=2)}else o.length>0?o+="/"+e.slice(s+1,c):o=e.slice(s+1,c),i=c-s-1;s=c,a=0}else 46===n&&a>-1?a++:a=-1}return o}function Z(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Q={cwd:X};function X(){return"/"}function ee(e){return null!==e&&"object"===typeof e&&e.href&&e.origin}function te(e){if("string"===typeof e)e=new URL(e);else if(!ee(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return ne(e)}function ne(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;while(++n<t.length)if(37===t.charCodeAt(n)&&50===t.charCodeAt(n+1)){const e=t.charCodeAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}const re=["history","path","basename","stem","extname","dirname"];class oe{constructor(e){let t;t=e?"string"===typeof e||R(e)?{value:e}:ee(e)?{path:e}:e:{},this.data={},this.messages=[],this.history=[],this.cwd=Q.cwd(),this.value,this.stored,this.result,this.map;let n,r=-1;while(++r<re.length){const e=re[r];e in t&&void 0!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)re.includes(n)||(this[n]=t[n])}get path(){return this.history[this.history.length-1]}set path(e){ee(e)&&(e=te(e)),se(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return"string"===typeof this.path?H.dirname(this.path):void 0}set dirname(e){ae(this.basename,"dirname"),this.path=H.join(e||"",this.basename)}get basename(){return"string"===typeof this.path?H.basename(this.path):void 0}set basename(e){se(e,"basename"),ie(e,"basename"),this.path=H.join(this.dirname||"",e)}get extname(){return"string"===typeof this.path?H.extname(this.path):void 0}set extname(e){if(ie(e,"extname"),ae(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=H.join(this.dirname,this.stem+(e||""))}get stem(){return"string"===typeof this.path?H.basename(this.path,this.extname):void 0}set stem(e){se(e,"stem"),ie(e,"stem"),this.path=H.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e)}message(e,t,n){const r=new W(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=null,r}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}}function ie(e,t){if(e&&e.includes(H.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+H.sep+"`")}function se(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const ce=ue().freeze(),le={}.hasOwnProperty;function ue(){const e=P(),t=[];let n,r={},o=-1;return i.data=s,i.Parser=void 0,i.Compiler=void 0,i.freeze=a,i.attachers=t,i.use=c,i.parse=l,i.stringify=u,i.run=h,i.runSync=p,i.process=f,i.processSync=d,i;function i(){const e=ue();let n=-1;while(++n<t.length)e.use(...t[n]);return e.data(z(!0,{},r)),e}function s(e,t){return"string"===typeof e?2===arguments.length?(me("data",n),r[e]=t,i):le.call(r,e)&&r[e]||null:e?(me("data",n),r=e,i):r}function a(){if(n)return i;while(++o<t.length){const[n,...r]=t[o];if(!1===r[0])continue;!0===r[0]&&(r[1]=void 0);const s=n.call(i,...r);"function"===typeof s&&e.use(s)}return n=!0,o=Number.POSITIVE_INFINITY,i}function c(e,...o){let s;if(me("use",n),null===e||void 0===e);else if("function"===typeof e)u(e,...o);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):c(e)}return s&&(r.settings=Object.assign(r.settings||{},s)),i;function a(e){if("function"===typeof e)u(e);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;u(t,...n)}else c(e)}}function c(e){l(e.plugins),e.settings&&(s=Object.assign(s||{},e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");while(++t<e.length){const n=e[t];a(n)}}}function u(e,n){let r,o=-1;while(++o<t.length)if(t[o][0]===e){r=t[o];break}r?(F(r[1])&&F(n)&&(n=z(!0,r[1],n)),r[1]=n):t.push([...arguments])}}function l(e){i.freeze();const t=ye(e),n=i.Parser;return fe("parse",n),he(n,"parse")?new n(String(t),t).parse():n(String(t),t)}function u(e,t){i.freeze();const n=ye(t),r=i.Compiler;return de("stringify",r),ve(e),he(r,"compile")?new r(e,n).compile():r(e,n)}function h(t,n,r){if(ve(t),i.freeze(),r||"function"!==typeof n||(r=n,n=void 0),!r)return new Promise(o);function o(o,i){function s(e,n,s){n=n||t,e?i(e):o?o(n):r(null,n,s)}e.run(t,ye(n),s)}o(null,r)}function p(e,t){let n,r;return i.run(e,t,o),ge("runSync","run",r),n;function o(e,t){I(e),n=t,r=!0}}function f(e,t){if(i.freeze(),fe("process",i.Parser),de("process",i.Compiler),!t)return new Promise(n);function n(n,r){const o=ye(e);function s(e,o){e||!o?r(e):n?n(o):t(null,o)}i.run(i.parse(o),o,((e,t,n)=>{if(!e&&t&&n){const r=i.stringify(t,n);void 0===r||null===r||(be(r)?n.value=r:n.result=r),s(e,n)}else s(e)}))}n(null,t)}function d(e){let t;i.freeze(),fe("processSync",i.Parser),de("processSync",i.Compiler);const n=ye(e);return i.process(n,r),ge("processSync","process",t),n;function r(e){t=!0,I(e)}}}function he(e,t){return"function"===typeof e&&e.prototype&&(pe(e.prototype)||t in e.prototype)}function pe(e){let t;for(t in e)if(le.call(e,t))return!0;return!1}function fe(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function de(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function me(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ve(e){if(!F(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function ge(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ye(e){return we(e)?e:new oe(e)}function we(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}function be(e){return"string"===typeof e||R(e)}function ke(e,t){var{includeImageAlt:n=!0}=t||{};return xe(e,n)}function xe(e,t){return e&&"object"===typeof e&&(e.value||(t?e.alt:"")||"children"in e&&Se(e.children,t)||Array.isArray(e)&&Se(e,t))||""}function Se(e,t){var n=[],r=-1;while(++r<e.length)n[r]=xe(e[r],t);return n.join("")}function Ce(e,t,n,r){const o=e.length;let i,s=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),[].splice.apply(e,i);else{n&&[].splice.apply(e,[t,n]);while(s<r.length)i=r.slice(s,s+1e4),i.unshift(t,0),[].splice.apply(e,i),s+=1e4,t+=1e4}}function Me(e,t){return e.length>0?(Ce(e,e.length,0,t),e):t}const Oe={}.hasOwnProperty;function Ee(e){const t={};let n=-1;while(++n<e.length)Ae(t,e[n]);return t}function Ae(e,t){let n;for(n in t){const r=Oe.call(e,n)?e[n]:void 0,o=r||(e[n]={}),i=t[n];let s;for(s in i){Oe.call(o,s)||(o[s]=[]);const e=i[s];Ne(o[s],Array.isArray(e)?e:e?[e]:[])}}}function Ne(e,t){let n=-1;const r=[];while(++n<t.length)("after"===t[n].add?e:r).push(t[n]);Ce(e,0,0,r)}const Te=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,De=We(/[A-Za-z]/),Ie=We(/\d/),Re=We(/[\dA-Fa-f]/),ze=We(/[\dA-Za-z]/),Fe=We(/[!-/:-@[-`{-~]/),Pe=We(/[#-'*+\--9=?A-Z^-~]/);function $e(e){return null!==e&&(e<32||127===e)}function Be(e){return null!==e&&(e<0||32===e)}function _e(e){return null!==e&&e<-2}function je(e){return-2===e||-1===e||32===e}const Le=We(/\s/),Ve=We(Te);function We(e){return t;function t(t){return null!==t&&e.test(String.fromCharCode(t))}}function He(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let i=0;return s;function s(r){return je(r)?(e.enter(n),a(r)):t(r)}function a(r){return je(r)&&i++<o?(e.consume(r),a):(e.exit(n),t(r))}}const qe={tokenize:Je};function Je(e){const t=e.attempt(this.parser.constructs.contentInitial,r,o);let n;return t;function r(n){if(null!==n)return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),He(e,t,"linePrefix");e.consume(n)}function o(t){return e.enter("paragraph"),i(t)}function i(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):_e(t)?(e.consume(t),e.exit("chunkText"),i):(e.consume(t),s)}}const Ye={tokenize:Ue},Ke={tokenize:Ge};function Ue(e){const t=this,n=[];let r,o,i,s=0;return a;function a(r){if(s<n.length){const o=n[s];return t.containerState=o[1],e.attempt(o[0].continuation,c,l)(r)}return l(r)}function c(e){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let o,i=n;while(i--)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){o=t.events[i][1].end;break}g(s);let a=n;while(a<t.events.length)t.events[a][1].end=Object.assign({},o),a++;return Ce(t.events,i+1,0,t.events.slice(n)),t.events.length=a,l(e)}return a(e)}function l(o){if(s===n.length){if(!r)return p(o);if(r.currentConstruct&&r.currentConstruct.concrete)return d(o);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ke,u,h)(o)}function u(e){return r&&y(),g(s),p(e)}function h(e){return t.parser.lazy[t.now().line]=s!==n.length,i=t.now().offset,d(e)}function p(n){return t.containerState={},e.attempt(Ke,f,d)(n)}function f(e){return s++,n.push([t.currentConstruct,t.containerState]),p(e)}function d(n){return null===n?(r&&y(),g(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:r}),m(n))}function m(n){return null===n?(v(e.exit("chunkFlow"),!0),g(0),void e.consume(n)):_e(n)?(e.consume(n),v(e.exit("chunkFlow")),s=0,t.interrupt=void 0,a):(e.consume(n),m)}function v(e,n){const a=t.sliceStream(e);if(n&&a.push(null),e.previous=o,o&&(o.next=e),o=e,r.defineSkip(e.start),r.write(a),t.parser.lazy[e.start.line]){let e=r.events.length;while(e--)if(r.events[e][1].start.offset<i&&(!r.events[e][1].end||r.events[e][1].end.offset>i))return;const n=t.events.length;let o,a,c=n;while(c--)if("exit"===t.events[c][0]&&"chunkFlow"===t.events[c][1].type){if(o){a=t.events[c][1].end;break}o=!0}g(s),e=n;while(e<t.events.length)t.events[e][1].end=Object.assign({},a),e++;Ce(t.events,c+1,0,t.events.slice(n)),t.events.length=e}}function g(r){let o=n.length;while(o-- >r){const r=n[o];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),o=void 0,r=void 0,t.containerState._closeFlow=void 0}}function Ge(e,t,n){return He(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const Ze={tokenize:Qe,partial:!0};function Qe(e,t,n){return He(e,r,"linePrefix");function r(e){return null===e||_e(e)?t(e):n(e)}}function Xe(e){const t={};let n,r,o,i,s,a,c,l=-1;while(++l<e.length){while(l in t)l=t[l];if(n=e[l],l&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[l-1][1].type&&(a=n[1]._tokenizer.events,o=0,o<a.length&&"lineEndingBlank"===a[o][1].type&&(o+=2),o<a.length&&"content"===a[o][1].type))while(++o<a.length){if("content"===a[o][1].type)break;"chunkText"===a[o][1].type&&(a[o][1]._isInFirstContentOfListItem=!0,o++)}if("enter"===n[0])n[1].contentType&&(Object.assign(t,et(e,l)),l=t[l],c=!0);else if(n[1]._container){o=l,r=void 0;while(o--){if(i=e[o],"lineEnding"!==i[1].type&&"lineEndingBlank"!==i[1].type)break;"enter"===i[0]&&(r&&(e[r][1].type="lineEndingBlank"),i[1].type="lineEnding",r=o)}r&&(n[1].end=Object.assign({},e[r][1].start),s=e.slice(r,l),s.unshift(n),Ce(e,r,l-r+1,s))}}return!c}function et(e,t){const n=e[t][1],r=e[t][2];let o=t-1;const i=[],s=n._tokenizer||r.parser[n.contentType](n.start),a=s.events,c=[],l={};let u,h,p=-1,f=n,d=0,m=0;const v=[m];while(f){while(e[++o][1]!==f);i.push(o),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),h&&s.defineSkip(f.start),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}f=n;while(++p<a.length)"exit"===a[p][0]&&"enter"===a[p-1][0]&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(m=p+1,v.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);s.events=[],f?(f._tokenizer=void 0,f.previous=void 0):v.pop(),p=v.length;while(p--){const t=a.slice(v[p],v[p+1]),n=i.pop();c.unshift([n,n+t.length-1]),Ce(e,n,2,t)}p=-1;while(++p<c.length)l[d+c[p][0]]=d+c[p][1],d+=c[p][1]-c[p][0]-1;return l}const tt={tokenize:ot,resolve:rt},nt={tokenize:it,partial:!0};function rt(e){return Xe(e),e}function ot(e,t){let n;return r;function r(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(t)}function o(t){return null===t?i(t):_e(t)?e.check(nt,s,i)(t):(e.consume(t),o)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function it(e,t,n){const r=this;return o;function o(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),He(e,i,"linePrefix")}function i(o){if(null===o||_e(o))return n(o);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}const st={tokenize:at};function at(e){const t=this,n=e.attempt(Ze,r,e.attempt(this.parser.constructs.flowInitial,o,He(e,e.attempt(this.parser.constructs.flow,o,e.attempt(tt,o)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n;e.consume(r)}function o(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}const ct={resolveAll:pt()},lt=ht("string"),ut=ht("text");function ht(e){return{tokenize:t,resolveAll:pt("text"===e?ft:void 0)};function t(t){const n=this,r=this.parser.constructs[e],o=t.attempt(r,i,s);return i;function i(e){return c(e)?o(e):s(e)}function s(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return c(e)?(t.exit("data"),o(e)):(t.consume(e),a)}function c(e){if(null===e)return!0;const t=r[e];let o=-1;if(t)while(++o<t.length){const e=t[o];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}function pt(e){return t;function t(t,n){let r,o=-1;while(++o<=t.length)void 0===r?t[o]&&"data"===t[o][1].type&&(r=o,o++):t[o]&&"data"===t[o][1].type||(o!==r+2&&(t[r][1].end=t[o-1][1].end,t.splice(r+2,o-r-2),o=r+2),r=void 0);return e?e(t,n):t}}function ft(e,t){let n=0;while(++n<=e.length)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],o=t.sliceStream(r);let i,s=o.length,a=-1,c=0;while(s--){const e=o[s];if("string"===typeof e){a=e.length;while(32===e.charCodeAt(a-1))c++,a--;if(a)break;a=-1}else if(-2===e)i=!0,c++;else if(-1!==e){s++;break}}if(c){const o={type:n===e.length||i||c<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-c,offset:r.end.offset-c,_index:r.start._index+s,_bufferIndex:s?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},o.start),r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}function dt(e,t,n){const r=[];let o=-1;while(++o<e.length){const i=e[o].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}function mt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const o={},i=[];let s=[],a=[],c=!0;const l={consume:b,enter:k,exit:x,attempt:M(S),check:M(C),interrupt:M(C,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:m,sliceSerialize:d,now:v,defineSkip:g,write:f};let h,p=t.tokenize.call(u,l);return t.resolveAll&&i.push(t),u;function f(e){return s=Me(s,e),y(),null!==s[s.length-1]?[]:(O(t,0),u.events=dt(i,u.events,u),u.events)}function d(e,t){return gt(m(e),t)}function m(e){return vt(s,e)}function v(){return Object.assign({},r)}function g(e){o[e.line]=e.column,A()}function y(){let e;while(r._index<s.length){const t=s[r._index];if("string"===typeof t){e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);while(r._index===e&&r._bufferIndex<t.length)w(t.charCodeAt(r._bufferIndex))}else w(t)}}function w(e){c=void 0,h=e,p=p(e)}function b(e){_e(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,A()):-1!==e&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=e,c=!0}function k(e,t){const n=t||{};return n.type=e,n.start=v(),u.events.push(["enter",n,u]),a.push(n),n}function x(e){const t=a.pop();return t.end=v(),u.events.push(["exit",t,u]),t}function S(e,t){O(e,t.from)}function C(e,t){t.restore()}function M(e,t){return n;function n(n,r,o){let i,s,a,h;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):p(n);function p(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null,o=[...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]];return f(o)(t)}}function f(e){return i=e,s=0,0===e.length?o:d(e[s])}function d(e){return n;function n(n){return h=E(),a=e,e.partial||(u.currentConstruct=e),e.name&&u.parser.constructs.disable.null.includes(e.name)?v(n):e.tokenize.call(t?Object.assign(Object.create(u),t):u,l,m,v)(n)}}function m(t){return c=!0,e(a,h),r}function v(e){return c=!0,h.restore(),++s<i.length?d(i[s]):o}}}function O(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&Ce(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function E(){const e=v(),t=u.previous,n=u.currentConstruct,o=u.events.length,i=Array.from(a);return{restore:s,from:o};function s(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=o,a=i,A()}}function A(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function vt(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,i=t.end._bufferIndex;let s;return n===o?s=[e[n].slice(r,i)]:(s=e.slice(n,o),r>-1&&(s[0]=s[0].slice(r)),i>0&&s.push(e[o].slice(0,i))),s}function gt(e,t){let n=-1;const r=[];let o;while(++n<e.length){const i=e[n];let s;if("string"===typeof i)s=i;else switch(i){case-5:s="\r";break;case-4:s="\n";break;case-3:s="\r\n";break;case-2:s=t?" ":"\t";break;case-1:if(!t&&o)continue;s=" ";break;default:s=String.fromCharCode(i)}o=-2===i,r.push(s)}return r.join("")}const yt={name:"thematicBreak",tokenize:wt};function wt(e,t,n){let r,o=0;return i;function i(t){return e.enter("thematicBreak"),r=t,s(t)}function s(i){return i===r?(e.enter("thematicBreakSequence"),a(i)):je(i)?He(e,s,"whitespace")(i):o<3||null!==i&&!_e(i)?n(i):(e.exit("thematicBreak"),t(i))}function a(t){return t===r?(e.consume(t),o++,a):(e.exit("thematicBreakSequence"),s(t))}}const bt={name:"list",tokenize:St,continuation:{tokenize:Ct},exit:Ot},kt={tokenize:Et,partial:!0},xt={tokenize:Mt,partial:!0};function St(e,t,n){const r=this,o=r.events[r.events.length-1];let i=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0,s=0;return a;function a(t){const o=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===o?!r.containerState.marker||t===r.containerState.marker:Ie(t)){if(r.containerState.type||(r.containerState.type=o,e.enter(o,{_container:!0})),"listUnordered"===o)return e.enter("listItemPrefix"),42===t||45===t?e.check(yt,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(t)}return n(t)}function c(t){return Ie(t)&&++s<10?(e.consume(t),c):(!r.interrupt||s<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Ze,r.interrupt?n:u,e.attempt(kt,p,h))}function u(e){return r.containerState.initialBlankLine=!0,i++,p(e)}function h(t){return je(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),p):n(t)}function p(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}function Ct(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ze,o,i);function o(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,He(e,t,"listItemIndent",r.containerState.size+1)(n)}function i(n){return r.containerState.furtherBlankLines||!je(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(xt,t,s)(n))}function s(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,He(e,e.attempt(bt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Mt(e,t,n){const r=this;return He(e,o,"listItemIndent",r.containerState.size+1);function o(e){const o=r.events[r.events.length-1];return o&&"listItemIndent"===o[1].type&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(e):n(e)}}function Ot(e){e.exit(this.containerState.type)}function Et(e,t,n){const r=this;return He(e,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(e){const o=r.events[r.events.length-1];return!je(e)&&o&&"listItemPrefixWhitespace"===o[1].type?t(e):n(e)}}const At={name:"blockQuote",tokenize:Nt,continuation:{tokenize:Tt},exit:Dt};function Nt(e,t,n){const r=this;return o;function o(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)}function i(n){return je(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}function Tt(e,t,n){return He(e,e.attempt(At,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Dt(e){e.exit("blockQuote")}function It(e,t,n,r,o,i,s,a,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(t){return 60===t?(e.enter(r),e.enter(o),e.enter(i),e.consume(t),e.exit(i),p):null===t||41===t||$e(t)?n(t):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(t))}function p(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(o),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),f(n))}function f(t){return 62===t?(e.exit("chunkString"),e.exit(a),p(t)):null===t||60===t||_e(t)?n(t):(e.consume(t),92===t?d:f)}function d(t){return 60===t||62===t||92===t?(e.consume(t),f):f(t)}function m(o){return 40===o?++u>l?n(o):(e.consume(o),m):41===o?u--?(e.consume(o),m):(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(o)):null===o||Be(o)?u?n(o):(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(o)):$e(o)?n(o):(e.consume(o),92===o?v:m)}function v(t){return 40===t||41===t||92===t?(e.consume(t),m):m(t)}}function Rt(e,t,n,r,o,i){const s=this;let a,c=0;return l;function l(t){return e.enter(r),e.enter(o),e.consume(t),e.exit(o),e.enter(i),u}function u(l){return null===l||91===l||93===l&&!a||94===l&&!c&&"_hiddenFootnoteSupport"in s.parser.constructs||c>999?n(l):93===l?(e.exit(i),e.enter(o),e.consume(l),e.exit(o),e.exit(r),t):_e(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(l))}function h(t){return null===t||91===t||93===t||_e(t)||c++>999?(e.exit("chunkString"),u(t)):(e.consume(t),a=a||!je(t),92===t?p:h)}function p(t){return 91===t||92===t||93===t?(e.consume(t),c++,h):h(t)}}function zt(e,t,n,r,o,i){let s;return a;function a(t){return e.enter(r),e.enter(o),e.consume(t),e.exit(o),s=40===t?41:t,c}function c(n){return n===s?(e.enter(o),e.consume(n),e.exit(o),e.exit(r),t):(e.enter(i),l(n))}function l(t){return t===s?(e.exit(i),c(s)):null===t?n(t):_e(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),He(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===s||null===t||_e(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?h:u)}function h(t){return t===s||92===t?(e.consume(t),u):u(t)}}function Ft(e,t){let n;return r;function r(o){return _e(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r):je(o)?He(e,r,n?"linePrefix":"lineSuffix")(o):t(o)}}function Pt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const $t={name:"definition",tokenize:_t},Bt={tokenize:jt,partial:!0};function _t(e,t,n){const r=this;let o;return i;function i(t){return e.enter("definition"),Rt.call(r,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}function s(t){return o=Pt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),Ft(e,It(e,e.attempt(Bt,He(e,a,"whitespace"),He(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function a(i){return null===i||_e(i)?(e.exit("definition"),r.parser.defined.includes(o)||r.parser.defined.push(o),t(i)):n(i)}}function jt(e,t,n){return r;function r(t){return Be(t)?Ft(e,o)(t):n(t)}function o(t){return 34===t||39===t||40===t?zt(e,He(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||_e(e)?t(e):n(e)}}const Lt={name:"codeIndented",tokenize:Wt},Vt={tokenize:Ht,partial:!0};function Wt(e,t,n){const r=this;return o;function o(t){return e.enter("codeIndented"),He(e,i,"linePrefix",5)(t)}function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?s(e):n(e)}function s(t){return null===t?c(t):_e(t)?e.attempt(Vt,s,c)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||_e(t)?(e.exit("codeFlowValue"),s(t)):(e.consume(t),a)}function c(n){return e.exit("codeIndented"),t(n)}}function Ht(e,t,n){const r=this;return o;function o(t){return r.parser.lazy[r.now().line]?n(t):_e(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):He(e,i,"linePrefix",5)(t)}function i(e){const i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):_e(e)?o(e):n(e)}}const qt={name:"headingAtx",tokenize:Yt,resolve:Jt};function Jt(e,t){let n,r,o=e.length-2,i=3;return"whitespace"===e[i][1].type&&(i+=2),o-2>i&&"whitespace"===e[o][1].type&&(o-=2),"atxHeadingSequence"===e[o][1].type&&(i===o-1||o-4>i&&"whitespace"===e[o-2][1].type)&&(o-=i+1===o?2:4),o>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[o][1].end},r={type:"chunkText",start:e[i][1].start,end:e[o][1].end,contentType:"text"},Ce(e,i,o-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]])),e}function Yt(e,t,n){const r=this;let o=0;return i;function i(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),s(t)}function s(i){return 35===i&&o++<6?(e.consume(i),s):null===i||Be(i)?(e.exit("atxHeadingSequence"),r.interrupt?t(i):a(i)):n(i)}function a(n){return 35===n?(e.enter("atxHeadingSequence"),c(n)):null===n||_e(n)?(e.exit("atxHeading"),t(n)):je(n)?He(e,a,"whitespace")(n):(e.enter("atxHeadingText"),l(n))}function c(t){return 35===t?(e.consume(t),c):(e.exit("atxHeadingSequence"),a(t))}function l(t){return null===t||35===t||Be(t)?(e.exit("atxHeadingText"),a(t)):(e.consume(t),l)}}const Kt={name:"setextUnderline",tokenize:Gt,resolveTo:Ut};function Ut(e,t){let n,r,o,i=e.length;while(i--)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),o||"definition"!==e[i][1].type||(o=i);const s={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",s,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[o][1].end)):e[n][1]=s,e.push(["exit",s,t]),e}function Gt(e,t,n){const r=this;let o,i,s=r.events.length;while(s--)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){i="paragraph"===r.events[s][1].type;break}return a;function a(t){return r.parser.lazy[r.now().line]||!r.interrupt&&!i?n(t):(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),o=t,c(t))}function c(t){return t===o?(e.consume(t),c):(e.exit("setextHeadingLineSequence"),He(e,l,"lineSuffix")(t))}function l(r){return null===r||_e(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}const Zt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Qt=["pre","script","style","textarea"],Xt={name:"htmlFlow",tokenize:nn,resolveTo:tn,concrete:!0},en={tokenize:rn,partial:!0};function tn(e){let t=e.length;while(t--)if("enter"===e[t][0]&&"htmlFlow"===e[t][1].type)break;return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function nn(e,t,n){const r=this;let o,i,s,a,c;return l;function l(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),u}function u(a){return 33===a?(e.consume(a),h):47===a?(e.consume(a),d):63===a?(e.consume(a),o=3,r.interrupt?t:F):De(a)?(e.consume(a),s=String.fromCharCode(a),i=!0,m):n(a)}function h(i){return 45===i?(e.consume(i),o=2,p):91===i?(e.consume(i),o=5,s="CDATA[",a=0,f):De(i)?(e.consume(i),o=4,r.interrupt?t:F):n(i)}function p(o){return 45===o?(e.consume(o),r.interrupt?t:F):n(o)}function f(o){return o===s.charCodeAt(a++)?(e.consume(o),a===s.length?r.interrupt?t:E:f):n(o)}function d(t){return De(t)?(e.consume(t),s=String.fromCharCode(t),m):n(t)}function m(a){return null===a||47===a||62===a||Be(a)?47!==a&&i&&Qt.includes(s.toLowerCase())?(o=1,r.interrupt?t(a):E(a)):Zt.includes(s.toLowerCase())?(o=6,47===a?(e.consume(a),v):r.interrupt?t(a):E(a)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(a):i?y(a):g(a)):45===a||ze(a)?(e.consume(a),s+=String.fromCharCode(a),m):n(a)}function v(o){return 62===o?(e.consume(o),r.interrupt?t:E):n(o)}function g(t){return je(t)?(e.consume(t),g):M(t)}function y(t){return 47===t?(e.consume(t),M):58===t||95===t||De(t)?(e.consume(t),w):je(t)?(e.consume(t),y):M(t)}function w(t){return 45===t||46===t||58===t||95===t||ze(t)?(e.consume(t),w):b(t)}function b(t){return 61===t?(e.consume(t),k):je(t)?(e.consume(t),b):y(t)}function k(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),c=t,x):je(t)?(e.consume(t),k):(c=null,S(t))}function x(t){return null===t||_e(t)?n(t):t===c?(e.consume(t),C):(e.consume(t),x)}function S(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||Be(t)?b(t):(e.consume(t),S)}function C(e){return 47===e||62===e||je(e)?y(e):n(e)}function M(t){return 62===t?(e.consume(t),O):n(t)}function O(t){return je(t)?(e.consume(t),O):null===t||_e(t)?E(t):n(t)}function E(t){return 45===t&&2===o?(e.consume(t),D):60===t&&1===o?(e.consume(t),I):62===t&&4===o?(e.consume(t),P):63===t&&3===o?(e.consume(t),F):93===t&&5===o?(e.consume(t),z):!_e(t)||6!==o&&7!==o?null===t||_e(t)?A(t):(e.consume(t),E):e.check(en,P,A)(t)}function A(t){return e.exit("htmlFlowData"),N(t)}function N(t){return null===t?$(t):_e(t)?e.attempt({tokenize:T,partial:!0},N,$)(t):(e.enter("htmlFlowData"),E(t))}function T(e,t,n){return o;function o(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i}function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function D(t){return 45===t?(e.consume(t),F):E(t)}function I(t){return 47===t?(e.consume(t),s="",R):E(t)}function R(t){return 62===t&&Qt.includes(s.toLowerCase())?(e.consume(t),P):De(t)&&s.length<8?(e.consume(t),s+=String.fromCharCode(t),R):E(t)}function z(t){return 93===t?(e.consume(t),F):E(t)}function F(t){return 62===t?(e.consume(t),P):45===t&&2===o?(e.consume(t),F):E(t)}function P(t){return null===t||_e(t)?(e.exit("htmlFlowData"),$(t)):(e.consume(t),P)}function $(n){return e.exit("htmlFlow"),t(n)}}function rn(e,t,n){return r;function r(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(Ze,t,n)}}const on={name:"codeFenced",tokenize:sn,concrete:!0};function sn(e,t,n){const r=this,o={tokenize:k,partial:!0},i={tokenize:b,partial:!0},s=this.events[this.events.length-1],a=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0;let c,l=0;return u;function u(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c=t,h(t)}function h(t){return t===c?(e.consume(t),l++,h):(e.exit("codeFencedFenceSequence"),l<3?n(t):He(e,p,"whitespace")(t))}function p(t){return null===t||_e(t)?v(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||Be(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),He(e,d,"whitespace")(t)):96===t&&t===c?n(t):(e.consume(t),f)}function d(t){return null===t||_e(t)?v(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(t))}function m(t){return null===t||_e(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),v(t)):96===t&&t===c?n(t):(e.consume(t),m)}function v(n){return e.exit("codeFencedFence"),r.interrupt?t(n):g(n)}function g(t){return null===t?w(t):_e(t)?e.attempt(i,e.attempt(o,w,a?He(e,g,"linePrefix",a+1):g),w)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||_e(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function w(n){return e.exit("codeFenced"),t(n)}function b(e,t,n){const r=this;return o;function o(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i}function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function k(e,t,n){let r=0;return He(e,o,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function o(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),i(t)}function i(t){return t===c?(e.consume(t),r++,i):r<l?n(t):(e.exit("codeFencedFenceSequence"),He(e,s,"whitespace")(t))}function s(r){return null===r||_e(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}}const an=document.createElement("i");function cn(e){const t="&"+e+";";an.innerHTML=t;const n=an.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const ln={name:"characterReference",tokenize:un};function un(e,t,n){const r=this;let o,i,s=0;return a;function a(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),c}function c(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,i=ze,u(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,i=Re,u):(e.enter("characterReferenceValue"),o=7,i=Ie,u(t))}function u(a){let c;return 59===a&&s?(c=e.exit("characterReferenceValue"),i!==ze||cn(r.sliceSerialize(c))?(e.enter("characterReferenceMarker"),e.consume(a),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(a)):i(a)&&s++<o?(e.consume(a),u):n(a)}}const hn={name:"characterEscape",tokenize:pn};function pn(e,t,n){return r;function r(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),o}function o(r){return Fe(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}const fn={name:"lineEnding",tokenize:dn};function dn(e,t){return n;function n(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),He(e,t,"linePrefix")}}const mn={name:"labelEnd",tokenize:kn,resolveTo:bn,resolveAll:wn},vn={tokenize:xn},gn={tokenize:Sn},yn={tokenize:Cn};function wn(e){let t,n=-1;while(++n<e.length)t=e[n][1],"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}function bn(e,t){let n,r,o,i,s=e.length,a=0;while(s--)if(n=e[s][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[s][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(o){if("enter"===e[s][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=s,"labelLink"!==n.type)){a=2;break}}else"labelEnd"===n.type&&(o=s);const c={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[o][1].end)},u={type:"labelText",start:Object.assign({},e[r+a+2][1].end),end:Object.assign({},e[o-2][1].start)};return i=[["enter",c,t],["enter",l,t]],i=Me(i,e.slice(r+1,r+a+3)),i=Me(i,[["enter",u,t]]),i=Me(i,dt(t.parser.constructs.insideSpan.null,e.slice(r+a+4,o-3),t)),i=Me(i,[["exit",u,t],e[o-2],e[o-1],["exit",l,t]]),i=Me(i,e.slice(o+1)),i=Me(i,[["exit",c,t]]),Ce(e,r,e.length,i),e}function kn(e,t,n){const r=this;let o,i,s=r.events.length;while(s--)if(("labelImage"===r.events[s][1].type||"labelLink"===r.events[s][1].type)&&!r.events[s][1]._balanced){o=r.events[s][1];break}return a;function a(t){return o?o._inactive?l(t):(i=r.parser.defined.includes(Pt(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),c):n(t)}function c(n){return 40===n?e.attempt(vn,t,i?t:l)(n):91===n?e.attempt(gn,t,i?e.attempt(yn,t,l):l)(n):i?t(n):l(n)}function l(e){return o._balanced=!0,n(e)}}function xn(e,t,n){return r;function r(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),Ft(e,o)}function o(t){return 41===t?a(t):It(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return Be(t)?Ft(e,s)(t):a(t)}function s(t){return 34===t||39===t||40===t?zt(e,Ft(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):a(t)}function a(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}function Sn(e,t,n){const r=this;return o;function o(t){return Rt.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)}function i(e){return r.parser.defined.includes(Pt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}}function Cn(e,t,n){return r;function r(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),o}function o(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}const Mn={name:"labelStartImage",tokenize:On,resolveAll:mn.resolveAll};function On(e,t,n){const r=this;return o;function o(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i}function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),s):n(t)}function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}function En(e){return null===e||Be(e)||Le(e)?1:Ve(e)?2:void 0}const An={name:"attention",tokenize:Tn,resolveAll:Nn};function Nn(e,t){let n,r,o,i,s,a,c,l,u=-1;while(++u<e.length)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close){n=u;while(n--)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;a=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);Dn(h,-a),Dn(p,a),i={type:a>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},e[n][1].end)},s={type:a>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},o={type:a>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:a>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},s.end)},e[n][1].end=Object.assign({},i.start),e[u][1].start=Object.assign({},s.end),c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=Me(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=Me(c,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",o,t]]),c=Me(c,dt(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),c=Me(c,[["exit",o,t],["enter",s,t],["exit",s,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(l=2,c=Me(c,[["enter",e[u][1],t],["exit",e[u][1],t]])):l=0,Ce(e,n-1,u-n+3,c),u=n+c.length-l-2;break}}u=-1;while(++u<e.length)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}function Tn(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=En(r);let i;return s;function s(t){return e.enter("attentionSequence"),i=t,a(t)}function a(s){if(s===i)return e.consume(s),a;const c=e.exit("attentionSequence"),l=En(s),u=!l||2===l&&o||n.includes(s),h=!o||2===o&&l||n.includes(r);return c._open=Boolean(42===i?u:u&&(o||!h)),c._close=Boolean(42===i?h:h&&(l||!u)),t(s)}}function Dn(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const In={name:"autolink",tokenize:Rn};function Rn(e,t,n){let r=1;return o;function o(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(t){return De(t)?(e.consume(t),s):Pe(t)?l(t):n(t)}function s(e){return 43===e||45===e||46===e||ze(e)?a(e):l(e)}function a(t){return 58===t?(e.consume(t),c):(43===t||45===t||46===t||ze(t))&&r++<32?(e.consume(t),a):l(t)}function c(t){return 62===t?(e.exit("autolinkProtocol"),f(t)):null===t||32===t||60===t||$e(t)?n(t):(e.consume(t),c)}function l(t){return 64===t?(e.consume(t),r=0,u):Pe(t)?(e.consume(t),l):n(t)}function u(e){return ze(e)?h(e):n(e)}function h(t){return 46===t?(e.consume(t),r=0,u):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",f(t)):p(t)}function p(t){return(45===t||ze(t))&&r++<63?(e.consume(t),45===t?p:h):n(t)}function f(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}const zn={name:"htmlText",tokenize:Fn};function Fn(e,t,n){const r=this;let o,i,s,a;return c;function c(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l}function l(t){return 33===t?(e.consume(t),u):47===t?(e.consume(t),S):63===t?(e.consume(t),k):De(t)?(e.consume(t),O):n(t)}function u(t){return 45===t?(e.consume(t),h):91===t?(e.consume(t),i="CDATA[",s=0,v):De(t)?(e.consume(t),b):n(t)}function h(t){return 45===t?(e.consume(t),p):n(t)}function p(t){return null===t||62===t?n(t):45===t?(e.consume(t),f):d(t)}function f(e){return null===e||62===e?n(e):d(e)}function d(t){return null===t?n(t):45===t?(e.consume(t),m):_e(t)?(a=d,z(t)):(e.consume(t),d)}function m(t){return 45===t?(e.consume(t),P):d(t)}function v(t){return t===i.charCodeAt(s++)?(e.consume(t),s===i.length?g:v):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),y):_e(t)?(a=g,z(t)):(e.consume(t),g)}function y(t){return 93===t?(e.consume(t),w):g(t)}function w(t){return 62===t?P(t):93===t?(e.consume(t),w):g(t)}function b(t){return null===t||62===t?P(t):_e(t)?(a=b,z(t)):(e.consume(t),b)}function k(t){return null===t?n(t):63===t?(e.consume(t),x):_e(t)?(a=k,z(t)):(e.consume(t),k)}function x(e){return 62===e?P(e):k(e)}function S(t){return De(t)?(e.consume(t),C):n(t)}function C(t){return 45===t||ze(t)?(e.consume(t),C):M(t)}function M(t){return _e(t)?(a=M,z(t)):je(t)?(e.consume(t),M):P(t)}function O(t){return 45===t||ze(t)?(e.consume(t),O):47===t||62===t||Be(t)?E(t):n(t)}function E(t){return 47===t?(e.consume(t),P):58===t||95===t||De(t)?(e.consume(t),A):_e(t)?(a=E,z(t)):je(t)?(e.consume(t),E):P(t)}function A(t){return 45===t||46===t||58===t||95===t||ze(t)?(e.consume(t),A):N(t)}function N(t){return 61===t?(e.consume(t),T):_e(t)?(a=N,z(t)):je(t)?(e.consume(t),N):E(t)}function T(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),o=t,D):_e(t)?(a=T,z(t)):je(t)?(e.consume(t),T):(e.consume(t),o=void 0,R)}function D(t){return t===o?(e.consume(t),I):null===t?n(t):_e(t)?(a=D,z(t)):(e.consume(t),D)}function I(e){return 62===e||47===e||Be(e)?E(e):n(e)}function R(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||Be(t)?E(t):(e.consume(t),R)}function z(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),He(e,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function F(t){return e.enter("htmlTextData"),a(t)}function P(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}const Pn={name:"labelStartLink",tokenize:$n,resolveAll:mn.resolveAll};function $n(e,t,n){const r=this;return o;function o(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}const Bn={name:"hardBreakEscape",tokenize:_n};function _n(e,t,n){return r;function r(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),o}function o(r){return _e(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}const jn={name:"codeText",tokenize:Wn,resolve:Ln,previous:Vn};function Ln(e){let t,n,r=e.length-4,o=3;if(("lineEnding"===e[o][1].type||"space"===e[o][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){t=o;while(++t<r)if("codeTextData"===e[t][1].type){e[o][1].type="codeTextPadding",e[r][1].type="codeTextPadding",o+=2,r-=2;break}}t=o-1,r++;while(++t<=r)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function Vn(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}function Wn(e,t,n){let r,o,i=0;return s;function s(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)}function a(t){return 96===t?(e.consume(t),i++,a):(e.exit("codeTextSequence"),c(t))}function c(t){return null===t?n(t):96===t?(o=e.enter("codeTextSequence"),r=0,u(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),c):_e(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||_e(t)?(e.exit("codeTextData"),c(t)):(e.consume(t),l)}function u(n){return 96===n?(e.consume(n),r++,u):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",l(n))}}const Hn={[42]:bt,[43]:bt,[45]:bt,[48]:bt,[49]:bt,[50]:bt,[51]:bt,[52]:bt,[53]:bt,[54]:bt,[55]:bt,[56]:bt,[57]:bt,[62]:At},qn={[91]:$t},Jn={[-2]:Lt,[-1]:Lt,[32]:Lt},Yn={[35]:qt,[42]:yt,[45]:[Kt,yt],[60]:Xt,[61]:Kt,[95]:yt,[96]:on,[126]:on},Kn={[38]:ln,[92]:hn},Un={[-5]:fn,[-4]:fn,[-3]:fn,[33]:Mn,[38]:ln,[42]:An,[60]:[In,zn],[91]:Pn,[92]:[Bn,hn],[93]:mn,[95]:An,[96]:jn},Gn={null:[An,ct]},Zn={null:[42,95]},Qn={null:[]};function Xn(e={}){const t=Ee([r].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:o(qe),document:o(Ye),flow:o(st),string:o(lt),text:o(ut)};return n;function o(e){return t;function t(t){return mt(n,e,t)}}}const er=/[\0\t\n\r]/g;function tr(){let e,t=1,n="",r=!0;return o;function o(o,i,s){const a=[];let c,l,u,h,p;o=n+o.toString(i),u=0,n="",r&&(65279===o.charCodeAt(0)&&u++,r=void 0);while(u<o.length){if(er.lastIndex=u,c=er.exec(o),h=c&&void 0!==c.index?c.index:o.length,p=o.charCodeAt(h),!c){n=o.slice(u);break}if(10===p&&u===h&&e)a.push(-3),e=void 0;else switch(e&&(a.push(-5),e=void 0),u<h&&(a.push(o.slice(u,h)),t+=h-u),p){case 0:a.push(65533),t++;break;case 9:l=4*Math.ceil(t/4),a.push(-2);while(t++<l)a.push(-1);break;case 10:a.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return s&&(e&&a.push(-5),n&&a.push(n),a.push(null)),a}}function nr(e){while(!Xe(e));return e}function rr(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCharCode(n)}const or=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ir(e){return e.replace(or,sr)}function sr(e,t,n){if(t)return t;const r=n.charCodeAt(0);if(35===r){const e=n.charCodeAt(1),t=120===e||88===e;return rr(n.slice(t?2:1),t?16:10)}return cn(n)||e}const ar={}.hasOwnProperty,cr=function(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),lr(n)(nr(Xn(n).document().write(tr()(e,t,!0))))};function lr(e={}){const t=ur({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:c(oe),autolinkProtocol:A,autolinkEmail:A,atxHeading:c(ee),blockQuote:c(U),characterEscape:A,characterReference:A,codeFenced:c(G),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:c(G,l),codeText:c(Z,l),codeTextData:A,data:A,codeFlowValue:A,definition:c(Q),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:c(X),hardBreakEscape:c(te),hardBreakTrailing:c(te),htmlFlow:c(ne,l),htmlFlowData:A,htmlText:c(ne,l),htmlTextData:A,image:c(re),label:l,link:c(oe),listItem:c(se),listItemValue:m,listOrdered:c(ie,d),listUnordered:c(ie),paragraph:c(ae),reference:W,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:c(ee),strong:c(ce),thematicBreak:c(ue)},exit:{atxHeading:h(),atxHeadingSequence:C,autolink:h(),autolinkEmail:K,autolinkProtocol:Y,blockQuote:h(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:q,characterReferenceMarkerNumeric:q,characterReferenceValue:J,codeFenced:h(w),codeFencedFence:y,codeFencedFenceInfo:v,codeFencedFenceMeta:g,codeFlowValue:N,codeIndented:h(b),codeText:h(z),codeTextData:N,data:N,definition:h(),definitionDestinationString:S,definitionLabelString:k,definitionTitleString:x,emphasis:h(),hardBreakEscape:h(D),hardBreakTrailing:h(D),htmlFlow:h(I),htmlFlowData:N,htmlText:h(R),htmlTextData:N,image:h(P),label:B,labelText:$,lineEnding:T,link:h(F),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:H,resourceDestinationString:j,resourceTitleString:L,resource:V,setextHeading:h(E),setextHeadingLineSequence:O,setextHeadingText:M,strong:h(),thematicBreak:h()}},e.mdastExtensions||[]),n={};return r;function r(e){let n={type:"root",children:[]};const r=[n],c=[],h=[],d={stack:r,tokenStack:c,config:t,enter:u,exit:p,buffer:l,resume:f,setData:i,getData:s};let m=-1;while(++m<e.length)if("listOrdered"===e[m][1].type||"listUnordered"===e[m][1].type)if("enter"===e[m][0])h.push(m);else{const t=h.pop();m=o(e,t,m)}m=-1;while(++m<e.length){const n=t[e[m][0]];ar.call(n,e[m][1].type)&&n[e[m][1].type].call(Object.assign({sliceSerialize:e[m][2].sliceSerialize},d),e[m][1])}if(c.length>0){const e=c[c.length-1],t=e[1]||pr;t.call(d,void 0,e[0])}n.position={start:a(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:a(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},m=-1;while(++m<t.transforms.length)n=t.transforms[m](n)||n;return n}function o(e,t,n){let r,o,i,s,a=t-1,c=-1,l=!1;while(++a<=n){const t=e[a];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?c++:c--,s=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!r||s||c||i||(i=a),s=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(s=void 0),!c&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===c&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let s=a;o=void 0;while(s--){const t=e[s];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;o&&(e[o][1].type="lineEndingBlank",l=!0),t[1].type="lineEnding",o=s}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!o||i<o)&&(r._spread=!0),r.end=Object.assign({},o?e[o][1].start:t[1].end),e.splice(o||a,0,["exit",r,t[2]]),a++,n++}"listItemPrefix"===t[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start)},e.splice(a,0,["enter",r,t[2]]),a++,n++,i=void 0,s=!0)}}return e[t][1]._spread=l,n}function i(e,t){n[e]=t}function s(e){return n[e]}function a(e){return{line:e.line,column:e.column,offset:e.offset}}function c(e,t){return n;function n(n){u.call(this,e(n),n),t&&t.call(this,n)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(e,t,n){const r=this.stack[this.stack.length-1];return r.children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:a(t.start)},e}function h(e){return t;function t(t){e&&e.call(this,t),p.call(this,t)}}function p(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+_({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{const t=r[1]||pr;t.call(this,e,r[0])}return n.position.end=a(e.end),n}function f(){return ke(this.stack.pop())}function d(){i("expectingFirstListItemValue",!0)}function m(e){if(s("expectingFirstListItemValue")){const t=this.stack[this.stack.length-2];t.start=Number.parseInt(this.sliceSerialize(e),10),i("expectingFirstListItemValue")}}function v(){const e=this.resume(),t=this.stack[this.stack.length-1];t.lang=e}function g(){const e=this.resume(),t=this.stack[this.stack.length-1];t.meta=e}function y(){s("flowCodeInside")||(this.buffer(),i("flowCodeInside",!0))}function w(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),i("flowCodeInside")}function b(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e.replace(/(\r?\n|\r)$/g,"")}function k(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Pt(this.sliceSerialize(e)).toLowerCase()}function x(){const e=this.resume(),t=this.stack[this.stack.length-1];t.title=e}function S(){const e=this.resume(),t=this.stack[this.stack.length-1];t.url=e}function C(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function M(){i("setextHeadingSlurpLineEnding",!0)}function O(e){const t=this.stack[this.stack.length-1];t.depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function E(){i("setextHeadingSlurpLineEnding")}function A(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];n&&"text"===n.type||(n=le(),n.position={start:a(e.start)},t.children.push(n)),this.stack.push(n)}function N(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=a(e.end)}function T(e){const n=this.stack[this.stack.length-1];if(s("atHardBreak")){const t=n.children[n.children.length-1];return t.position.end=a(e.end),void i("atHardBreak")}!s("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(A.call(this,e),N.call(this,e))}function D(){i("atHardBreak",!0)}function I(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function R(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function z(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function F(){const e=this.stack[this.stack.length-1];s("inReference")?(e.type+="Reference",e.referenceType=s("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),i("referenceType")}function P(){const e=this.stack[this.stack.length-1];s("inReference")?(e.type+="Reference",e.referenceType=s("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),i("referenceType")}function $(e){const t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=ir(n),t.identifier=Pt(n).toLowerCase()}function B(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];i("inReference",!0),"link"===n.type?n.children=e.children:n.alt=t}function j(){const e=this.resume(),t=this.stack[this.stack.length-1];t.url=e}function L(){const e=this.resume(),t=this.stack[this.stack.length-1];t.title=e}function V(){i("inReference")}function W(){i("referenceType","collapsed")}function H(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Pt(this.sliceSerialize(e)).toLowerCase(),i("referenceType","full")}function q(e){i("characterReferenceType",e.type)}function J(e){const t=this.sliceSerialize(e),n=s("characterReferenceType");let r;n?(r=rr(t,"characterReferenceMarkerNumeric"===n?10:16),i("characterReferenceType")):r=cn(t);const o=this.stack.pop();o.value+=r,o.position.end=a(e.end)}function Y(e){N.call(this,e);const t=this.stack[this.stack.length-1];t.url=this.sliceSerialize(e)}function K(e){N.call(this,e);const t=this.stack[this.stack.length-1];t.url="mailto:"+this.sliceSerialize(e)}function U(){return{type:"blockquote",children:[]}}function G(){return{type:"code",lang:null,meta:null,value:""}}function Z(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function ee(){return{type:"heading",depth:void 0,children:[]}}function te(){return{type:"break"}}function ne(){return{type:"html",value:""}}function re(){return{type:"image",title:null,url:"",alt:null}}function oe(){return{type:"link",title:null,url:"",children:[]}}function ie(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function se(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ae(){return{type:"paragraph",children:[]}}function ce(){return{type:"strong",children:[]}}function le(){return{type:"text",value:""}}function ue(){return{type:"thematicBreak"}}}function ur(e,t){let n=-1;while(++n<t.length){const r=t[n];Array.isArray(r)?ur(e,r):hr(e,r)}return e}function hr(e,t){let n;for(n in t)if(ar.call(t,n)){const r="canContainEols"===n||"transforms"===n,o=ar.call(e,n)?e[n]:void 0,i=o||(e[n]=r?[]:{}),s=t[n];s&&(r?e[n]=[...i,...s]:Object.assign(i,s))}}function pr(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+_({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+_({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+_({start:t.start,end:t.end})+") is still open")}function fr(e){const t=t=>{const n=this.data("settings");return cr(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))};Object.assign(this,{Parser:t})}var dr=fr,mr={}.hasOwnProperty;function vr(e,t){var n=t||{};function r(t){var n=r.invalid,o=r.handlers;if(t&&mr.call(t,e)&&(n=mr.call(o,t[e])?o[t[e]]:r.unknown),n)return n.apply(this,arguments)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function gr(e,t){let n,r=-1;if(t.extensions)while(++r<t.extensions.length)gr(e,t.extensions[r]);for(n in t)"extensions"===n||("unsafe"===n||"join"===n?e[n]=[...e[n]||[],...t[n]||[]]:"handlers"===n?e[n]=Object.assign(e[n],t[n]||{}):e.options[n]=t[n]);return e}function yr(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,o=n.line||1,i=n.column||1;return{move:c,current:s,shift:a};function s(){return{now:{line:o,column:i},lineShift:r}}function a(e){r+=e}function c(e=""){const t=e.split(/\r?\n|\r/g),n=t[t.length-1];return o+=t.length-1,i=1===t.length?i+n.length:1+n.length+r,e}}function wr(e,t,n){const r=t.indexStack,o=e.children||[],i=yr(n),s=[];let a=-1;r.push(-1);while(++a<o.length){const n=o[a];r[r.length-1]=a,s.push(i.move(t.handle(n,e,t,{before:"\n",after:"\n",...i.current()}))),"list"!==n.type&&(t.bulletLastUsed=void 0),a<o.length-1&&s.push(i.move(c(n,o[a+1])))}return r.pop(),s.join("");function c(n,r){let o=t.join.length;while(o--){const i=t.join[o](n,r,e,t);if(!0===i||1===i)break;if("number"===typeof i)return"\n".repeat(1+i);if(!1===i)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}}const br=/\r?\n|\r/g;function kr(e,t){const n=[];let r,o=0,i=0;while(r=br.exec(e))s(e.slice(o,r.index)),n.push(r[0]),o=r.index+r[0].length,i++;return s(e.slice(o)),n.join("");function s(e){n.push(t(e,i,!e))}}function xr(e,t,n,r){const o=n.enter("blockquote"),i=yr(r);i.move("> "),i.shift(2);const s=kr(wr(e,n,i.current()),Sr);return o(),s}function Sr(e,t,n){return">"+(n?"":" ")+e}function Cr(e,t){return Mr(e,t.inConstruct,!0)&&!Mr(e,t.notInConstruct,!1)}function Mr(e,t,n){if(!t)return n;"string"===typeof t&&(t=[t]);let r=-1;while(++r<t.length)if(e.includes(t[r]))return!0;return!1}function Or(e,t,n,r){let o=-1;while(++o<n.unsafe.length)if("\n"===n.unsafe[o].character&&Cr(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function Er(e,t){const n=String(e);let r=n.indexOf(t),o=r,i=0,s=0;if("string"!==typeof t||1!==t.length)throw new Error("Expected character");while(-1!==r)r===o?++i>s&&(s=i):i=1,o=r+1,r=n.indexOf(t,o);return s}function Ar(e,t){return Boolean(!t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Nr(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Tr(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function Dr(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),o=[],i=[],s={};let a=-1;while(++a<e.unsafe.length){const t=e.unsafe[a];if(!Cr(e.stack,t))continue;const n=Tr(t);let i;while(i=n.exec(r)){const e="before"in t||Boolean(t.atBreak),n="after"in t,r=i.index+(e?i[1].length:0);o.includes(r)?(s[r].before&&!e&&(s[r].before=!1),s[r].after&&!n&&(s[r].after=!1)):(o.push(r),s[r]={before:e,after:n})}}o.sort(Ir);let c=n.before?n.before.length:0;const l=r.length-(n.after?n.after.length:0);a=-1;while(++a<o.length){const e=o[a];e<c||e>=l||(e+1<l&&o[a+1]===e+1&&s[e].after&&!s[e+1].before&&!s[e+1].after||o[a-1]===e-1&&s[e].before&&!s[e-1].before&&!s[e-1].after||(c!==e&&i.push(Rr(r.slice(c,e),"\\")),c=e,!/[!-/:-@[-`{-~]/.test(r.charAt(e))||n.encode&&n.encode.includes(r.charAt(e))?(i.push("&#x"+r.charCodeAt(e).toString(16).toUpperCase()+";"),c++):i.push("\\")))}return i.push(Rr(r.slice(c,l),n.after)),i.join("")}function Ir(e,t){return e-t}function Rr(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],o=[],i=e+t;let s,a=-1,c=0;while(s=n.exec(i))r.push(s.index);while(++a<r.length)c!==r[a]&&o.push(e.slice(c,r[a])),o.push("\\"),c=r[a];return o.push(e.slice(c)),o.join("")}function zr(e,t,n,r){const o=Nr(n),i=e.value||"",s="`"===o?"GraveAccent":"Tilde";if(Ar(e,n)){const e=n.enter("codeIndented"),t=kr(i,Fr);return e(),t}const a=yr(r),c=o.repeat(Math.max(Er(i,o)+1,3)),l=n.enter("codeFenced");let u=a.move(c);if(e.lang){const t=n.enter("codeFencedLang"+s);u+=a.move(Dr(n,e.lang,{before:u,after:" ",encode:["`"],...a.current()})),t()}if(e.lang&&e.meta){const t=n.enter("codeFencedMeta"+s);u+=a.move(" "),u+=a.move(Dr(n,e.meta,{before:u,after:"\n",encode:["`"],...a.current()})),t()}return u+=a.move("\n"),i&&(u+=a.move(i+"\n")),u+=a.move(c),l(),u}function Fr(e,t,n){return(n?"":"    ")+e}function Pr(e){return e.label||!e.identifier?e.label||"":ir(e.identifier)}function $r(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Br(e,t,n,r){const o=$r(n),i='"'===o?"Quote":"Apostrophe",s=n.enter("definition");let a=n.enter("label");const c=yr(r);let l=c.move("[");return l+=c.move(Dr(n,Pr(e),{before:l,after:"]",...c.current()})),l+=c.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),l+=c.move("<"),l+=c.move(Dr(n,e.url,{before:l,after:">",...c.current()})),l+=c.move(">")):(a=n.enter("destinationRaw"),l+=c.move(Dr(n,e.url,{before:l,after:e.title?" ":"\n",...c.current()}))),a(),e.title&&(a=n.enter("title"+i),l+=c.move(" "+o),l+=c.move(Dr(n,e.title,{before:l,after:o,...c.current()})),l+=c.move(o),a()),s(),l}function _r(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function jr(e,t,n){const r=t.indexStack,o=e.children||[],i=[];let s=-1,a=n.before;r.push(-1);let c=yr(n);while(++s<o.length){const l=o[s];let u;if(r[r.length-1]=s,s+1<o.length){let n=t.handle.handlers[o[s+1].type];n&&n.peek&&(n=n.peek),u=n?n(o[s+1],e,t,{before:"",after:"",...c.current()}).charAt(0):""}else u=n.after;i.length>0&&("\r"===a||"\n"===a)&&"html"===l.type&&(i[i.length-1]=i[i.length-1].replace(/(\r?\n|\r)$/," "),a=" ",c=yr(n),c.move(i.join(""))),i.push(c.move(t.handle(l,e,t,{...c.current(),before:a,after:u}))),a=i[i.length-1].slice(-1)}return r.pop(),i.join("")}function Lr(e,t,n,r){const o=_r(n),i=n.enter("emphasis"),s=yr(r);let a=s.move(o);return a+=s.move(jr(e,n,{before:a,after:o,...s.current()})),a+=s.move(o),i(),a}function Vr(e,t,n){return n.options.emphasis||"*"}Lr.peek=Vr;var Wr=n(62854),Hr=n(3004);function qr(e,t){let n=!1;return(0,Wr.Vn)(e,(e=>{if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,Hr.BK})),Boolean((!e.depth||e.depth<3)&&ke(e)&&(t.options.setext||n))}function Jr(e,t,n,r){const o=Math.max(Math.min(6,e.depth||1),1),i=yr(r);if(qr(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),s=jr(e,n,{...i.current(),before:"\n",after:"\n"});return r(),t(),s+"\n"+(1===o?"=":"-").repeat(s.length-(Math.max(s.lastIndexOf("\r"),s.lastIndexOf("\n"))+1))}const s="#".repeat(o),a=n.enter("headingAtx"),c=n.enter("phrasing");i.move(s+" ");let l=jr(e,n,{before:"# ",after:"\n",...i.current()});return/^[\t ]/.test(l)&&(l="&#x"+l.charCodeAt(0).toString(16).toUpperCase()+";"+l.slice(1)),l=l?s+" "+l:s,n.options.closeAtx&&(l+=" "+s),c(),a(),l}function Yr(e){return e.value||""}function Kr(){return"<"}function Ur(e,t,n,r){const o=$r(n),i='"'===o?"Quote":"Apostrophe",s=n.enter("image");let a=n.enter("label");const c=yr(r);let l=c.move("![");return l+=c.move(Dr(n,e.alt,{before:l,after:"]",...c.current()})),l+=c.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),l+=c.move("<"),l+=c.move(Dr(n,e.url,{before:l,after:">",...c.current()})),l+=c.move(">")):(a=n.enter("destinationRaw"),l+=c.move(Dr(n,e.url,{before:l,after:e.title?" ":")",...c.current()}))),a(),e.title&&(a=n.enter("title"+i),l+=c.move(" "+o),l+=c.move(Dr(n,e.title,{before:l,after:o,...c.current()})),l+=c.move(o),a()),l+=c.move(")"),s(),l}function Gr(){return"!"}function Zr(e,t,n,r){const o=e.referenceType,i=n.enter("imageReference");let s=n.enter("label");const a=yr(r);let c=a.move("![");const l=Dr(n,e.alt,{before:c,after:"]",...a.current()});c+=a.move(l+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const h=Dr(n,Pr(e),{before:c,after:"]",...a.current()});return s(),n.stack=u,i(),"full"!==o&&l&&l===h?"shortcut"===o?c=c.slice(0,-1):c+=a.move("]"):c+=a.move(h+"]"),c}function Qr(){return"!"}function Xr(e,t,n){let r=e.value||"",o="`",i=-1;while(new RegExp("(^|[^`])"+o+"([^`]|$)").test(r))o+="`";/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");while(++i<n.unsafe.length){const e=n.unsafe[i],t=Tr(e);let o;if(e.atBreak)while(o=t.exec(r)){let e=o.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(o.index+1)}}return o+r+o}function eo(){return"`"}function to(e,t){const n=ke(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function no(e,t,n,r){const o=$r(n),i='"'===o?"Quote":"Apostrophe",s=yr(r);let a,c;if(to(e,n)){const t=n.stack;n.stack=[],a=n.enter("autolink");let r=s.move("<");return r+=s.move(jr(e,n,{before:r,after:">",...s.current()})),r+=s.move(">"),a(),n.stack=t,r}a=n.enter("link"),c=n.enter("label");let l=s.move("[");return l+=s.move(jr(e,n,{before:l,after:"](",...s.current()})),l+=s.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),l+=s.move("<"),l+=s.move(Dr(n,e.url,{before:l,after:">",...s.current()})),l+=s.move(">")):(c=n.enter("destinationRaw"),l+=s.move(Dr(n,e.url,{before:l,after:e.title?" ":")",...s.current()}))),c(),e.title&&(c=n.enter("title"+i),l+=s.move(" "+o),l+=s.move(Dr(n,e.title,{before:l,after:o,...s.current()})),l+=s.move(o),c()),l+=s.move(")"),a(),l}function ro(e,t,n){return to(e,n)?"<":"["}function oo(e,t,n,r){const o=e.referenceType,i=n.enter("linkReference");let s=n.enter("label");const a=yr(r);let c=a.move("[");const l=jr(e,n,{before:c,after:"]",...a.current()});c+=a.move(l+"]["),s();const u=n.stack;n.stack=[],s=n.enter("reference");const h=Dr(n,Pr(e),{before:c,after:"]",...a.current()});return s(),n.stack=u,i(),"full"!==o&&l&&l===h?"shortcut"===o?c=c.slice(0,-1):c+=a.move("]"):c+=a.move(h+"]"),c}function io(){return"["}function so(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function ao(e){const t=so(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function co(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function lo(e){const t=co(e),n=e.options.bulletOrderedOther;if(!n)return"."===t?")":".";if("."!==n&&")"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrderedOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bulletOrdered` (`"+t+"`) and `bulletOrderedOther` (`"+n+"`) to be different");return n}function uo(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function ho(e,t,n,r){const o=n.enter("list"),i=n.bulletCurrent;let s=e.ordered?co(n):so(n);const a=e.ordered?lo(n):ao(n),c=n.bulletLastUsed;let l=!1;if(t&&(e.ordered?n.options.bulletOrderedOther:n.options.bulletOther)&&c&&s===c&&(l=!0),!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==s&&"-"!==s||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),uo(n)===s&&t){let t=-1;while(++t<e.children.length){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(s=a),n.bulletCurrent=s;const u=wr(e,n,r);return n.bulletLastUsed=s,n.bulletCurrent=i,o(),u}function po(e){const t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function fo(e,t,n,r){const o=po(n);let i=n.bulletCurrent||so(n);t&&"list"===t.type&&t.ordered&&(i=("number"===typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+i);let s=i.length+1;("tab"===o||"mixed"===o&&(t&&"list"===t.type&&t.spread||e.spread))&&(s=4*Math.ceil(s/4));const a=yr(r);a.move(i+" ".repeat(s-i.length)),a.shift(s);const c=n.enter("listItem"),l=kr(wr(e,n,a.current()),u);return c(),l;function u(e,t,n){return t?(n?"":" ".repeat(s))+e:(n?i:i+" ".repeat(s-i.length))+e}}function mo(e,t,n,r){const o=n.enter("paragraph"),i=n.enter("phrasing"),s=jr(e,n,r);return i(),o(),s}function vo(e,t,n,r){return wr(e,n,r)}function go(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}function yo(e,t,n,r){const o=go(n),i=n.enter("strong"),s=yr(r);let a=s.move(o+o);return a+=s.move(jr(e,n,{before:a,after:o,...s.current()})),a+=s.move(o+o),i(),a}function wo(e,t,n){return n.options.strong||"*"}function bo(e,t,n,r){return Dr(n,e.value,r)}function ko(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function xo(e,t,n){const r=(uo(n)+(n.options.ruleSpaces?" ":"")).repeat(ko(n));return n.options.ruleSpaces?r.slice(0,-1):r}Yr.peek=Kr,Ur.peek=Gr,Zr.peek=Qr,Xr.peek=eo,no.peek=ro,oo.peek=io,yo.peek=wo;const So={blockquote:xr,break:Or,code:zr,definition:Br,emphasis:Lr,hardBreak:Or,heading:Jr,html:Yr,image:Ur,imageReference:Zr,inlineCode:Xr,link:no,linkReference:oo,list:ho,listItem:fo,paragraph:mo,root:vo,strong:yo,text:bo,thematicBreak:xo},Co=[Mo];function Mo(e,t,n,r){if("code"===t.type&&Ar(t,r)&&("list"===e.type||e.type===t.type&&Ar(e,r)))return!1;if("list"===e.type&&e.type===t.type&&Boolean(e.ordered)===Boolean(t.ordered)&&!(e.ordered?r.options.bulletOrderedOther:r.options.bulletOther))return!1;if("spread"in n&&"boolean"===typeof n.spread){if("paragraph"===e.type&&(e.type===t.type||"definition"===t.type||"heading"===t.type&&qr(t,r)))return;return n.spread?1:0}}const Oo=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Eo=[{character:"\t",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"\t",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"\t",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:"\n",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Oo},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:"(?:[\r\n]|$)"},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Oo},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*"},{character:"*",inConstruct:"phrasing",notInConstruct:Oo},{atBreak:!0,character:"+"},{atBreak:!0,character:"-"},{atBreak:!0,before:"\\d+",character:".",after:"(?:[ \t\r\n]|$)"},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Oo},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Oo},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Oo},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Oo},{atBreak:!0,character:"~"}];function Ao(e,t={}){const n={enter:o,stack:[],unsafe:[],join:[],handlers:{},options:{},indexStack:[]};gr(n,{unsafe:Eo,join:Co,handlers:So}),gr(n,t),n.options.tightDefinitions&&gr(n,{join:[Do]}),n.handle=vr("type",{invalid:No,unknown:To,handlers:n.handlers});let r=n.handle(e,null,n,{before:"\n",after:"\n",now:{line:1,column:1},lineShift:0});return r&&10!==r.charCodeAt(r.length-1)&&13!==r.charCodeAt(r.length-1)&&(r+="\n"),r;function o(e){return n.stack.push(e),t;function t(){n.stack.pop()}}}function No(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function To(e){throw new Error("Cannot handle unknown node `"+e.type+"`")}function Do(e,t){if("definition"===e.type&&e.type===t.type)return 0}function Io(e){const t=t=>{const n=this.data("settings");return Ao(t,Object.assign({},n,e,{extensions:this.data("toMarkdownExtensions")||[]}))};Object.assign(this,{Compiler:t})}var Ro=Io;const zo=ce().use(dr).use(Ro).freeze();var Fo,Po,$o,Bo,_o,jo,Lo,Vo,Wo,Ho,qo,Jo,Yo=Object.defineProperty,Ko=Object.defineProperties,Uo=Object.getOwnPropertyDescriptors,Go=Object.getOwnPropertySymbols,Zo=Object.prototype.hasOwnProperty,Qo=Object.prototype.propertyIsEnumerable,Xo=(e,t,n)=>t in e?Yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ei=(e,t)=>{for(var n in t||(t={}))Zo.call(t,n)&&Xo(e,n,t[n]);if(Go)for(var n of Go(t))Qo.call(t,n)&&Xo(e,n,t[n]);return e},ti=(e,t)=>Ko(e,Uo(t)),ni=(e,t)=>{var n={};for(var r in e)Zo.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Go)for(var r of Go(e))t.indexOf(r)<0&&Qo.call(e,r)&&(n[r]=e[r]);return n},ri=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},oi=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ii=(e,t,n)=>(ri(e,t,"access private method"),n);const si=()=>{const e=e=>e.elements.length,t=t=>t.elements[e(t)-1],n=e=>n=>{var r;null==(r=t(e))||r.push(n)},r=e=>t=>{e.elements.push(t)},o=e=>{const t=e.elements.pop();if(!t)throw(0,c.qw)();return t};return{size:e,top:t,push:n,open:r,close:o}},ai=(e,t,...n)=>{e.content.push(t,...n)},ci=e=>e.content.pop(),li=(e,t,n)=>{const r={type:e,content:t,attrs:n,push:(...e)=>ai(r,...e),pop:()=>ci(r)};return r},{size:ui,push:hi,top:pi,open:fi,close:di}=si(),mi=e=>e.isText,vi=(e,t,n)=>{if(mi(t)&&mi(n)&&E.vc.sameSet(t.marks,n.marks))return e.text(t.text+n.text,t.marks)},gi=e=>(t,n)=>fi(e)(li(t,[],n)),yi=e=>(t,n,r)=>{const o=t.createAndFill(n,r,e.marks);if(!o)throw(0,c.Vh)(t,n,r);return hi(e)(o),o},wi=e=>()=>{e.marks=E.vc.none;const t=di(e);return yi(e)(t.type,t.attrs,t.content)},bi=e=>(t,n)=>{const r=t.create(n);e.marks=r.addToSet(e.marks)},ki=e=>t=>{e.marks=t.removeFromSet(e.marks)},xi=e=>t=>{const n=pi(e);if(!n)throw(0,c.qw)();const r=n.pop(),o=e.schema.text(t,e.marks);if(!r)return void n.push(o);const i=vi(e.schema,r,o);i?n.push(i):n.push(r,o)},Si=e=>()=>{let t=null;do{t=wi(e)()}while(ui(e));return t},Ci=e=>{const t={marks:[],elements:[],schema:e};return{build:Si(t),openMark:bi(t),closeMark:ki(t),addText:xi(t),openNode:gi(t),addNode:yi(t),closeNode:wi(t)}};class Mi{constructor(e,t,n){oi(this,Fo),oi(this,$o),this.stack=e,this.schema=t,this.specMap=n,this.run=(e,t)=>{const n=e.runSync(e.parse(t));return this.next(n),this},this.next=(e=[])=>([e].flat().forEach((e=>ii(this,$o,Bo).call(this,e))),this),this.toDoc=()=>this.stack.build(),this.injectRoot=(e,t,n)=>(this.stack.openNode(t,n),this.next(e.children),this),this.addText=(e="")=>(this.stack.addText(e),this),this.addNode=(...e)=>(this.stack.addNode(...e),this),this.openNode=(...e)=>(this.stack.openNode(...e),this),this.closeNode=(...e)=>(this.stack.closeNode(...e),this),this.openMark=(...e)=>(this.stack.openMark(...e),this),this.closeMark=(...e)=>(this.stack.closeMark(...e),this)}}Fo=new WeakSet,Po=function(e){const t=Object.values(this.specMap).find((t=>t.match(e)));if(!t)throw(0,c.y$)(e);return t},$o=new WeakSet,Bo=function(e){const{key:t,runner:n,is:r}=ii(this,Fo,Po).call(this,e),o=this.schema["node"===r?"nodes":"marks"][t];n(this,e,o)};const Oi=(e,t,n)=>r=>{const o=new Mi(Ci(e),e,t);return o.run(n,r),o.toDoc()},Ei=(e,t,...n)=>{e.children||(e.children=[]),e.children.push(t,...n)},Ai=e=>{var t;return null==(t=e.children)?void 0:t.pop()},Ni=(e,t,n,r={})=>{const o={type:e,children:t,props:r,value:n,push:(...e)=>Ei(o,...e),pop:()=>Ai(o)};return o},{size:Ti,push:Di,open:Ii,close:Ri}=si(),zi=e=>{const{children:t}=e;return t?(e.children=t.reduce(((e,t,n)=>{if(0===n)return[t];const r=e[e.length-1];if(r&&t["isMark"]&&t.type===r.type){const n=t,{children:o}=n,i=ni(n,["children"]),s=r,{children:a}=s,c=ni(s,["children"]);if(o&&a&&JSON.stringify(i)===JSON.stringify(c)){const t=ti(ei({},c),{children:[...a,...o]});return e.slice(0,-1).concat(zi(t))}}return e.concat(t)}),[]),e):e},Fi=e=>{const t=ti(ei({},e.props),{type:e.type});return e.children&&(t.children=e.children),e.value&&(t["value"]=e.value),t},Pi=e=>(t,n,r)=>Ii(e)(Ni(t,[],n,r)),$i=e=>(t,n,r,o)=>{const i=Ni(t,n,r,o),s=zi(Fi(i));return Di(e)(s),s},Bi=e=>()=>{const t=Ri(e);return $i(e)(t.type,t.children,t.value,t.props)},_i=e=>(t,n,r,o)=>{const i=t.isInSet(e.marks);i||(e.marks=t.addToSet(e.marks),Pi(e)(n,r,ti(ei({},o),{isMark:!0})))},ji=e=>t=>t.isInSet(e.marks)?(e.marks=t.type.removeFromSet(e.marks),Bi(e)()):null,Li=e=>()=>{let t=null;do{t=Bi(e)()}while(Ti(e));return t},Vi=()=>{const e={marks:[],elements:[]};return{build:Li(e),openMark:_i(e),closeMark:ji(e),openNode:Pi(e),addNode:$i(e),closeNode:Bi(e)}},Wi=e=>Object.prototype.hasOwnProperty.call(e,"size");class Hi{constructor(e,t,n){oi(this,_o),oi(this,Lo),oi(this,Wo),oi(this,qo),this.stack=e,this.schema=t,this.specMap=n,this.toString=e=>e.stringify(this.stack.build()),this.next=e=>Wi(e)?(e.forEach((e=>{ii(this,qo,Jo).call(this,e)})),this):(ii(this,qo,Jo).call(this,e),this),this.addNode=(...e)=>(this.stack.addNode(...e),this),this.openNode=(...e)=>(this.stack.openNode(...e),this),this.closeNode=(...e)=>(this.stack.closeNode(...e),this),this.withMark=(...e)=>(this.stack.openMark(...e),this)}run(e){return this.next(e),this}}_o=new WeakSet,jo=function(e){const t=Object.entries(this.specMap).map((([e,t])=>ei({key:e},t))).find((t=>t.match(e)));if(!t)throw(0,c.OO)(e.type);return t},Lo=new WeakSet,Vo=function(e){const{runner:t}=ii(this,_o,jo).call(this,e);t(this,e)},Wo=new WeakSet,Ho=function(e,t){const{runner:n}=ii(this,_o,jo).call(this,e);return n(this,e,t)},qo=new WeakSet,Jo=function(e){const{marks:t}=e,n=e=>{var t;return null!=(t=e.type.spec["priority"])?t:50},r=[...t].sort(((e,t)=>n(e)-n(t))),o=r.every((t=>!ii(this,Wo,Ho).call(this,t,e)));o&&ii(this,Lo,Vo).call(this,e),t.forEach((e=>this.stack.closeMark(e)))};const qi=(e,t,n)=>r=>{const o=new Hi(Vi(),e,t);return o.run(r),o.toString(n)};var Ji=n(28204),Yi=Object.defineProperty,Ki=Object.defineProperties,Ui=Object.getOwnPropertyDescriptors,Gi=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,Qi=Object.prototype.propertyIsEnumerable,Xi=(e,t,n)=>t in e?Yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,es=(e,t)=>{for(var n in t||(t={}))Zi.call(t,n)&&Xi(e,n,t[n]);if(Gi)for(var n of Gi(t))Qi.call(t,n)&&Xi(e,n,t[n]);return e},ts=(e,t)=>Ki(e,Ui(t));const ns={typography:"",code:""},rs={radius:"0",lineWidth:"1px"},os={scrollbar:()=>"",shadow:()=>"",border:()=>""},is={icon:e=>{const t=document.createElement("div");return t.className="milkdown-icon",t.textContent=e,t},label:e=>e},ss=e=>{if(e.startsWith("rgba"))return e.slice(5,-1).split(",").slice(0,-1).join(",");if(e.startsWith("rgb"))return e.slice(4,-1);const t=e=>{const t=/^([a-f\d])([a-f\d])([a-f\d])$/i,n=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,r=e=>parseInt(e,16),o=e.slice(1).replace(t,((e,t,n,r)=>t+t+n+n+r+r)),[i,s="0",a="0",c="0"]=o.match(n)||[];return i?[s,a,c].map(r):null},n=t(e);return n?n.join(", "):(console.warn(`Invalid hex: ${e}`),e)},as=(e={},t=(e=>`${e}`))=>Object.entries(e).map((([e,n])=>`--${e}: ${t(n)};`)).join("\n"),cs=(e={})=>as(e,ss);function ls(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24,t=1540483477*(65535&t)+(59797*(t>>>16)<<16),t^=t>>>24,n=1540483477*(65535&t)+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n^=255&e.charCodeAt(r),n=1540483477*(65535&n)+(59797*(n>>>16)<<16)}return n^=n>>>13,n=1540483477*(65535&n)+(59797*(n>>>16)<<16),((n^n>>>15)>>>0).toString(36)}var us={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function hs(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var ps=/[A-Z]|^ms/g,fs=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ds=function(e){return 45===e.charCodeAt(1)},ms=function(e){return null!=e&&"boolean"!==typeof e},vs=hs((function(e){return ds(e)?e:e.replace(ps,"-$&").toLowerCase()})),gs=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(fs,(function(e,t,n){return bs={name:t,styles:n,next:bs},t}))}return 1===us[e]||ds(e)||"number"!==typeof t||0===t?t:t+"px"};function ys(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return bs={name:n.name,styles:n.styles,next:bs},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)while(void 0!==r)bs={name:r.name,styles:r.styles,next:bs},r=r.next;var o=n.styles+";";return o}return ws(e,t,n);case"function":if(void 0!==e){var i=bs,s=n(e);return bs=i,ys(e,t,s)}break}if(null==t)return n;var a=t[n];return void 0!==a?a:n}function ws(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=ys(e,t,n[o])+";";else for(var i in n){var s=n[i];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=i+"{"+t[s]+"}":ms(s)&&(r+=vs(i)+":"+gs(i,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=ys(e,t,s);switch(i){case"animation":case"animationName":r+=vs(i)+":"+a+";";break;default:r+=i+"{"+a+"}"}}else for(var c=0;c<s.length;c++)ms(s[c])&&(r+=vs(i)+":"+gs(i,s[c])+";")}return r}var bs,ks=/label:\s*([^\s;\n{]+)\s*(;|$)/g,xs=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";bs=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,o+=ys(n,t,i)):o+=i[0];for(var s=1;s<e.length;s++)o+=ys(n,t,e[s]),r&&(o+=i[s]);ks.lastIndex=0;var a,c="";while(null!==(a=ks.exec(o)))c+="-"+a[1];var l=ls(o)+c;return{name:l,styles:o,next:bs}},Ss=!0;function Cs(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Ms=function(e,t,n){var r=e.key+"-"+t.name;if(!1!==n&&!1!==Ss||void 0!==e.registered[r]||(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}};function Os(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function Es(e,t,n){var r=[],o=Cs(e,r,n);return r.length<2?n:o+t(r)}var As=function(e){var t=(0,Ji.Z)(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=xs(n,t.registered,void 0);return Ms(t,o,!1),t.key+"-"+o.name},r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=xs(n,t.registered),i="animation-"+o.name;return Os(t,{name:o.name,styles:"@keyframes "+i+"{"+o.styles+"}"}),i},o=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=xs(n,t.registered);Os(t,o)},i=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return Es(t.registered,n,Ns(r))};return{css:n,cx:i,injectGlobal:o,keyframes:r,hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:Cs.bind(null,t.registered),merge:Es.bind(null,t.registered,n)}},Ns=function e(t){for(var n="",r=0;r<t.length;r++){var o=t[r];if(null!=o){var i=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))i=e(o);else for(var s in i="",o)o[s]&&s&&(i&&(i+=" "),i+=s);break;default:i=o}i&&(n&&(n+=" "),n+=i)}}return n};const Ts=e=>As(e),Ds=(e,t)=>{const{color:n={},font:r,size:o={}}=e,i=t.injectGlobal;i`
        :root {
            ${cs(n)};
            ${as(r,(e=>e.join(", ")))};
            ${as(o)};
        }
    `},Is=e=>{const{font:t,size:n={},mixin:r,slots:o,global:i}=e,s=(e,t=1)=>`rgba(var(--${e}), ${t})`,a=(e={})=>Object.fromEntries(Object.keys(e).map((e=>[e,`var(--${e})`]))),c={palette:s,size:es(es({},rs),a(n)),font:es(es({},ns),a(t))},l=es(es({},os),null==r?void 0:r(c)),u=ts(es({},c),{mixin:l}),h=es(es({},is),null==o?void 0:o(u)),p=ts(es({},u),{slots:h});return null==i||i(p),p};var Rs,zs,Fs,Ps,$s,Bs,_s,js=Object.defineProperty,Ls=Object.defineProperties,Vs=Object.getOwnPropertyDescriptors,Ws=Object.getOwnPropertySymbols,Hs=Object.prototype.hasOwnProperty,qs=Object.prototype.propertyIsEnumerable,Js=(e,t,n)=>t in e?js(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ys=(e,t)=>{for(var n in t||(t={}))Hs.call(t,n)&&Js(e,n,t[n]);if(Ws)for(var n of Ws(t))qs.call(t,n)&&Js(e,n,t[n]);return e},Ks=(e,t)=>Ls(e,Vs(t)),Us=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Gs=(e,t,n)=>(Us(e,t,"read from private field"),n?n.call(e):t.get(e)),Zs=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Qs=(e,t,n,r)=>(Us(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const Xs=M("ConfigReady"),ea=e=>t=>(t.record(Xs),async t=>{await e(t),t.done(Xs)}),ta=M("InitReady"),na=k([],"initTimer"),ra=k({},"editor"),oa=k([],"inputRules"),ia=k([],"prosePlugins"),sa=k([],"remarkPlugins"),aa=k([],"nodeView"),ca=k(zo(),"remark"),la=e=>t=>(t.inject(ra,e).inject(ia).inject(sa).inject(oa).inject(aa).inject(ca,zo()).inject(na,[Xs]).record(ta),async e=>{await e.waitTimers(na),e.done(ta)}),ua=M("schemaReady"),ha=k({},"schema"),pa=k([],"schemaTimer"),fa=k([],"nodes"),da=k([],"marks"),ma=e=>{var t;return Ks(Ys({},e),{parseDOM:null==(t=e.parseDOM)?void 0:t.map((t=>Ys({priority:e.priority},t)))})},va=e=>(e.inject(ha).inject(fa).inject(da).inject(pa,[ta]).record(ua),async e=>{await e.waitTimers(pa);const t=e.get(ca),n=e.get(sa),r=n.reduce(((e,t)=>e.use(t)),t);e.set(ca,r);const o=Object.fromEntries(e.get(fa).map((([e,t])=>[e,ma(t)]))),i=Object.fromEntries(e.get(da).map((([e,t])=>[e,ma(t)])));e.set(ha,new E.V_({nodes:o,marks:i})),e.done(ua)}),ga=k((()=>null),"parser"),ya=k([],"parserTimer"),wa=M("ParserReady"),ba=e=>(e.inject(ga).inject(ya,[ua]).record(wa),async e=>{await e.waitTimers(ya);const t=e.get(fa),n=e.get(da),r=e.get(ca),o=e.get(ha),i=[...t.map((([e,t])=>Ys({id:e},t))).map((e=>Ks(Ys({},e),{is:"node"}))),...n.map((([e,t])=>Ys({id:e},t))).map((e=>Ks(Ys({},e),{is:"mark"})))],s=Object.fromEntries(i.map((({id:e,parseMarkdown:t,is:n})=>[e,Ks(Ys({},t),{is:n,key:e})])));e.set(ga,Oi(o,s,r)),e.done(wa)}),ka=k((()=>""),"serializer"),xa=k([],"serializerTimer"),Sa=M("SerializerReady"),Ca=e=>(e.inject(ka).inject(xa,[ua]).record(Sa),async e=>{await e.waitTimers(xa);const t=e.get(fa),n=e.get(da),r=e.get(ca),o=e.get(ha),i=[...t,...n],s=Object.fromEntries(i.map((([e,t])=>[e,t.toMarkdown])));e.set(ka,qi(o,s,r)),e.done(Sa)}),Ma=k("","defaultValue"),Oa=k({},"editorState"),Ea=k({},"stateOptions"),Aa=k([],"editorStateTimer"),Na=M("EditorStateReady"),Ta=(e,t,n)=>{if("string"===typeof e)return t(e);if("html"===e.type)return E.aw.fromSchema(n).parse(e.dom);if("json"===e.type)return E.NB.fromJSON(n,e.value);throw(0,c.rf)(e)},Da=e=>(e.inject(Ma).inject(Oa).inject(Ea).inject(Aa,[wa,Sa,Ha]).record(Na),async e=>{await e.waitTimers(Aa);const t=e.get(ha),n=e.get(ga),r=e.get(oa),o=e.get(Ea),i=e.get(ia),s=e.get(Ma),a=Ta(s,n,t),c=A.yy.create(Ys({schema:t,doc:a,plugins:[...i,(0,O.NJr)({rules:r}),(0,N.h)(T.YR)]},o));e.set(Oa,c),e.done(Na)}),Ia=k({},"editorView"),Ra=k({},"editorViewOptions"),za=k(document.body,"root"),Fa=k([],"editorViewTimer"),Pa=M("EditorViewReady"),$a=e=>{const t=document.createElement("div");return t.className="milkdown",e.appendChild(t),t},Ba=e=>{e.classList.add("editor"),e.setAttribute("role","textbox")},_a=e=>(e.inject(za,document.body).inject(Ia).inject(Ra).inject(Fa,[Na]).record(Pa),async e=>{await e.waitTimers(Fa);const t=e.get(Oa),n=e.get(Ra),r=Object.fromEntries(e.get(aa)),o=e.get(za),i="string"===typeof o?document.querySelector(o):o,s=i?$a(i):void 0,a=new D.tk(s,Ys({state:t,nodeViews:r},n));Ba(a.dom),e.set(Ia,a),e.done(Pa)}),ja=(e,t)=>[e,t],La=k({},"commands"),Va=(e="cmdKey")=>k((()=>()=>!1),e),Wa=k([],"commandsTimer"),Ha=M("CommandsReady"),qa=e=>{const t=w(),n={create:(e,n)=>e(t.sliceMap,n),get:e=>t.getSlice(e).get(),getByName:e=>{const n=t.getSliceByName(e);return n?n.get():null},call:()=>{throw(0,c.gq)()},callByName:()=>{throw(0,c.gq)()}};return e.inject(La,n).inject(Wa,[ua]).record(Ha),async e=>{await e.waitTimers(Wa),e.done(Ha),await e.wait(Pa),e.update(La,(t=>Ks(Ys({},t),{call:(t,r)=>{const o=n.get(t),i=o(r),s=e.get(Ia);return i(s.state,s.dispatch,s)},callByName:(t,r)=>{const o=n.getByName(t);if(!o)return null;const i=o(r),s=e.get(Ia);return i(s.state,s.dispatch,s)}})))}},Ja=k({mixin:{},font:{},size:{},slots:{},palette:()=>""},"ThemeTool"),Ya=k({key:"milkdown"},"EmotionConfig"),Ka=k({},"Emotion"),Ua=new A.H$("MILKDOWN_THEME_RESET"),Ga=e=>t=>(t.inject(Ja).inject(Ya).inject(Ka),async t=>{await t.wait(Xs);const n=Ts(t.get(Ya)),r=e(n);Ds(r,n);const o=Is(r);t.set(Ka,n),t.set(Ja,o),await t.wait(ta),t.update(ia,(e=>e.concat(new A.Sy({key:Ua,view:()=>({destroy:()=>{n.flush()}})}))))}),Za=class{constructor(){Zs(this,Rs,void 0),Zs(this,zs,void 0),Zs(this,Fs,void 0),Zs(this,Ps,void 0),Zs(this,$s,void 0),Zs(this,Bs,void 0),Zs(this,_s,void 0),Qs(this,Rs,w()),Qs(this,zs,C()),Qs(this,Fs,new Set),Qs(this,Ps,[]),Qs(this,$s,new x(Gs(this,Rs),Gs(this,zs))),Qs(this,Bs,new S(Gs(this,Rs),Gs(this,zs))),Qs(this,_s,(()=>{const e=[va,ba,Ca,qa,Da,_a],t=ea((async e=>{await Promise.all(Gs(this,Ps).map((t=>t(e))))}));this.use(e.concat(la(this)).concat(t))})),this.use=e=>([e].flat().forEach((e=>{Gs(this,Fs).add(e(Gs(this,Bs)))})),this),this.config=e=>(Gs(this,Ps).push(e),this),this.create=async()=>(Gs(this,_s).call(this),await Promise.all([...Gs(this,Fs)].map((e=>e(Gs(this,$s))))),this),this.action=e=>e(Gs(this,$s))}static make(){return new Za}get ctx(){return Gs(this,$s)}};let Qa=Za;Rs=new WeakMap,zs=new WeakMap,Fs=new WeakMap,Ps=new WeakMap,$s=new WeakMap,Bs=new WeakMap,_s=new WeakMap},60082:function(e,t,n){"use strict";n.d(t,{gq:function(){return f},KE:function(){return s},Vh:function(){return l},S1:function(){return c},rf:function(){return i},y$:function(){return h},OO:function(){return p},qw:function(){return u},Wf:function(){return d},_O:function(){return a}});const r=(e,t)=>"function"===typeof t?"[Function]":t,o=e=>JSON.stringify(e,r),i=e=>new Error(`Doc type error, unsupported type: ${o(e)}`),s=e=>new Error(`Context "${e}" not found, do you forget to inject it?`),a=()=>new Error("Timer not found, do you forget to record it?"),c=()=>new Error("Should not call a context out of the plugin."),l=(...e)=>{const t=e.reduce(((e,t)=>{if(!t)return e;const n=e=>Array.isArray(e)?e.map((e=>n(e))).join(", "):e.toJSON?o(e.toJSON()):e.spec?o(e.spec):e.toString();return`${e}, ${n(t)}`}),"Create prosemirror node from remark failed in parser");return new Error(t)},u=()=>new Error("Stack over flow, cannot pop on an empty stack."),h=e=>new Error(`Cannot match target parser for node: ${o(e)}.`),p=e=>new Error(`Cannot match target serializer for node: ${o(e)}.`),f=()=>new Error("You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized"),d=()=>new Error("It seems that no theme found in editor, please make sure you have use theme in front of all plugins.\nIf you prefer to use an empty theme, you can use `themeFactory({})`.")},56206:function(e,t,n){"use strict";n.d(t,{m8:function(){return l}});var r=n(65252),o=n(36189),i=n(54751),s=n(28520);const a=(0,r.uW)("Undo"),c=(0,r.uW)("Redo"),l=(0,s.rx)((()=>({commands:()=>[(0,r.ml)(a,(()=>o.Yw)),(0,r.ml)(c,(()=>o.KX))],prosePlugins:()=>[(0,o.m8)(),(0,i.h)({"Mod-z":o.Yw,"Mod-y":o.KX,"Shift-Mod-z":o.KX})]})))()},83049:function(e,t,n){"use strict";n.d(t,{iO:function(){return _e}});var r=n(28520),o=n(65252),i=n(27649),s=n(42778),a=n(76922),c=n(40896),l=n(21081),u=n(74465),h=n(62854),p=n(3004),f=n(71216);function d(e){return e}const m=!0,v="skip",g=!1,y=function(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null);var o=(0,f.O)(t),i=r?-1:1;function s(e,a,c){var l,u="object"===typeof e&&null!==e?e:{};return"string"===typeof u.type&&(l="string"===typeof u.tagName?u.tagName:"string"===typeof u.name?u.name:void 0,Object.defineProperty(h,"name",{value:"node ("+d(u.type+(l?"<"+l+">":""))+")"})),h;function h(){var l,u,h,p=[];if((!t||o(e,a,c[c.length-1]||null))&&(p=w(n(e,c)),p[0]===g))return p;if(e.children&&p[0]!==v){u=(r?e.children.length:-1)+i,h=c.concat(e);while(u>-1&&u<e.children.length){if(l=s(e.children[u],u,h)(),l[0]===g)return l;u="number"===typeof l[1]?l[1]:u+i}}return p}}s(e,null,[])()};function w(e){return Array.isArray(e)?e:"number"===typeof e?[m,e]:[e]}const b=function(e,t,n,r){function o(e,t){var r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),y(e,t,o,r)},k={}.hasOwnProperty;function x(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return b(e,"definition",n),r;function n(e){const n=S(e.identifier);n&&!k.call(t,n)&&(t[n]=e)}function r(e){const n=S(e);return n&&k.call(t,n)?t[n]:null}}function S(e){return String(e||"").toUpperCase()}function C(){return e=>{const t=x(e);(0,h.Vn)(e,((e,n,r)=>{if("definition"===e.type&&null!==r&&"number"===typeof n)return r.children.splice(n,1),[p.AM,n];if("imageReference"===e.type||"linkReference"===e.type){const o=t(e.identifier);if(o&&null!==r&&"number"===typeof n){const t="imageReference"===e.type?{type:"image",url:o.url,title:o.title,alt:e.alt}:{type:"link",url:o.url,title:o.title,children:e.children};return r.children[n]=t,[p.AM,n]}}}))}}var M=Object.defineProperty,O=Object.defineProperties,E=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,D=(e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&D(e,n,t[n]);if(A)for(var n of A(t))T.call(t,n)&&D(e,n,t[n]);return e},R=(e,t)=>O(e,E(t));const z={HardBreak:"HardBreak",Blockquote:"Blockquote",BulletList:"BulletList",OrderedList:"OrderedList",CodeFence:"CodeFence",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",Text:"Text",CodeInline:"CodeInline",Em:"Em",Bold:"Bold",NextListItem:"NextListItem",SinkListItem:"SinkListItem",LiftListItem:"LiftListItem"},F="code_inline",P=(0,o.uW)("ToggleInlineCode"),$=(0,r.aU)((e=>{const t=e.getStyle((({palette:e,size:t,font:n},{css:r})=>r`
                background-color: ${e("neutral")};
                color: ${e("background")};
                border-radius: ${t.radius};
                font-weight: 500;
                font-family: ${n.code};
                padding: 0 0.2rem;
            `));return{id:F,schema:()=>({priority:100,code:!0,inclusive:!1,parseDOM:[{tag:"code"}],toDOM:n=>["code",{class:e.getClassName(n.attrs,"code-inline",t)}],parseMarkdown:{match:e=>"inlineCode"===e.type,runner:(e,t,n)=>{e.openMark(n),e.addText(t["value"]),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name===F,runner:(e,t,n)=>{e.withMark(t,"inlineCode",n.text||"")}}}),inputRules:e=>[(0,i.j4Q)(/(?:^|[^`])(`([^`]+)`)$/,e)],commands:e=>[(0,o.ml)(P,(()=>(0,s.w9)(e)))],shortcuts:{[z.CodeInline]:(0,r.ZA)(P,"Mod-e")}}})),B="em",_=(0,o.uW)("ToggleItalic"),j=(0,r.aU)((e=>({id:B,schema:()=>({parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>"italic"===e}],toDOM:t=>["em",{class:e.getClassName(t.attrs,B)}],parseMarkdown:{match:e=>"emphasis"===e.type,runner:(e,t,n)=>{e.openMark(n),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name===B,runner:(e,t)=>{e.withMark(t,"emphasis")}}}),inputRules:e=>[(0,i.j4Q)(/(?:^|[^_])(_([^_]+)_)$/,e),(0,i.j4Q)(/(?:^|[^*])(\*([^*]+)\*)$/,e)],commands:e=>[(0,o.ml)(_,(()=>(0,s.w9)(e)))],shortcuts:{[z.Em]:(0,r.ZA)(_,"Mod-i")}}))),L=(0,o.uW)("ToggleLink"),V=(0,o.uW)("ModifyLink"),W="link",H=(0,r.aU)((e=>{const t=e.getStyle(((e,{css:t})=>{const n=e.palette("line");return t`
            color: ${e.palette("secondary")};
            cursor: pointer;
            transition: all 0.4s ease-in-out;
            font-weight: 500;
            &:hover {
                background-color: ${n};
                box-shadow: 0 0.2rem ${n}, 0 -0.2rem ${n};
            }
        `}));return{id:W,schema:()=>({attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw new Error;return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:n=>["a",R(I({},n.attrs),{class:e.getClassName(n.attrs,W,t)})],parseMarkdown:{match:e=>"link"===e.type,runner:(e,t,n)=>{const r=t["url"],o=t["title"];e.openMark(n,{href:r,title:o}),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name===W,runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs["title"],url:t.attrs["href"]})}}}),commands:e=>[(0,o.ml)(L,((t="")=>(0,s.w9)(e,{href:t}))),(0,o.ml)(V,((t="")=>(n,r)=>{if(!r)return!1;const{marks:o}=n.schema;let i,s=-1;const{selection:c}=n;if(n.doc.nodesBetween(c.from,c.to,((e,t)=>{if(o.link.isInSet(e.marks))return i=e,s=t,!1})),!i)return!1;const l=i.marks.find((({type:t})=>t===e));if(!l)return!1;const u=s,h=s+i.nodeSize,{tr:p}=n,f=o.link.create(R(I({},l.attrs),{href:t}));return r(p.removeMark(u,h,l).addMark(u,h,f).setSelection(new a.Bs(p.selection.$anchor)).scrollIntoView()),!0}))],inputRules:(e,t)=>[new c.VK(/\[(?<text>.*?)]\((?<href>.*?)(?=\u201c|\))"?(?<title>[^"]+)?"?\)/,((n,r,i,s)=>{const[a,c="",l,u]=r,{tr:h}=n;if(a){const n=c||"link";h.replaceWith(i,s,t.get(o.le).text(n)).addMark(i,n.length+i,e.create({title:u,href:l}))}return h}))]}})),q="strong",J=(0,o.uW)("ToggleBold"),Y=(0,r.aU)((e=>{const t=e.getStyle(((e,{css:t})=>t`
                font-weight: 600;
            `));return{id:q,schema:()=>({parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-style",getAttrs:e=>"bold"===e}],toDOM:n=>["strong",{class:e.getClassName(n.attrs,q,t)}],parseMarkdown:{match:e=>"strong"===e.type,runner:(e,t,n)=>{e.openMark(n),e.next(t.children),e.closeMark(n)}},toMarkdown:{match:e=>e.type.name===q,runner:(e,t)=>{e.withMark(t,"strong")}}}),inputRules:e=>[(0,i.j4Q)(/(?:__)([^_]+)(?:__)$/,e),(0,i.j4Q)(/(?:\*\*)([^*]+)(?:\*\*)$/,e)],commands:e=>[(0,o.ml)(J,(()=>(0,s.w9)(e)))],shortcuts:{[z.Bold]:(0,r.ZA)(J,"Mod-b")}}})),K=[$(),j(),Y(),H()],U="blockquote",G=(0,o.uW)("WrapInBlockquote"),Z=(0,r.dS)((e=>{const t=e.getStyle(((e,{css:t})=>t`
                padding-left: 1.875rem;
                line-height: 1.75rem;
                border-left: 4px solid ${e.palette("primary")};
                * {
                    font-size: 1rem;
                    line-height: 1.5rem;
                }
            `));return{id:U,schema:()=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:n=>["blockquote",{class:e.getClassName(n.attrs,U,t)},0],parseMarkdown:{match:({type:e})=>e===U,runner:(e,t,n)=>{e.openNode(n).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name===U,runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}}}),inputRules:e=>[(0,c.S0)(/^\s*>\s$/,e)],commands:e=>[(0,o.ml)(G,(()=>(0,s.ym)(e)))],shortcuts:{[z.Blockquote]:(0,r.ZA)(G,"Mod-Shift-b")}}})),Q=(0,o.uW)("WrapInBulletList"),X=(0,r.dS)((e=>{const t="bullet_list";return{id:t,schema:()=>({content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:t=>["ul",{class:e.getClassName(t.attrs,"bullet-list")},0],parseMarkdown:{match:({type:e,ordered:t})=>"list"===e&&!t,runner:(e,t,n)=>{e.openNode(n).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name===t,runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1}).next(t.content).closeNode()}}}),inputRules:e=>[(0,c.S0)(/^\s*([-+*])\s$/,e)],commands:e=>[(0,o.ml)(Q,(()=>(0,s.ym)(e)))],shortcuts:{[z.BulletList]:(0,r.ZA)(Q,"Mod-Alt-8")}}})),ee=["","javascript","typescript","bash","sql","json","html","css","c","cpp","java","ruby","python","go","rust","markdown"],te=/^```(?<language>[a-z]*)?[\s\n]$/,ne=/^~~~(?<language>[a-z]*)?[\s\n]$/,re=(0,o.uW)("TurnIntoCodeFence"),oe="fence",ie=(0,r.dS)(((e,t)=>{const n=e.getStyle((({palette:e,mixin:t,size:n,font:r},{css:o})=>{const{shadow:i,scrollbar:s,border:a}=t,{lineWidth:c,radius:l}=n;return o`
            background-color: ${e("background")};
            color: ${e("neutral")};
            font-size: 0.85rem;
            padding: 1.2rem 0.4rem 1.4rem;
            border-radius: ${l};
            font-family: ${r.typography};

            * {
                margin: 0;
            }

            .code-fence_select-wrapper {
                position: relative;
            }

            .code-fence_value {
                width: 10.25rem;
                box-sizing: border-box;
                border-radius: ${n.radius};
                margin: 0 1.2rem 1.2rem;
                ${a()};
                ${i()};
                cursor: pointer;
                background-color: ${e("surface")};
                position: relative;
                display: flex;
                color: ${e("neutral",.87)};
                letter-spacing: 0.5px;
                height: 2.625rem;
                align-items: center;

                & > .icon {
                    width: 2.625rem;
                    height: 100%;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    color: ${e("solid",.87)};
                    border-left: ${c} solid ${e("line")};

                    text-align: center;
                    transition: all 0.2s ease-in-out;
                    &:hover {
                        background: ${e("background")};
                        color: ${e("primary")};
                    }
                }

                > span:first-child {
                    padding-left: 1rem;
                    flex: 1;
                    font-weight: 500;
                }
            }

            .code-fence_select-option {
                list-style: none;
                line-height: 2rem;
                padding-left: 1rem;
                cursor: pointer;
                :hover {
                    background: ${e("secondary",.12)};
                    color: ${e("primary")};
                }
            }

            .code-fence_select {
                &[data-fold='true'] {
                    display: none;
                }

                font-weight: 500;
                position: absolute;
                z-index: 1;
                top: 2.625rem;
                box-sizing: border-box;
                left: 1.2rem;
                padding: 0.5rem 0;
                max-height: 16.75rem;
                width: 10.25rem;
                ${a()};
                ${i()};
                background-color: ${e("surface")};
                border-top: none;
                overflow-y: auto;
                display: flex;
                flex-direction: column;

                ${s("y")}
            }

            code {
                line-height: 1.5;
                font-family: ${r.code};
            }

            pre {
                font-family: ${r.code};
                margin: 0 1.2rem !important;
                white-space: pre;
                overflow: auto;
                ${s("x")};
            }
        `}));return{id:oe,schema:()=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:""},fold:{default:!0}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw new Error("Parse DOM error.");return{language:e.dataset["language"]}}}],toDOM:t=>["pre",{"data-language":t.attrs["language"],class:e.getClassName(t.attrs,"code-fence",n)},["code",{spellCheck:"false"},0]],parseMarkdown:{match:({type:e})=>"code"===e,runner:(e,t,n)=>{const r=t["lang"],o=t["value"];e.openNode(n,{language:r}),o&&e.addText(o),e.closeNode()}},toMarkdown:{match:e=>e.type.name===oe,runner:(e,t)=>{var n;e.addNode("code",void 0,(null==(n=t.content.firstChild)?void 0:n.text)||"",{lang:t.attrs["language"]})}}}),inputRules:e=>[(0,c.zK)(te,e,(e=>{const[t,n]=e;if(t)return{language:n}})),(0,c.zK)(ne,e,(e=>{const[t,n]=e;if(t)return{language:n}}))],commands:e=>[(0,o.ml)(re,(()=>(0,s.uJ)(e)))],shortcuts:{[z.CodeFence]:(0,r.ZA)(re,"Mod-Alt-c")},view:r=>(i,s,a)=>{const c=document.createElement("div"),l=document.createElement("div"),u=document.createElement("ul"),h=document.createElement("pre"),p=document.createElement("code"),f=document.createElement("div");f.className="code-fence_value";const d=document.createElement("span");f.appendChild(d),s.editable&&f.appendChild(r.get(o.Qn).slots.icon("downArrow")),u.className="code-fence_select",u.addEventListener("mousedown",(e=>{if(e.preventDefault(),e.stopPropagation(),!s.editable)return;const t=e.target;if(!(t instanceof HTMLLIElement))return;const{tr:n}=s.state;s.dispatch(n.setNodeMarkup(a(),void 0,{fold:!0,language:t.dataset["value"]}))})),f.addEventListener("mousedown",(e=>{if(e.preventDefault(),e.stopPropagation(),!s.editable)return;const{tr:t}=s.state;s.dispatch(t.setNodeMarkup(a(),void 0,{fold:!1,language:c.dataset["language"]}))})),document.addEventListener("mousedown",(()=>{if(!s.editable||"true"===u.dataset["fold"])return;const{tr:e}=s.state;s.dispatch(e.setNodeMarkup(a(),void 0,{fold:!0,language:c.dataset["language"]}))})),((null==t?void 0:t.languageList)||ee).forEach((e=>{const t=document.createElement("li");t.className="code-fence_select-option",t.innerText=e||"--",u.appendChild(t),t.setAttribute("data-value",e)})),p.spellcheck=!1,l.className="code-fence_select-wrapper",l.contentEditable="false",l.append(f),l.append(u),h.append(p);const m=document.createElement("div");return p.append(m),m.style.whiteSpace="inherit",c.append(l,h),c.setAttribute("class",e.getClassName(i.attrs,"code-fence",n)),c.setAttribute("data-language",i.attrs["language"]),d.innerText=i.attrs["language"]||"--",u.setAttribute("data-fold",i.attrs["fold"]?"true":"false"),{dom:c,contentDOM:m,update:e=>{if(e.type.name!==oe)return!1;const t=e.attrs["language"];return c.dataset["language"]=t,d.innerText=t||"--",u.setAttribute("data-fold",e.attrs["fold"]?"true":"false"),!0}}}}})),se=(0,r.dS)((()=>({id:"doc",schema:()=>({content:"block+",parseMarkdown:{match:({type:e})=>"root"===e,runner:(e,t,n)=>{e.injectRoot(t,n)}},toMarkdown:{match:e=>"doc"===e.type.name,runner:(e,t)=>{e.openNode("root"),e.next(t.content)}}})}))),ae=(0,o.uW)("InsertHardbreak"),ce=(0,r.dS)((e=>({id:"hardbreak",schema:()=>({inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:t=>["br",{class:e.getClassName(t.attrs,"hardbreak")}],parseMarkdown:{match:({type:e})=>"break"===e,runner:(e,t,n)=>{e.addNode(n)}},toMarkdown:{match:e=>"hardbreak"===e.type.name,runner:e=>{e.addNode("break")}}}),commands:e=>[(0,o.ml)(ae,(()=>(t,n)=>(null==n||n(t.tr.setMeta("hardbreak",!0).replaceSelectionWith(e.create()).scrollIntoView()),!0)))],shortcuts:{[z.HardBreak]:(0,r.ZA)(ae,"Shift-Enter")},prosePlugins:e=>[new a.Sy({key:new a.H$("MILKDOWN_PLUGIN_HARDBREAK_MARKS"),appendTransaction:(t,n,r)=>{if(!t.length)return;const[o]=t;if(!o)return;const[i]=o.steps,s=o.getMeta("hardbreak");if(s){if(!(i instanceof l.Pu))return;const{from:t}=i;return r.tr.setNodeMarkup(t,e,void 0,[])}const a=i instanceof l.WJ;if(a){let t=r.tr;const{from:n,to:o}=i;return r.doc.nodesBetween(n,o,((n,r)=>{n.type===e&&(t=t.setNodeMarkup(r,e,void 0,[]))})),t}}})]}))),le=Array(6).fill(0).map(((e,t)=>t+1)),ue=(0,o.uW)("TurnIntoHeading"),he=new a.H$("MILKDOWN_PLUGIN_ID"),pe=(0,r.dS)((e=>{const t="heading",n=t=>e.getStyle(((e,{css:n})=>{const r={1:n`
                    font-size: 3rem;
                    line-height: 3.5rem;
                `,2:n`
                    font-size: 2.5rem;
                    line-height: 3rem;
                `,3:n`
                    font-size: 2.125rem;
                    line-height: 2.25rem;
                `,4:n`
                    font-size: 1.75rem;
                    line-height: 2rem;
                `,5:n`
                    font-size: 1.5rem;
                    line-height: 1.5rem;
                `,6:n`
                    font-size: 1.25rem;
                    line-height: 1.25rem;
                `};return n`
                ${r[t]||""}
                margin: 2.5rem 0 !important;
                font-weight: 400;
            `}));return{id:t,schema:()=>({content:"inline*",group:"block",defining:!0,attrs:{id:{default:""},level:{default:1}},parseDOM:le.map((e=>({tag:`h${e}`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw new Error;return{level:e,id:t.id}}}))),toDOM:t=>[`h${t.attrs["level"]}`,{id:t.attrs["id"]||t.textContent.split(" ").join("-").toLocaleLowerCase(),class:e.getClassName(t.attrs,`heading h${t.attrs["level"]}`,n(t.attrs["level"]))},0],parseMarkdown:{match:({type:e})=>e===t,runner:(e,t,n)=>{const r=t["depth"];e.openNode(n,{level:r}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name===t,runner:(e,t)=>{e.openNode("heading",void 0,{depth:t.attrs["level"]}),e.next(t.content),e.closeNode()}}}),inputRules:e=>le.map((t=>(0,c.zK)(new RegExp(`^(#{1,${t}})\\s$`),e,(()=>({level:t}))))),commands:e=>[(0,o.ml)(ue,((t=1)=>(0,s.uJ)(e,{level:t})))],shortcuts:{[z.H1]:(0,r.ZA)(ue,"Mod-Alt-1",1),[z.H2]:(0,r.ZA)(ue,"Mod-Alt-2",2),[z.H3]:(0,r.ZA)(ue,"Mod-Alt-3",3),[z.H4]:(0,r.ZA)(ue,"Mod-Alt-4",4),[z.H5]:(0,r.ZA)(ue,"Mod-Alt-5",5),[z.H6]:(0,r.ZA)(ue,"Mod-Alt-6",6)},prosePlugins:(e,t)=>{let n=!1;const r=e=>e.textContent.replace(/[\p{P}\p{S}]/gu,"").replace(/\s/g,"").trim(),i=(t,o)=>{const i=t.tr;t.doc.descendants(((t,o)=>{if(t.type===e&&!n){if(0===t.textContent.trim().length)return;const e=t.attrs,n=r(t);e["id"]!==n&&i.setMeta(he,!0).setNodeMarkup(o,void 0,R(I({},e),{id:n}))}})),o(i)};return[new a.Sy({key:he,props:{handleDOMEvents:{compositionstart:()=>(n=!0,!1),compositionend:()=>{n=!1;const e=t.get(o.U7);return setTimeout((()=>{i(e.state,(t=>e.dispatch(t)))}),0),!1}}},appendTransaction:(e,t,n)=>{let r=null;return e.every((e=>!e.getMeta(he)))&&e.some((e=>e.docChanged))&&i(n,(e=>{r=e})),r}})]}}})),fe="hr",de=(0,o.uW)("InsertHr"),me=(0,r.dS)((e=>{const t=e.getStyle(((e,{css:t})=>t`
            height: ${e.size.lineWidth};
            background-color: ${e.palette("line")};
            border-width: 0;
        `));return{id:fe,schema:()=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:n=>["hr",{class:e.getClassName(n.attrs,fe,t)}],parseMarkdown:{match:({type:e})=>"thematicBreak"===e,runner:(e,t,n)=>{e.addNode(n)}},toMarkdown:{match:e=>e.type.name===fe,runner:e=>{e.addNode("thematicBreak")}}}),inputRules:e=>[new c.VK(/^(?:---|___\s|\*\*\*\s)$/,((t,n,r,o)=>{const{tr:i}=t;return n[0]&&i.replaceWith(r-1,o,e.create()),i}))],commands:(e,t)=>[(0,o.ml)(de,(()=>(n,r)=>{if(!r)return!0;const{tr:i,selection:s}=n,c=s.from,l=e.create();if(!l)return!0;const u=i.replaceSelectionWith(l).insert(c,t.get(o.le).node("paragraph")),h=a.Y1.findFrom(u.doc.resolve(c),1,!0);return!h||(r(u.setSelection(h).scrollIntoView()),!0)}))]}})),ve=(0,o.uW)("ModifyImage"),ge=(0,o.uW)("InsertImage"),ye="image",we=(0,r.dS)(((e,t)=>{var n,r;const s=I({loading:"Loading...",empty:"Add an Image",failed:"Image loads failed"},null!=(n=null==t?void 0:t.placeholder)?n:{}),a=null!=(r=null==t?void 0:t.isBlock)&&r,l=e.getStyle(((e,{css:t})=>t`
                display: inline-block;
                position: relative;
                text-align: center;
                font-size: 0;
                vertical-align: text-bottom;
                line-height: 1;

                ${a?"\n                width: 100%;\n                margin: 0 auto;\n                ":""}

                &.ProseMirror-selectednode::after {
                    content: '';
                    background: ${e.palette("secondary",.38)};
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                }

                img {
                    max-width: 100%;
                    height: auto;
                    object-fit: contain;
                    margin: 0 2px;
                }
                .icon,
                .placeholder {
                    display: none;
                }

                &.system {
                    width: 100%;
                    padding: 0 2rem;

                    img {
                        width: 0;
                        height: 0;
                        display: none;
                    }

                    .icon,
                    .placeholder {
                        display: inline;
                    }

                    box-sizing: border-box;
                    height: 3rem;
                    background-color: ${e.palette("background")};
                    border-radius: ${e.size.radius};
                    display: inline-flex;
                    gap: 2rem;
                    justify-content: flex-start;
                    align-items: center;
                    .placeholder {
                        margin: 0;
                        line-height: 1;
                        &::before {
                            content: '';
                            font-size: 0.875rem;
                            color: ${e.palette("neutral",.6)};
                        }
                    }
                }

                &.loading {
                    .placeholder {
                        &::before {
                            content: '${s.loading}';
                        }
                    }
                }

                &.empty {
                    .placeholder {
                        &::before {
                            content: '${s.empty}';
                        }
                    }
                }

                &.failed {
                    .placeholder {
                        &::before {
                            content: '${s.failed}';
                        }
                    }
                }
            `)),u=e.getStyle(((e,{css:t})=>t`
                display: inline-block;
                margin: 0 auto;
                object-fit: contain;
                width: 100%;
                position: relative;
                height: auto;
                text-align: center;
            `));return{id:"image",schema:()=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:""},alt:{default:null},title:{default:null},failed:{default:!1},loading:{default:!0},width:{default:null}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw new Error;return{failed:e.classList.contains("failed"),loading:e.classList.contains("loading"),src:e.getAttribute("src")||"",alt:e.getAttribute("alt"),title:e.getAttribute("title")||e.getAttribute("alt"),width:e.getAttribute("width")}}}],toDOM:t=>["img",R(I({},t.attrs),{class:e.getClassName(t.attrs,ye,t.attrs["failed"]?"failed":"",t.attrs["loading"]?"loading":"",u)})],parseMarkdown:{match:({type:e})=>e===ye,runner:(e,t,n)=>{const r=t["url"],o=t["alt"],i=t["title"];e.addNode(n,{src:r,alt:o,title:i})}},toMarkdown:{match:e=>e.type.name===ye,runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs["title"],url:t.attrs["src"],alt:t.attrs["alt"]})}}}),commands:e=>[(0,o.ml)(ge,((t="")=>(n,r)=>{if(!r)return!0;const{tr:o}=n,i=e.create({src:t});if(!i)return!0;const s=o.replaceSelectionWith(i);return r(s.scrollIntoView()),!0})),(0,o.ml)(ve,((t="")=>(n,r)=>{const o=(0,i.a1s)(n.selection,e);if(!o)return!1;const{tr:s}=n;return null==r||r(s.setNodeMarkup(o.pos,void 0,R(I({},o.node.attrs),{loading:!0,src:t})).scrollIntoView()),!0}))],inputRules:e=>[new c.VK(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,((t,n,r,o)=>{const[i,s,a="",c]=n,{tr:l}=t;return i&&l.replaceWith(r,o,e.create({src:a,alt:s,title:c})),l}))],view:t=>(n,r,i)=>{const s=n.type,a=t.get(o.Qn).slots.icon,c=document.createElement("span");c.className=e.getClassName(n.attrs,ye,l);const u=document.createElement("img");c.append(u);let h=a("image");const p=document.createElement("span");p.classList.add("placeholder"),c.append(h,p);const f=e=>{const t=a(e);c.replaceChild(t,h),h=t},d=e=>{c.classList.add("system","loading"),f("loading");const t=document.createElement("img");t.src=e,t.onerror=()=>{const t=i();if(!t)return;const{tr:o}=r.state,a=o.setNodeMarkup(t,s,R(I({},n.attrs),{src:e,loading:!1,failed:!0}));r.dispatch(a)},t.onload=()=>{const{tr:o}=r.state,a=i();if(!a)return;const c=o.setNodeMarkup(a,s,R(I({},n.attrs),{width:t.width,src:e,loading:!1,failed:!1}));r.dispatch(c)}},{src:m,loading:v,title:g,alt:y,width:w}=n.attrs;return u.src=m,u.title=g||y,u.alt=y,w&&(u.width=w),0===m.length?(c.classList.add("system","empty"),f("image")):v&&d(m),{dom:c,update:e=>{if(e.type.name!==ye)return!1;const{src:t,alt:n,title:r,loading:o,failed:i,width:s}=e.attrs;return u.src=t,u.alt=n,u.title=r||n,s&&(u.width=s),o?(d(t),!0):i?(c.classList.remove("loading","empty"),c.classList.add("system","failed"),f("brokenImage"),!0):t.length>0?(c.classList.remove("system","empty","loading"),!0):(c.classList.add("system","empty"),f("image"),!0)},selectNode:()=>{c.classList.add("ProseMirror-selectednode")},deselectNode:()=>{c.classList.remove("ProseMirror-selectednode")}}}}})),be="list_item",ke=(0,o.uW)("SplitListItem"),xe=(0,o.uW)("SinkListItem"),Se=(0,o.uW)("LiftListItem"),Ce=(0,r.dS)((e=>{const t=e.getStyle(((e,{css:t})=>t`
                &,
                & > * {
                    margin: 0.5rem 0;
                }

                &,
                li {
                    &::marker {
                        color: ${e.palette("primary")};
                    }
                }
            `));return{id:be,schema:()=>({group:"listItem",content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:n=>["li",{class:e.getClassName(n.attrs,"list-item",t)},0],parseMarkdown:{match:({type:e,checked:t})=>"listItem"===e&&null===t,runner:(e,t,n)=>{e.openNode(n),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name===be,runner:(e,t)=>{e.openNode("listItem"),e.next(t.content),e.closeNode()}}}),inputRules:e=>[(0,c.S0)(/^\s*([-+*])\s$/,e)],commands:e=>[(0,o.ml)(ke,(()=>(0,u.s6)(e))),(0,o.ml)(xe,(()=>(0,u.bw)(e))),(0,o.ml)(Se,(()=>(0,u.IB)(e)))],shortcuts:{[z.NextListItem]:(0,r.ZA)(ke,"Enter"),[z.SinkListItem]:(0,r.ZA)(xe,"Mod-]"),[z.LiftListItem]:(0,r.ZA)(Se,"Mod-[")}}})),Me=(0,o.uW)("WrapInOrderedList"),Oe="ordered_list",Ee=(0,r.dS)((e=>({id:Oe,schema:()=>({content:"listItem+",group:"block",attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw new Error;return{order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:t=>["ol",R(I({},1===t.attrs["order"]?{}:t.attrs["order"]),{class:e.getClassName(t.attrs,"ordered-list")}),0],parseMarkdown:{match:({type:e,ordered:t})=>"list"===e&&!!t,runner:(e,t,n)=>{e.openNode(n).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name===Oe,runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1}),e.next(t.content),e.closeNode()}}}),inputRules:e=>[(0,c.S0)(/^(\d+)\.\s$/,e,(e=>({order:Number(e[1])})),((e,t)=>t.childCount+t.attrs["order"]===Number(e[1])))],commands:e=>[(0,o.ml)(Me,(()=>(0,s.ym)(e)))],shortcuts:{[z.OrderedList]:(0,r.ZA)(Me,"Mod-Alt-7")}}))),Ae=(0,o.uW)("TurnIntoText"),Ne="paragraph",Te=(0,r.dS)((e=>{const t=e.getStyle(((e,{css:t})=>t`
            font-size: 1rem;
            line-height: 1.5;
            letter-spacing: 0.5px;
        `));return{id:Ne,schema:()=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:n=>["p",{class:e.getClassName(n.attrs,Ne,t)},0],parseMarkdown:{match:e=>"paragraph"===e.type,runner:(e,t,n)=>{e.openNode(n),t.children?e.next(t.children):e.addText(t["value"]),e.closeNode()}},toMarkdown:{match:e=>"paragraph"===e.type.name,runner:(e,t)=>{e.openNode("paragraph"),e.next(t.content),e.closeNode()}}}),commands:e=>[(0,o.ml)(Ae,(()=>(0,s.uJ)(e)))],shortcuts:{[z.Text]:(0,r.ZA)(Ae,"Mod-Alt-0")}}})),De=(0,r.dS)((()=>({id:"text",schema:()=>({group:"inline",parseMarkdown:{match:({type:e})=>"text"===e,runner:(e,t)=>{e.addText(t["value"])}},toMarkdown:{match:e=>"text"===e.type.name,runner:(e,t)=>{e.addNode("text",void 0,t.text)}}})}))),Ie=[se(),Te(),ce(),Z(),ie(),X(),Ee(),Ce(),pe(),me(),we(),De()],Re=e=>!!e.children,ze=e=>"html"===e.type;function Fe(e,t){return n(e,0,null)[0];function n(e,r,o){if(Re(e)){const t=[];for(let r=0,o=e.children.length;r<o;r++){const o=e.children[r];if(o){const i=n(o,r,e);if(i)for(let e=0,n=i.length;e<n;e++){const n=i[e];n&&t.push(n)}}}e.children=t}return t(e,r,o)}}const Pe=()=>{function e(e){Fe(e,(e=>ze(e)?[]:[e]))}return e},$e=[(0,r.rx)((()=>({remarkPlugins:()=>[C,Pe]})))()],Be=r.Il.create([...Ie,...K]),_e=r.Il.create([...$e,...Be])},27649:function(e,t,n){"use strict";n.d(t,{NJr:function(){return X},a1s:function(){return re},j4Q:function(){return ee}});n(42778);var r=n(76922),o=n(21081);var i=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var r=function(e){return n[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}}))};i.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))},i.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())},i.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},i.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!e){var s=this.editorView.coordsAtPos(this.cursorPos);e={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a,c,l=this.editorView.dom.offsetParent;if(this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!l||l==document.body&&"static"==getComputedStyle(l).position)a=-pageXOffset,c=-pageYOffset;else{var u=l.getBoundingClientRect();a=u.left-l.scrollLeft,c=u.top-l.scrollTop}this.element.style.left=e.left-a+"px",this.element.style.top=e.top-c+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},i.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},i.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,t):r;if(t&&!i){var s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(s=(0,o.nj)(this.editorView.state.doc,s,this.editorView.dragging.slice),null==s))return this.setCursor(null);this.setCursor(s),this.scheduleRemoval(5e3)}}},i.prototype.dragend=function(){this.scheduleRemoval(20)},i.prototype.drop=function(){this.scheduleRemoval(20)},i.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};var s=n(54751),a=n(38638),c=(n(98780),function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return a.p2.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new l(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!u(e)||!h(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock},t.findFrom=function(e,n,o){e:for(;;){if(!o&&t.valid(e))return e;for(var i=e.pos,s=null,a=e.depth;;a--){var c=e.node(a);if(n>0?e.indexAfter(a)<c.childCount:e.index(a)>0){s=c.child(n>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;i+=n;var l=e.doc.resolve(i);if(t.valid(l))return l}for(;;){var u=n>0?s.firstChild:s.lastChild;if(!u){if(s.isAtom&&!s.isText&&!r.qv.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),o=!1;continue e}break}s=u,i+=n;var h=e.doc.resolve(i);if(t.valid(h))return h}return null}},t}(r.Y1));c.prototype.visible=!1,r.Y1.jsonID("gapcursor",c);var l=function(e){this.pos=e};function u(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var o=r.child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function h(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}l.prototype.map=function(e){return new l(e.map(this.pos))},l.prototype.resolve=function(e){var t=e.resolve(this.pos);return c.valid(t)?new c(t):r.Y1.near(t)};(0,s.$)({ArrowLeft:p("horiz",-1),ArrowRight:p("horiz",1),ArrowUp:p("vert",-1),ArrowDown:p("vert",1)});function p(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,o,i){var s=e.selection,a=t>0?s.$to:s.$from,l=s.empty;if(s instanceof r.Bs){if(!i.endOfTextblock(n)||0==a.depth)return!1;l=!1,a=e.doc.resolve(t>0?a.after():a.before())}var u=c.findFrom(a,t,l);return!!u&&(o&&o(e.tr.setSelection(new c(u))),!0)}}n(36189);var f,d,m=n(40896);n(74465);if("undefined"!=typeof WeakMap){var v=new WeakMap;f=function(e){return v.get(e)},d=function(e,t){return v.set(e,t),t}}else{var g=[],y=10,w=0;f=function(e){for(var t=0;t<g.length;t+=2)if(g[t]==e)return g[t+1]},d=function(e,t){return w==y&&(w=0),g[w++]=e,g[w++]=t}}var b=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},k=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function x(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=S(e),n=e.childCount,r=[],o=0,i=null,s=[],a=0,c=t*n;a<c;a++)r[a]=0;for(var l=0,u=0;l<n;l++){var h=e.child(l);u++;for(var p=0;;p++){while(o<r.length&&0!=r[o])o++;if(p==h.childCount)break;for(var f=h.child(p),d=f.attrs,m=d.colspan,v=d.rowspan,g=d.colwidth,y=0;y<v;y++){if(y+l>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:v-y});break}for(var w=o+y*t,b=0;b<m;b++){0==r[w+b]?r[w+b]=u:(i||(i=[])).push({type:"collision",row:l,pos:u,n:m-b});var x=g&&g[b];if(x){var M=(w+b)%t*2,O=s[M];null==O||O!=x&&1==s[M+1]?(s[M]=x,s[M+1]=1):O==x&&s[M+1]++}}}o+=m,u+=f.nodeSize}var E=(l+1)*t,A=0;while(o<E)0==r[o++]&&A++;A&&(i||(i=[])).push({type:"missing",row:l,n:A}),u++}for(var N=new k(t,n,r,i),T=!1,D=0;!T&&D<s.length;D+=2)null!=s[D]&&s[D+1]<n&&(T=!0);return T&&C(N,s,e),N}function S(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=e.child(s),c=0;c<a.childCount;c++){var l=a.child(c);s+l.attrs.rowspan>r&&(i+=l.attrs.colspan)}for(var u=0;u<o.childCount;u++){var h=o.child(u);i+=h.attrs.colspan,h.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}function C(e,t,n){e.problems||(e.problems=[]);for(var r=0,o={};r<e.map.length;r++){var i=e.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),a=null,c=0;c<s.attrs.colspan;c++){var l=(r+c)%e.width,u=t[2*l];null==u||s.attrs.colwidth&&s.attrs.colwidth[c]==u||((a||(a=M(s.attrs)))[c]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}function M(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function O(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}k.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,s=o+1,a=1;i<this.width&&this.map[t+a]==n;a++)i++;for(var c=1;s<this.height&&this.map[t+this.width*c]==n;c++)s++;return new b(r,o,i,s)}}throw new RangeError("No cell with offset "+e+" found")},k.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},k.prototype.nextCell=function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,s=r.top,a=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:a==this.height)?null:this.map[o+this.width*(n<0?s-1:a)]},k.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,s=n.bottom,a=this.findCell(t),c=a.left,l=a.right,u=a.top,h=a.bottom;return new b(Math.min(r,c),Math.min(i,u),Math.max(o,l),Math.max(s,h))},k.prototype.cellsInRect=function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s||t.push(s))}return t},k.prototype.positionAt=function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){var s=t+e*this.width,a=(e+1)*this.width;while(s<a&&this.map[s]<o)s++;return s==a?i-1:this.map[s]}o=i}},k.get=function(e){return f(e)||d(e,x(e))};new r.H$("selectingCells");function E(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function A(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function N(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:E(t.$head)||T(t.$head)}function T(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return e.doc.resolve(i-o.nodeSize)}}function D(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function I(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function R(e,t,n){var r=e.start(-1),o=k.get(e.node(-1)),i=o.nextCell(e.pos-r,t,n);return null==i?null:e.node(0).resolve(r+i)}function z(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function F(e,t,n){void 0===n&&(n=1);var r=z(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}var P=function(e){function t(t,n){void 0===n&&(n=t);var o=t.node(-1),i=k.get(o),s=t.start(-1),a=i.rectBetween(t.pos-s,n.pos-s),c=t.node(0),l=i.cellsInRect(a).filter((function(e){return e!=n.pos-s}));l.unshift(n.pos-s);var u=l.map((function(e){var t=o.nodeAt(e),n=e+s+1;return new r.xm(c.resolve(n),c.resolve(n+t.content.size))}));e.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var o=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(D(o)&&D(i)&&I(o,i)){var s=this.$anchorCell.node(-1)!=o.node(-1);return s&&this.isRowSelection()?t.rowSelection(o,i):s&&this.isColSelection()?t.colSelection(o,i):new t(o,i)}return r.Bs.between(o,i)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=k.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],s=r.top;s<r.bottom;s++){for(var c=[],l=s*t.width+r.left,u=r.left;u<r.right;u++,l++){var h=t.map[l];if(!o[h]){o[h]=!0;var p=t.findCell(h),f=e.nodeAt(h),d=r.left-p.left,m=p.right-r.right;if(d>0||m>0){var v=f.attrs;d>0&&(v=F(v,0,d)),m>0&&(v=F(v,v.colspan-m,m)),f=p.left<r.left?f.type.createAndFill(v):f.type.create(v,f.content)}if(p.top<r.top||p.bottom>r.bottom){var g=z(f.attrs,"rowspan",Math.min(p.bottom,r.bottom)-Math.max(p.top,r.top));f=p.top<r.top?f.type.createAndFill(g):f.type.create(g,f.content)}c.push(f)}}i.push(e.child(s).copy(a.HY.from(c)))}var y=this.isColSelection()&&this.isRowSelection()?e:i;return new a.p2(a.HY.from(y),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=a.p2.empty);for(var r=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],c=s.$from,l=s.$to,u=t.mapping.slice(r);t.replace(u.map(c.pos),u.map(l.pos),i?a.p2.empty:n)}var h=e.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);h&&t.setSelection(h)},t.prototype.replaceWith=function(e,t){this.replace(e,new a.p2(a.HY.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=k.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var r=k.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(n.pos-o),a=e.node(0);return i.top<=s.top?(i.top>0&&(e=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=k.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var r=k.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(n.pos-o),a=e.node(0);return i.left<=s.left?(i.left>0&&(e=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,r){return void 0===r&&(r=n),new t(e.resolve(n),e.resolve(r))},t.prototype.getBookmark=function(){return new $(this.$anchorCell.pos,this.$headCell.pos)},t}(r.Y1);P.prototype.visible=!1,r.Y1.jsonID("cell",P);var $=function(e,t){this.anchor=e,this.head=t};$.prototype.map=function(e){return new $(e.map(this.anchor),e.map(this.head))},$.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&I(t,n)?new P(t,n):r.Y1.near(n,1)};(0,s.$)({ArrowLeft:_("horiz",-1),ArrowRight:_("horiz",1),ArrowUp:_("vert",-1),ArrowDown:_("vert",1),"Shift-ArrowLeft":j("horiz",-1),"Shift-ArrowRight":j("horiz",1),"Shift-ArrowUp":j("vert",-1),"Shift-ArrowDown":j("vert",1),Backspace:L,"Mod-Backspace":L,Delete:L,"Mod-Delete":L});function B(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function _(e,t){return function(n,o,i){var s=n.selection;if(s instanceof P)return B(n,o,r.Y1.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var a=V(i,e,t);if(null==a)return!1;if("horiz"==e)return B(n,o,r.Y1.near(n.doc.resolve(s.head+t),t));var c,l=n.doc.resolve(a),u=R(l,e,t);return c=u?r.Y1.near(u,1):t<0?r.Y1.near(n.doc.resolve(l.before(-1)),-1):r.Y1.near(n.doc.resolve(l.after(-1)),1),B(n,o,c)}}function j(e,t){return function(n,r,o){var i=n.selection;if(!(i instanceof P)){var s=V(o,e,t);if(null==s)return!1;i=new P(n.doc.resolve(s))}var a=R(i.$headCell,e,t);return!!a&&B(n,r,new P(i.$anchorCell,a))}}function L(e,t){var n=e.selection;if(!(n instanceof P))return!1;if(t){var r=e.tr,o=O(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new a.p2(o,0,0))})),r.docChanged&&t(r)}return!0}function V(e,t,n){if(!(e.state.selection instanceof r.Bs))return null;for(var o=e.state.selection,i=o.$head,s=i.depth-1;s>=0;s--){var a=i.node(s),c=n<0?i.index(s):i.indexAfter(s);if(c!=(n<0?0:a.childCount))return null;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){var l=i.before(s),u="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(u)?l:null}}return null}new r.H$("fix-tables");function W(e){var t,n=e.selection,r=N(e),o=r.node(-1),i=r.start(-1),s=k.get(o);return t=n instanceof P?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i),t.tableStart=i,t.map=s,t.table=o,t}function H(e){return function(t,n){if(!A(t))return!1;if(n){for(var r=O(t.schema),o=W(t),i=t.tr,s=o.map.cellsInRect("column"==e?new b(o.left,0,o.right,o.map.height):"row"==e?new b(0,o.top,o.map.width,o.bottom):o),a=s.map((function(e){return o.table.nodeAt(e)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[c],r.cell,a[c].attrs);if(0==i.steps.length)for(var l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function q(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function J(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?H(e):function(t,n){if(!A(t))return!1;if(n){var r=O(t.schema),o=W(t),i=t.tr,s=q("row",o,r),a=q("column",o,r),c="column"===e?s:"row"===e&&a,l=c?1:0,u="column"==e?new b(0,l,1,o.map.height):"row"==e?new b(l,0,o.map.width,1):o,h="column"==e?a?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(u).forEach((function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,h,n.attrs)})),n(i)}return!0}}J("row",{useDeprecatedLogic:!0}),J("column",{useDeprecatedLogic:!0}),J("cell",{useDeprecatedLogic:!0});var Y=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),K(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function K(e,t,n,r,o,i){for(var s=0,a=!0,c=t.firstChild,l=e.firstChild,u=0,h=0;u<l.childCount;u++)for(var p=l.child(u).attrs,f=p.colspan,d=p.colwidth,m=0;m<f;m++,h++){var v=o==h?i:d&&d[m],g=v?v+"px":"";s+=v||r,v||(a=!1),c?(c.style.width!=g&&(c.style.width=g),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=g}while(c){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Y.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,K(e,this.colgroup,this.table,this.cellMinWidth),!0)},Y.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var U=new r.H$("tableColumnResizing");var G=function(e,t){this.activeHandle=e,this.dragging=t};function Z(e,t,n,r,o,i){if(e.composing)return!1;const s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;const c=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"\ufffc")+r;for(let l=0;l<o.length;l++){const a=o[l].match.exec(c),u=a&&a[0]&&o[l].handler(s,a,t-(a[0].length-r.length),n);if(u)return e.dispatch(u.setMeta(i,{transform:u,from:t,to:n,text:r})),!0}return!1}G.prototype.apply=function(e){var t=this,n=e.getMeta(U);if(n&&null!=n.setHandle)return new G(n.setHandle,null);if(n&&void 0!==n.setDragging)return new G(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);D(e.doc.resolve(r))||(r=null),t=new G(r,t.dragging)}return t};const Q=new r.H$("MILKDOWN_PLUGIN_CUSTOM_INPUTRULES"),X=({rules:e})=>{const t=new r.Sy({key:Q,isInputRules:!0,state:{init(){return null},apply(e,t){const n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput(n,r,o,i){return Z(n,r,o,i,e,t)},handleDOMEvents:{compositionend:n=>(setTimeout((()=>{const{$cursor:r}=n.state.selection;r&&Z(n,r.pos,r.pos,"",e,t)})),!1)},handleKeyDown(n,r){if("Enter"!==r.key)return!1;const{$cursor:o}=n.state.selection;return!!o&&Z(n,o.pos,o.pos,"\n",e,t)}}});return t};function ee(e,t){return new m.VK(e,((e,n,r,o)=>{const{tr:i}=e,s=n.length;let a=r,c=o;if(n[s-1]){const l=n[0],u=n[s-1],h=n[s-2],p=r+l.indexOf(h),f=p+h.length-1,d=p+h.lastIndexOf(u),m=d+u.length,v=te(r,o,e).filter((e=>e.mark.type.excludes(t))).filter((e=>e.end>p));if(v.length)return null;m<f&&i.delete(m,f),d>p&&i.delete(p,d),a=p,c=a+u.length}return i.addMark(a,c,t.create()),i.removeStoredMark(t),i}))}function te(e,t,n){let r=[];return n.doc.nodesBetween(e,t,((e,t)=>{r=[...r,...e.marks.map((n=>({start:t,end:t+e.nodeSize,mark:n})))]})),r}const ne=(e,t)=>Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e,re=(e,t)=>{if(!(e instanceof r.qv))return;const{node:n,$from:o}=e;return ne(t,n)?{node:n,pos:o.pos,start:o.start(o.depth),depth:o.depth}:void 0}},20149:function(e,t,n){"use strict";n.d(t,{F3:function(){return k},jE:function(){return x}});var r=n(65252),o=n(67294),i=n(38638),s=function(e){return crypto.getRandomValues(new Uint8Array(e))},a=function(e,t,n){var r=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*r*t/e.length);return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,s="";while(1){var a=n(o),c=o;while(c--)if(s+=e[a[c]&r]||"",s.length===i)return s}}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return a(e,t,s)},l=n(73935);const u=o.createContext((()=>()=>{throw new Error})),h=e=>e.map((e=>e.key)).join(","),p=o.memo((({portals:e})=>o.createElement(o.Fragment,null,e)),((e,t)=>h(e.portals)===h(t.portals))),f=o.createContext({ctx:void 0,node:void 0,view:void 0,getPos:void 0,decorations:void 0}),d=({ctx:e,node:t,view:n,getPos:r,decorations:i,children:s})=>o.createElement(f.Provider,{value:{ctx:e,node:t,view:n,getPos:r,decorations:i}},s),m=({dom:e,isInline:t})=>{const n=o.useRef(null);return o.useEffect((()=>{const{current:t}=n;t&&e&&t.appendChild(e)}),[e]),t?o.createElement("span",{className:"content-dom-wrapper",ref:n}):o.createElement("div",{className:"content-dom-wrapper",ref:n})},v=c("abcedfghicklmn",10),g=(e,t)=>n=>r=>(o,i,s,a)=>new y(r,n,e,t,o,i,s,a);class y{constructor(e,t,n,r,o,s,a,c){this.ctx=e,this.component=t,this.addPortal=n,this.removePortalByKey=r,this.node=o,this.view=s,this.getPos=a,this.decorations=c;const l=document.createElement(this.isInlineOrMark?"span":"div");l.classList.add("dom-wrapper");const u=o instanceof i.NB&&o.isLeaf?void 0:document.createElement(this.isInlineOrMark?"span":"div");u&&(u.classList.add("content-dom"),l.appendChild(u)),this.dom=l,this.contentDOM=u,this.key=v(),this.renderPortal()}get isInlineOrMark(){return this.node instanceof i.vc||this.node.isInline}renderPortal(){if(!this.dom)return;const e=this.component,t=(0,l.createPortal)(o.createElement(d,{ctx:this.ctx,node:this.node,view:this.view,getPos:this.getPos,decorations:this.decorations},o.createElement(e,null,o.createElement(m,{isInline:this.isInlineOrMark,dom:this.contentDOM}))),this.dom,this.key);this.addPortal(t)}destroy(){this.dom=void 0,this.contentDOM=void 0,this.removePortalByKey(this.key)}ignoreMutation(e){return!this.contentDOM||!this.contentDOM.contains(e.target)}}const w=e=>{const t=o.useContext(u),n=o.useRef(null),i=o.useRef();return o.useEffect((()=>{const o=n.current;if(!o)return;const s=e(o,t);return s?(s.create().then((e=>{i.current=e})).catch(console.error),()=>{var e,t,n;const o=null==(e=i.current)?void 0:e.action((e=>e.get(r.U7))),s=null==(t=i.current)?void 0:t.action((e=>e.get(r.KP)));null==(n=null==s?void 0:s.firstChild)||n.remove(),null==o||o.destroy()}):void 0}),[e,t]),{divRef:n,editorRef:i}},b=(0,o.forwardRef)((({editor:e},t)=>{const n=w(e);return(0,o.useImperativeHandle)(t,(()=>({get:()=>n.editorRef.current,dom:()=>n.divRef.current}))),o.createElement("div",{ref:n.divRef})})),k=(0,o.forwardRef)((({editor:e},t)=>{const[n,r]=o.useState([]),i=o.useCallback((e=>{r((t=>[...t,e]))}),[]),s=o.useCallback((e=>{r((t=>{const n=t.findIndex((t=>t.key===e));return[...t.slice(0,n),...t.slice(n+1)]}))}),[]),a=o.useCallback((e=>g(i,s)(e)),[i,s]);return o.createElement(u.Provider,{value:a},o.createElement(p,{portals:n}),o.createElement(b,{ref:t,editor:e}))})),x=(e,t=[])=>o.useCallback(((...t)=>e(...t)),t)},77218:function(e,t,n){"use strict";n.d(t,{Qn:function(){return b}});var r,o=n(65252);const i=["Roboto","HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue","Helvetica","Arial","Lucida Grande","sans-serif"],s=["Consolas","Monaco","Andale Mono","Ubuntu Mono","monospace"],a=({css:e})=>({palette:t,size:n})=>({scrollbar:(n="y")=>e`
            scrollbar-width: thin;
            scrollbar-color: ${t("secondary",.38)} ${t("secondary",.12)};
            -webkit-overflow-scrolling: touch;

            &::-webkit-scrollbar {
                ${"y"===n?"width":"height"}: 12px;
                background-color: transparent;
            }

            &::-webkit-scrollbar-track {
                border-radius: 999px;
                background: transparent;
                border: 4px solid transparent;
            }

            &::-webkit-scrollbar-thumb {
                border-radius: 999px;
                background-color: ${t("secondary",.38)};
                border: 4px solid transparent;
                background-clip: content-box;
            }

            &::-webkit-scrollbar-thumb:hover {
                background-color: ${t("secondary")};
            }
        `,shadow:()=>{const{lineWidth:r}=n;return e`
                box-shadow: 0px ${r} ${r} ${t("shadow",.14)},
                    0px 2px ${r} ${t("shadow",.12)}, 0px ${r} 3px ${t("shadow",.2)};
            `},border:r=>r?e`
                ${`border-${r}`}: ${n.lineWidth} solid ${t("line")};
            `:e`
                    border: ${n.lineWidth} solid ${t("line")};
                `}),c={nord0:"#2e3440",nord1:"#3b4252",nord2:"#434c5e",nord3:"#4c566a",nord4:"#d8dee9",nord5:"#e5e9f0",nord6:"#eceff4",nord7:"#8fbcbb",nord8:"#88c0d0",nord9:"#81a1c1",nord10:"#5e81ac",nord11:"#bf616a",nord12:"#d08770",nord13:"#ebcb8b",nord14:"#a3be8c",nord15:"#b48ead"},l={shadow:c.nord1,primary:c.nord10,secondary:c.nord9,neutral:c.nord0,solid:c.nord3,line:c.nord4,background:c.nord6,surface:"#fff"},u={shadow:c.nord1,primary:c.nord10,secondary:c.nord9,neutral:c.nord6,solid:c.nord4,line:c.nord2,background:"#252932",surface:c.nord0},h=({css:e})=>({palette:t,mixin:n,size:r,font:o})=>{var i,s,a;return e`
            .milkdown {
                color: ${t("neutral",.87)};
                background: ${t("surface")};

                position: relative;
                font-family: ${o.typography};
                margin-left: auto;
                margin-right: auto;
                ${null==(i=n.shadow)?void 0:i.call(n)};
                box-sizing: border-box;
                ${null==(s=n.scrollbar)?void 0:s.call(n)};

                .editor {
                    padding: 3.125rem 1.25rem;
                    outline: none;
                    & > * {
                        margin: 1.875rem 0;
                    }

                    @media only screen and (min-width: 72rem) {
                        max-width: 57.375rem;
                        padding: 3.125rem 7.25rem;
                    }
                }

                .ProseMirror-selectednode {
                    outline: ${r.lineWidth} solid ${t("line")};
                }

                li.ProseMirror-selectednode {
                    outline: none;
                }

                li.ProseMirror-selectednode::after {
                    ${null==(a=n.border)?void 0:a.call(n)};
                }

                & ::selection {
                    background: ${t("secondary",.38)};
                }
            }
        `},p={h1:{label:"h1",icon:"looks_one"},h2:{label:"h2",icon:"looks_two"},h3:{label:"h3",icon:"looks_3"},loading:{label:"loading",icon:"hourglass_empty"},quote:{label:"quote",icon:"format_quote"},code:{label:"code",icon:"code"},table:{label:"table",icon:"table_chart"},divider:{label:"divider",icon:"horizontal_rule"},image:{label:"image",icon:"image"},brokenImage:{label:"broken image",icon:"broken_image"},bulletList:{label:"bullet list",icon:"format_list_bulleted"},orderedList:{label:"ordered list",icon:"format_list_numbered"},taskList:{label:"task list",icon:"checklist"},bold:{label:"bold",icon:"format_bold"},italic:{label:"italic",icon:"format_italic"},inlineCode:{label:"inline code",icon:"code"},strikeThrough:{label:"strike through",icon:"strikethrough_s"},link:{label:"link",icon:"link"},leftArrow:{label:"left arrow",icon:"chevron_left"},rightArrow:{label:"right arrow",icon:"chevron_right"},upArrow:{label:"up arrow",icon:"expand_less"},downArrow:{label:"down arrow",icon:"expand_more"},alignLeft:{label:"align left",icon:"format_align_left"},alignRight:{label:"align right",icon:"format_align_right"},alignCenter:{label:"align center",icon:"format_align_center"},delete:{label:"delete",icon:"delete"},select:{label:"select",icon:"select_all"},unchecked:{label:"unchecked",icon:"check_box_outline_blank"},checked:{label:"checked",icon:"check_box"},undo:{label:"undo",icon:"turn_left"},redo:{label:"redo",icon:"turn_right"},liftList:{label:"lift list",icon:"format_indent_decrease"},sinkList:{label:"sink list",icon:"format_indent_increase"}},f=()=>({icon:e=>{const t=document.createElement("span");return t.className="icon material-icons material-icons-outlined",t.textContent=p[e].icon,t},label:e=>p[e].label}),d=({css:e})=>e`
    /* copy from https://github.com/ProseMirror/@milkdown/prose/blob/master/style/prosemirror.css */
    .ProseMirror {
        position: relative;
    }

    .ProseMirror {
        word-wrap: break-word;
        white-space: pre-wrap;
        white-space: break-spaces;
        -webkit-font-variant-ligatures: none;
        font-variant-ligatures: none;
        font-feature-settings: 'liga' 0; /* the above doesn't seem to work in Edge */
    }

    .ProseMirror pre {
        white-space: pre-wrap;
    }

    .ProseMirror li {
        position: relative;
    }

    .ProseMirror-hideselection *::selection {
        background: transparent;
    }
    .ProseMirror-hideselection *::-moz-selection {
        background: transparent;
    }
    .ProseMirror-hideselection {
        caret-color: transparent;
    }

    .ProseMirror-selectednode {
        outline: 2px solid #8cf;
    }

    /* Make sure li selections wrap around markers */

    li.ProseMirror-selectednode {
        outline: none;
    }

    li.ProseMirror-selectednode:after {
        content: '';
        position: absolute;
        left: -32px;
        right: -2px;
        top: -2px;
        bottom: -2px;
        border: 2px solid #8cf;
        pointer-events: none;
    }
`,m={typography:i,code:s},v={radius:"4px",lineWidth:"1px"},g=(0,o.LS)((e=>({font:m,size:v,slots:f,color:l,mixin:a(e),global:t=>{const n=e.injectGlobal;n`
            ${d(e)};
            ${h(e)(t)}
        `}}))),y=(0,o.LS)((e=>({font:m,size:v,slots:f,color:u,mixin:a(e),global:t=>{const n=e.injectGlobal;n`
            ${d(e)};
            ${h(e)(t)}
        `}}))),w=Boolean(null==(r=window.matchMedia)?void 0:r.call(window,"(prefers-color-scheme: dark)").matches),b=w?y:g},28520:function(e,t,n){"use strict";n.d(t,{Il:function(){return a},aU:function(){return d},dS:function(){return m},rx:function(){return v},ZA:function(){return l}});var r=n(65252),o=n(54751),i=n(60082);const s=e=>Object.prototype.hasOwnProperty.call(e,"origin");class a extends Array{findThenRun(e,t){const n=this.findIndex((t=>s(t)&&t.origin===e));return n<0||t(n),this}configure(e,t){return this.findThenRun(e,(n=>{this.splice(n,1,e(t))}))}replace(e,t){return this.findThenRun(e,(e=>{this.splice(e,1,t)}))}remove(e){return this.findThenRun(e,(e=>{this.splice(e,1)}))}headless(){return this.filter(s).forEach((e=>{this.configure(e.origin,{headless:!0})})),this}static create(e){return new a(...e)}}const c=e=>(t,...n)=>{var r;const o=null!=(r=null==e?void 0:e(t))?r:n;return Array.isArray(o)?o.filter((e=>e)).join(" "):o},l=(e,t,n)=>[e,t,n],u=(e,t)=>{try{const n=e.get(r.Qn),o=e.get(r.ev);if(!o.css)throw(0,i.Wf)();return{getClassName:c(null==t?void 0:t["className"]),getStyle:e=>(null==t?void 0:t["headless"])?"":e(n,o),themeTool:n}}catch{throw(0,i.Wf)()}},h=async(e,t,n,i)=>{if(await e.wait(r.Iq),t.remarkPlugins){const n=t.remarkPlugins(e);e.update(r.CG,(e=>[...e,...n]))}const s=await n();if(t.commands){const n=t.commands(s,e);n.forEach((([t,n])=>{e.get(r.Xo).create(t,n)}))}if(t.inputRules){const n=t.inputRules(s,e);e.update(r.tQ,(e=>[...e,...n]))}if(t.shortcuts){const n=(e,t)=>{var n,r;return null!=(r=null==(n=null==i?void 0:i.keymap)?void 0:n[e])?r:t},s=Object.entries(t.shortcuts).flatMap((([t,[o,i,s]])=>{const a=()=>e.get(r.Xo).call(o,s),c=n(t,i);return Array.isArray(c)?c.map((e=>({key:e,runner:a}))):{key:c,runner:a}})).map((e=>[e.key,e.runner]));e.update(r.ZV,(e=>e.concat((0,o.h)(Object.fromEntries(s)))))}if(t.prosePlugins){const n=t.prosePlugins(s,e);e.update(r.ZV,(e=>[...e,...n]))}},p=e=>{const t=n=>{const r=e(n);return r.origin=t,r};return t},f=(e,t,n)=>{const r=t,o=t=>n(((...n)=>t(e(...n),...n)));return r.extend=o,r},d=e=>f(e,p((t=>()=>async n=>{var o;await n.wait(r.ip);const i=u(n,t),s=e(i,t);if(s.view=null!=(o=null==t?void 0:t.view)?o:s.view,await h(n,s,(async()=>{const e=s.schema(n);n.update(r.ZP,(t=>[...t,[s.id,e]])),await n.wait(r.R3);const t=n.get(r.le),o=t.marks[s.id];if(!o)throw new Error;return o}),t),s.view){const e=s.view(n);n.update(r.z6,(t=>[...t,[s.id,e]]))}})),d),m=e=>f(e,p((t=>()=>async n=>{var o;await n.wait(r.ip);const i=u(n,t),s=e(i,t);if(s.view=null!=(o=null==t?void 0:t.view)?o:s.view,await h(n,s,(async()=>{const e=s.schema(n);n.update(r.pB,(t=>[...t,[s.id,e]])),await n.wait(r.R3);const t=n.get(r.le),o=t.nodes[s.id];if(!o)throw new Error;return o}),t),s.view){const e=s.view(n);n.update(r.z6,(t=>[...t,[s.id,e]]))}})),m),v=e=>f(e,p((t=>()=>async n=>{await n.wait(r.ip);const o=u(n,t),i=e(o,t);if(await h(n,i,(async()=>{let e={},t={};if(i.schema){const o=i.schema(n);if(o.node){e=o.node;const t=Object.entries(o.node);n.update(r.pB,(e=>[...e,...t]))}if(o.mark){t=o.mark;const e=Object.entries(o.mark);n.update(r.ZP,(t=>[...t,...e]))}}await n.wait(r.R3);const o=n.get(r.le),s=Object.keys(e).map((e=>[e,o.nodes[e]])),a=Object.keys(t).map((e=>[e,o.marks[e]])),c=Object.fromEntries([...s,...a]);return c}),t),i.view){const e=i.view(n);n.update(r.z6,(t=>[...t,...Object.entries(e)]))}})),v)},54065:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(19756),o=n(22122),i=n(67294),s=n(86010),a=n(27192),c=n(16122),l=n(90948),u=n(28979),h=n(76087);function p(e){return(0,u.Z)("MuiContainer",e)}(0,h.Z)("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]);var f=n(98216),d=n(85893);const m=["className","component","disableGutters","fixed","maxWidth"],v=e=>{const{classes:t,fixed:n,disableGutters:r,maxWidth:o}=e,i={root:["root",o&&`maxWidth${(0,f.Z)(String(o))}`,n&&"fixed",r&&"disableGutters"]};return(0,a.Z)(i,p,t)},g=(0,l.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,f.Z)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}})((({theme:e,ownerState:t})=>(0,o.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,n)=>{const r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:`${r}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>(0,o.Z)({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}))),y=i.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiContainer"}),{className:i,component:a="div",disableGutters:l=!1,fixed:u=!1,maxWidth:h="lg"}=n,p=(0,r.Z)(n,m),f=(0,o.Z)({},n,{component:a,disableGutters:l,fixed:u,maxWidth:h}),y=v(f);return(0,d.jsx)(g,(0,o.Z)({as:a,ownerState:f,className:(0,s.Z)(y.root,i),ref:t},p))}));var w=y},94470:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,o=t.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!i)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},a=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(o)return o(e,n).value}return e[n]};e.exports=function e(){var t,n,r,o,l,u,h=arguments[0],p=1,f=arguments.length,d=!1;for("boolean"===typeof h&&(d=h,h=arguments[1]||{},p=2),(null==h||"object"!==typeof h&&"function"!==typeof h)&&(h={});p<f;++p)if(t=arguments[p],null!=t)for(n in t)r=c(h,n),o=c(t,n),h!==o&&(d&&o&&(s(o)||(l=i(o)))?(l?(l=!1,u=r&&i(r)?r:[]):u=r&&s(r)?r:{},a(h,{name:n,newValue:e(d,u,o)})):"undefined"!==typeof o&&a(h,{name:n,newValue:o}));return h}},48738:function(e){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},42778:function(e,t,n){"use strict";n.d(t,{YR:function(){return $},uJ:function(){return E},w9:function(){return N},ym:function(){return O}});var r=n(21081),o=n(38638),i=n(76922);function s(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function a(e,t,n){var s=e.selection,a=s.$cursor;if(!a||(n?!n.endOfTextblock("backward",e):a.parentOffset>0))return!1;var l=u(a);if(!l){var h=a.blockRange(),p=h&&(0,r.k9)(h);return null!=p&&(t&&t(e.tr.lift(h,p).scrollIntoView()),!0)}var f=l.nodeBefore;if(!f.type.spec.isolating&&x(e,l,t))return!0;if(0==a.parent.content.size&&(c(f,"end")||i.qv.isSelectable(f))){var d=(0,r.dR)(e.doc,a.before(),a.after(),o.p2.empty);if(d.slice.size<d.to-d.from){if(t){var m=e.tr.step(d);m.setSelection(c(f,"end")?i.Y1.findFrom(m.doc.resolve(m.mapping.map(l.pos,-1)),-1):i.qv.create(m.doc,l.pos-f.nodeSize)),t(m.scrollIntoView())}return!0}}return!(!f.isAtom||l.depth!=a.depth-1)&&(t&&t(e.tr.delete(l.pos-f.nodeSize,l.pos).scrollIntoView()),!0)}function c(e,t,n){for(;e;e="start"==t?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&1!=e.childCount)return!1}return!1}function l(e,t,n){var r=e.selection,o=r.$head,s=r.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;a=u(o)}var c=a&&a.nodeBefore;return!(!c||!i.qv.isSelectable(c))&&(t&&t(e.tr.setSelection(i.qv.create(e.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)}function u(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function h(e,t,n){var s=e.selection,a=s.$cursor;if(!a||(n?!n.endOfTextblock("forward",e):a.parentOffset<a.parent.content.size))return!1;var l=f(a);if(!l)return!1;var u=l.nodeAfter;if(x(e,l,t))return!0;if(0==a.parent.content.size&&(c(u,"start")||i.qv.isSelectable(u))){var h=(0,r.dR)(e.doc,a.before(),a.after(),o.p2.empty);if(h.slice.size<h.to-h.from){if(t){var p=e.tr.step(h);p.setSelection(c(u,"start")?i.Y1.findFrom(p.doc.resolve(p.mapping.map(l.pos)),1):i.qv.create(p.doc,p.mapping.map(l.pos))),t(p.scrollIntoView())}return!0}}return!(!u.isAtom||l.depth!=a.depth-1)&&(t&&t(e.tr.delete(l.pos,l.pos+u.nodeSize).scrollIntoView()),!0)}function p(e,t,n){var r=e.selection,o=r.$head,s=r.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;a=f(o)}var c=a&&a.nodeAfter;return!(!c||!i.qv.isSelectable(c))&&(t&&t(e.tr.setSelection(i.qv.create(e.doc,a.pos)).scrollIntoView()),!0)}function f(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function d(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function m(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function v(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=m(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(t){var l=r.after(),u=e.tr.replaceWith(l,l,c.createAndFill());u.setSelection(i.Y1.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0}function g(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof i.C1||r.parent.inlineContent||o.parent.inlineContent)return!1;var s=m(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=e.tr.insert(a,s.createAndFill());c.setSelection(i.Bs.create(c.doc,a+1)),t(c.scrollIntoView())}return!0}function y(e,t){var n=e.selection,o=n.$cursor;if(!o||o.parent.content.size)return!1;if(o.depth>1&&o.after()!=o.end(-1)){var i=o.before();if((0,r.Ax)(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var s=o.blockRange(),a=s&&(0,r.k9)(s);return null!=a&&(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}function w(e,t){var n=e.selection,o=n.$from,s=n.$to;if(e.selection instanceof i.qv&&e.selection.node.isBlock)return!(!o.parentOffset||!(0,r.Ax)(e.doc,o.pos))&&(t&&t(e.tr.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;if(t){var a=s.parentOffset==s.parent.content.size,c=e.tr;(e.selection instanceof i.Bs||e.selection instanceof i.C1)&&c.deleteSelection();var l=0==o.depth?null:m(o.node(-1).contentMatchAt(o.indexAfter(-1))),u=a&&l?[{type:l}]:null,h=(0,r.Ax)(c.doc,c.mapping.map(o.pos),1,u);if(u||h||!(0,r.Ax)(c.doc,c.mapping.map(o.pos),1,l&&[{type:l}])||(u=[{type:l}],h=!0),h&&(c.split(c.mapping.map(o.pos),1,u),!a&&!o.parentOffset&&o.parent.type!=l)){var p=c.mapping.map(o.before()),f=c.doc.resolve(p);o.node(-1).canReplaceWith(f.index(),f.index()+1,l)&&c.setNodeMarkup(c.mapping.map(o.before()),l)}t(c.scrollIntoView())}return!0}function b(e,t){return t&&t(e.tr.setSelection(new i.C1(e.doc))),!0}function k(e,t,n){var o=t.nodeBefore,i=t.nodeAfter,s=t.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(s,s+1)||!i.isTextblock&&!(0,r.Mn)(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,o.type,o.contentMatchAt(o.childCount)).join(t.pos).scrollIntoView()),!0))}function x(e,t,n){var s,a,l=t.nodeBefore,u=t.nodeAfter;if(l.type.spec.isolating||u.type.spec.isolating)return!1;if(k(e,t,n))return!0;var h=t.parent.canReplace(t.index(),t.index()+1);if(h&&(s=(a=l.contentMatchAt(l.childCount)).findWrapping(u.type))&&a.matchType(s[0]||u.type).validEnd){if(n){for(var p=t.pos+u.nodeSize,f=o.HY.empty,d=s.length-1;d>=0;d--)f=o.HY.from(s[d].create(null,f));f=o.HY.from(l.copy(f));var m=e.tr.step(new r.FC(t.pos-1,p,t.pos,p,new o.p2(f,1,0),s.length,!0)),v=p+2*s.length;(0,r.Mn)(m.doc,v)&&m.join(v),n(m.scrollIntoView())}return!0}var g=i.Y1.findFrom(t,1),y=g&&g.$from.blockRange(g.$to),w=y&&(0,r.k9)(y);if(null!=w&&w>=t.depth)return n&&n(e.tr.lift(y,w).scrollIntoView()),!0;if(h&&c(u,"start",!0)&&c(l,"end")){for(var b=l,x=[];;){if(x.push(b),b.isTextblock)break;b=b.lastChild}for(var S=u,C=1;!S.isTextblock;S=S.firstChild)C++;if(b.canReplace(b.childCount,b.childCount,S.content)){if(n){for(var M=o.HY.empty,O=x.length-1;O>=0;O--)M=o.HY.from(x[O].copy(M));var E=e.tr.step(new r.FC(t.pos-x.length,t.pos+u.nodeSize,t.pos+C,t.pos+u.nodeSize-C,new o.p2(M,x.length,0),0,!0));n(E.scrollIntoView())}return!0}}return!1}function S(e){return function(t,n){var r=t.selection,o=e<0?r.$from:r.$to,s=o.depth;while(o.node(s).isInline){if(!s)return!1;s--}return!!o.node(s).isTextblock&&(n&&n(t.tr.setSelection(i.Bs.create(t.doc,e<0?o.start(s):o.end(s)))),!0)}}var C=S(-1),M=S(1);function O(e,t){return function(n,o){var i=n.selection,s=i.$from,a=i.$to,c=s.blockRange(a),l=c&&(0,r.nd)(c,e,t);return!!l&&(o&&o(n.tr.wrap(c,l).scrollIntoView()),!0)}}function E(e,t){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,(function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,e)}})),!!a&&(r&&r(n.tr.setBlockType(i,s,e,t).scrollIntoView()),!0)}}function A(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,s=o.$to,a=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,s.pos,(function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)})),a)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if(i)return i.v}return!1}function N(e,t){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!A(n.doc,a,e))return!1;if(r)if(s)e.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var c=!1,l=n.tr,u=0;!c&&u<a.length;u++){var h=a[u],p=h.$from,f=h.$to;c=n.doc.rangeHasMark(p.pos,f.pos,e)}for(var d=0;d<a.length;d++){var m=a[d],v=m.$from,g=m.$to;if(c)l.removeMark(v.pos,g.pos,e);else{var y=v.pos,w=g.pos,b=v.nodeAfter,k=g.nodeBefore,x=b&&b.isText?/^\s*/.exec(b.text)[0].length:0,S=k&&k.isText?/\s*$/.exec(k.text)[0].length:0;y+x<w&&(y+=x,w-=S),l.addMark(y,w,e.create(t))}}r(l.scrollIntoView())}return!0}}function T(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}var D=T(s,a,l),I=T(s,h,p),R={Enter:T(d,g,y,w),"Mod-Enter":v,Backspace:D,"Mod-Backspace":D,"Shift-Backspace":D,Delete:I,"Mod-Delete":I,"Mod-a":b},z={"Ctrl-h":R["Backspace"],"Alt-Backspace":R["Mod-Backspace"],"Ctrl-d":R["Delete"],"Ctrl-Alt-Backspace":R["Mod-Delete"],"Alt-Delete":R["Mod-Delete"],"Alt-d":R["Mod-Delete"],"Ctrl-a":C,"Ctrl-e":M};for(var F in R)z[F]=R[F];R.Home=C,R.End=M;var P="undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),$=P?z:R},36189:function(e,t,n){"use strict";n.d(t,{m8:function(){return E},KX:function(){return N},Yw:function(){return A}});var r=200,o=function(){};o.prototype.append=function(e){return e.length?(e=o.from(e),!this.length&&e||e.length<r&&this.leafAppend(e)||this.length<r&&e.leafPrepend(this)||this.appendInner(e)):this},o.prototype.prepend=function(e){return e.length?o.from(e).append(this):this},o.prototype.appendInner=function(e){return new s(this,e)},o.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?o.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},o.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},o.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},o.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},o.from=function(e){return e instanceof o?e:e&&e.length?new i(e):o.empty};var i=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=r)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=r)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(o);o.empty=new i([]);var s=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(o),a=o,c=a,l=n(21081),u=n(76922),h=500,p=function(e,t){this.items=e,this.eventCount=t};function f(e,t){var n;return e.forEach((function(e,r){if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}p.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){var s=this.items.get(i-1);if(s.selection){--i;break}}t&&(r=this.remapping(i,this.items.length),o=r.maps.length);var a,c,l=e.tr,u=[],h=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(i,t+1),o=r.maps.length),o--,void h.push(e);if(r){h.push(new d(e.map));var s,f=e.step.map(r.slice(o));f&&l.maybeStep(f).doc&&(s=l.mapping.maps[l.mapping.maps.length-1],u.push(new d(s,null,null,u.length+h.length))),o--,s&&r.appendMap(s,o)}else l.maybeStep(e.step);return e.selection?(a=r?e.selection.map(r.slice(o)):e.selection,c=new p(n.items.slice(0,i).append(h.reverse().concat(u)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:l,selection:a}},p.prototype.addTransform=function(e,t,n,r){for(var o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<e.steps.length;c++){var l=e.steps[c].invert(e.docs[c]),u=new d(e.mapping.maps[c],l,t),h=void 0;(h=a&&a.merge(u))&&(u=h,c?o.pop():s=s.slice(0,s.length-1)),o.push(u),t&&(i++,t=null),r||(a=u)}var m=i-n.depth;return m>v&&(s=f(s,m),i-=m),new p(s.append(o),i)},p.prototype.remapping=function(e,t){var n=new l.vs;return this.items.forEach((function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,o)}),e,t),n},p.prototype.addMaps=function(e){return 0==this.eventCount?this:new p(this.items.append(e.map((function(e){return new d(e)}))),this.eventCount)},p.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),r);var a=t;this.items.forEach((function(t){var r=o.getMirror(--a);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(t.step){var l=e.steps[r].invert(e.docs[r]),u=t.selection&&t.selection.map(o.slice(a+1,r));u&&s++,n.push(new d(c,l,u))}else n.push(new d(c))}}),r);for(var c=[],l=t;l<i;l++)c.push(new d(o.maps[l]));var u=this.items.slice(0,r).append(c).append(n),f=new p(u,s);return f.emptyItemCount()>h&&(f=f.compress(this.items.length-n.length)),f},p.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},p.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=e)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(t.slice(n)),c=a&&a.getMap();if(n--,c&&t.appendMap(c,n),a){var l=i.selection&&i.selection.map(t.slice(n));l&&o++;var u,h=new d(c.invert(),a,l),p=r.length-1;(u=r.length&&r[p].merge(h))?r[p]=u:r.push(h)}}else i.map&&n--}),this.items.length,0),new p(c.from(r.reverse()),o)},p.empty=new p(c.empty,0);var d=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};d.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new d(t.getMap().invert(),t,this.selection)}};var m=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},v=20;function g(e,t,n,r){var o,i=n.getMeta(M);if(i)return i.historyState;n.getMeta(O)&&(e=new m(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(M))return s.getMeta(M).redo?new m(e.done.addTransform(n,null,r,C(t)),e.undone,w(n.mapping.maps[n.steps.length-1]),e.prevTime):new m(e.done,e.undone.addTransform(n,null,r,C(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new m(e.done.rebased(n,o),e.undone.rebased(n,o),b(e.prevRanges,n.mapping),e.prevTime):new m(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),b(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!y(n,e.prevRanges)),c=s?b(e.prevRanges,n.mapping):w(n.mapping.maps[n.steps.length-1]);return new m(e.done.addTransform(n,a?t.selection.getBookmark():null,r,C(t)),p.empty,c,n.time)}function y(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}function w(e){var t=[];return e.forEach((function(e,n,r,o){return t.push(r,o)})),t}function b(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function k(e,t,n,r){var o=C(t),i=M.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),l=new m(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(M,{redo:r,historyState:l}).scrollIntoView())}}var x=!1,S=null;function C(e){var t=e.plugins;if(S!=t){x=!1,S=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){x=!0;break}}return x}var M=new u.H$("history"),O=new u.H$("closeHistory");function E(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new u.Sy({key:M,state:{init:function(){return new m(p.empty,p.empty,null,0)},apply:function(t,n,r){return g(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var n="historyUndo"==t.inputType?A(e.state,e.dispatch):"historyRedo"==t.inputType&&N(e.state,e.dispatch);return n&&t.preventDefault(),n}}}})}function A(e,t){var n=M.getState(e);return!(!n||0==n.done.eventCount)&&(t&&k(n,e,t,!1),!0)}function N(e,t){var n=M.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&k(n,e,t,!0),!0)}},40896:function(e,t,n){"use strict";n.d(t,{VK:function(){return o},zK:function(){return a},S0:function(){return s}});n(76922);var r=n(21081),o=function(e,t){this.match=e,this.handler="string"==typeof t?i(t):t};function i(e){return function(t,n,r,o){var i=e;if(n[1]){var s=n[0].lastIndexOf(n[1]);i+=n[0].slice(s+n[1].length),r+=s;var a=r-o;a>0&&(i=n[0].slice(s-a,s)+i,r=o)}return t.tr.insertText(i,r,o)}}new o(/--$/,"\u2014"),new o(/\.\.\.$/,"\u2026"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new o(/"$/,"\u201d"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new o(/'$/,"\u2019");function s(e,t,n,i){return new o(e,(function(e,o,s,a){var c=n instanceof Function?n(o):n,l=e.tr.delete(s,a),u=l.doc.resolve(s),h=u.blockRange(),p=h&&(0,r.nd)(h,t,c);if(!p)return null;l.wrap(h,p);var f=l.doc.resolve(s-1).nodeBefore;return f&&f.type==t&&(0,r.Mn)(l.doc,s-1)&&(!i||i(o,f))&&l.join(s-1),l}))}function a(e,t,n){return new o(e,(function(e,r,o,i){var s=e.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,a):null}))}},54751:function(e,t,n){"use strict";n.d(t,{$:function(){return b},h:function(){return w}});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=i&&(c||+i[1]<57)||a&&c,h=0;h<10;h++)r[48+h]=r[96+h]=String(h);for(h=1;h<=24;h++)r[h+111]="F"+h;for(h=65;h<=90;h++)r[h]=String.fromCharCode(h+32),o[h]=String.fromCharCode(h);for(var p in r)o.hasOwnProperty(p)||(o[p]=r[p]);function f(e){var t=u&&(e.ctrlKey||e.altKey||e.metaKey)||(s||l)&&e.shiftKey&&e.key&&1==e.key.length,n=!t&&e.key||(e.shiftKey?o:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var d=n(76922),m="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function v(e){var t,n,r,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var c=i[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);m?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function g(e){var t=Object.create(null);for(var n in e)t[v(n)]=e[n];return t}function y(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function w(e){return new d.Sy({props:{handleKeyDown:b(e)}})}function b(e){var t=g(e);return function(e,n){var o,i=f(n),s=1==i.length&&" "!=i,a=t[y(i,n,!s)];if(a&&a(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=r[n.keyCode])&&o!=i){var c=t[y(o,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}else if(s&&n.shiftKey){var l=t[y(i,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}},38638:function(e,t,n){"use strict";function r(e){this.content=e}n.d(t,{aw:function(){return fe},PW:function(){return Te},HY:function(){return c},vc:function(){return f},ZU:function(){return ue},NB:function(){return $},Ts:function(){return z},e4:function(){return d},V_:function(){return he},p2:function(){return m}}),r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var o=n&&n!=e?this.remove(n):this,i=o.find(e),s=o.content.slice();return-1==i?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new r(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new r(n)},addBefore:function(e,t,n){var o=this.remove(t),i=o.content.slice(),s=o.find(e);return i.splice(-1==s?i.length:s,0,t,n),new r(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=r.from(e),e.size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=r.from(e),e.size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};var o=r,i=o;function s(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var c=s(o.content,i.content,n+1);if(null!=c)return c}n+=o.nodeSize}else n+=o.nodeSize}}function a(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=e.child(--o),c=t.child(--i),l=s.nodeSize;if(s!=c){if(!s.sameMarkup(c))return{a:n,b:r};if(s.isText&&s.text!=c.text){var u=0,h=Math.min(s.text.length,c.text.length);while(u<h&&s.text[s.text.length-u-1]==c.text[c.text.length-u-1])u++,n--,r--;return{a:n,b:r}}if(s.content.size||c.content.size){var p=a(s.content,c.content,n-1,r-1);if(p)return p}n-=l,r-=l}else n-=l,r-=l}}var c=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},l={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};c.prototype.nodesBetween=function(e,t,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<t;i++){var a=this.content[i],c=s+a.nodeSize;if(c>e&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,e-l),Math.min(a.content.size,t-l),n,r+l)}s=c}},c.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},c.prototype.textBetween=function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf&&r?(o+="function"===typeof r?r(s):r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},c.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new c(r,this.size+e.size)},c.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var o=0,i=0;i<t;o++){var s=this.content[o],a=i+s.nodeSize;a>e&&((i<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),r+=s.nodeSize),i=a}return new c(n,r)},c.prototype.cutByIndex=function(e,t){return e==t?c.empty:0==e&&t==this.content.length?this:new c(this.content.slice(e,t))},c.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new c(r,o)},c.prototype.addToStart=function(e){return new c([e].concat(this.content),this.size+e.nodeSize)},c.prototype.addToEnd=function(e){return new c(this.content.concat(e),this.size+e.nodeSize)},c.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},l.firstChild.get=function(){return this.content.length?this.content[0]:null},l.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},l.childCount.get=function(){return this.content.length},c.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},c.prototype.maybeChild=function(e){return this.content[e]},c.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},c.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),s(this,e,t)},c.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),a(this,e,t,n)},c.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return h(0,e);if(e==this.size)return h(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=e)return i==e||t>0?h(n+1,i):h(n,r);r=i}},c.prototype.toString=function(){return"<"+this.toStringInner()+">"},c.prototype.toStringInner=function(){return this.content.join(", ")},c.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},c.fromJSON=function(e,t){if(!t)return c.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new c(t.map(e.nodeFromJSON))},c.fromArray=function(e){if(!e.length)return c.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new c(t||e,n)},c.from=function(e){if(!e)return c.empty;if(e instanceof c)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new c([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(c.prototype,l);var u={index:0,offset:0};function h(e,t){return u.index=e,u.offset=t,u}function p(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!p(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!p(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}c.empty=new c([],0);var f=function(e,t){this.type=e,this.attrs=t};function d(e){var t=Error.call(this,e);return t.__proto__=d.prototype,t}f.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t},f.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},f.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},f.prototype.eq=function(e){return this==e||this.type==e.type&&p(this.attrs,e.attrs)},f.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},f.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},f.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},f.setFrom=function(e){if(!e||0==e.length)return f.none;if(e instanceof f)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},f.none=[],d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ReplaceError";var m=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},v={size:{configurable:!0}};function g(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,s=e.maybeChild(o),a=e.findIndex(n),c=a.index,l=a.offset;if(i==t||s.isText){if(l!=n&&!e.child(c).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return e.replaceChild(o,s.copy(g(s.content,t-i-1,n-i-1)))}function y(e,t,n,r){var o=e.findIndex(t),i=o.index,s=o.offset,a=e.maybeChild(i);if(s==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var c=y(a.content,t-s-1,n);return c&&e.replaceChild(i,a.copy(c))}function w(e,t,n){if(n.openStart>e.depth)throw new d("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new d("Inconsistent open depths");return b(e,t,n,0)}function b(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var s=b(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var a=A(n,e),c=a.start,l=a.end;return M(i,O(e,c,l,t,r))}var u=e.parent,h=u.content;return M(u,h.cut(0,e.parentOffset).append(n.content).append(h.cut(t.parentOffset)))}return M(i,E(e,t,r))}function k(e,t){if(!t.type.compatibleContent(e.type))throw new d("Cannot join "+t.type.name+" onto "+e.type.name)}function x(e,t,n){var r=e.node(n);return k(r,t.node(n)),r}function S(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function C(e,t,n,r){var o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(S(e.nodeAfter,r),i++));for(var a=i;a<s;a++)S(o.child(a),r);t&&t.depth==n&&t.textOffset&&S(t.nodeBefore,r)}function M(e,t){if(!e.type.validContent(t))throw new d("Invalid content for node "+e.type.name);return e.copy(t)}function O(e,t,n,r,o){var i=e.depth>o&&x(e,t,o+1),s=r.depth>o&&x(n,r,o+1),a=[];return C(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(k(i,s),S(M(i,O(e,t,n,r,o+1)),a)):(i&&S(M(i,E(e,t,o+1)),a),C(t,n,o,a),s&&S(M(s,E(n,r,o+1)),a)),C(r,null,o,a),new c(a)}function E(e,t,n){var r=[];if(C(null,e,n,r),e.depth>n){var o=x(e,t,n+1);S(M(o,E(e,t,n+1)),r)}return C(t,null,n,r),new c(r)}function A(e,t){for(var n=t.depth-e.openStart,r=t.node(n),o=r.copy(e.content),i=n-1;i>=0;i--)o=t.node(i).copy(c.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}v.size.get=function(){return this.content.size-this.openStart-this.openEnd},m.prototype.insertAt=function(e,t){var n=y(this.content,e+this.openStart,t,null);return n&&new m(n,this.openStart,this.openEnd)},m.prototype.removeBetween=function(e,t){return new m(g(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},m.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},m.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},m.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},m.fromJSON=function(e,t){if(!t)return m.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new m(c.fromJSON(e,t.content),n,r)},m.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new m(e,n,r)},Object.defineProperties(m.prototype,v),m.empty=new m(c.empty,0,0);var N=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},T={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};N.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},T.parent.get=function(){return this.node(this.depth)},T.doc.get=function(){return this.node(0)},N.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},N.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},N.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},N.prototype.start=function(e){return e=this.resolveDepth(e),0==e?0:this.path[3*e-1]+1},N.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},N.prototype.before=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},N.prototype.after=function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},T.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},T.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},T.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},N.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r},N.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return f.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},N.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},N.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},N.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new z(this,e,n)},N.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},N.prototype.max=function(e){return e.pos>this.pos?e:this},N.prototype.min=function(e){return e.pos<this.pos?e:this},N.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},N.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if(i=i.child(a),i.isText)break;o=l-1,r+=c+1}return new N(t,n,o)},N.resolveCached=function(e,t){for(var n=0;n<D.length;n++){var r=D[n];if(r.pos==t&&r.doc==e)return r}var o=D[I]=N.resolve(e,t);return I=(I+1)%R,o},Object.defineProperties(N.prototype,T);var D=[],I=0,R=12,z=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},F={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};F.start.get=function(){return this.$from.before(this.depth+1)},F.end.get=function(){return this.$to.after(this.depth+1)},F.parent.get=function(){return this.$from.node(this.depth)},F.startIndex.get=function(){return this.$from.index(this.depth)},F.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(z.prototype,F);var P=Object.create(null),$=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||c.empty,this.marks=r||f.none},B={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};B.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},B.childCount.get=function(){return this.content.childCount},$.prototype.child=function(e){return this.content.child(e)},$.prototype.maybeChild=function(e){return this.content.maybeChild(e)},$.prototype.forEach=function(e){this.content.forEach(e)},$.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},$.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},B.textContent.get=function(){return this.textBetween(0,this.content.size,"")},$.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},B.firstChild.get=function(){return this.content.firstChild},B.lastChild.get=function(){return this.content.lastChild},$.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},$.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},$.prototype.hasMarkup=function(e,t,n){return this.type==e&&p(this.attrs,t||e.defaultAttrs||P)&&f.sameSet(this.marks,n||f.none)},$.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},$.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},$.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},$.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return m.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new m(c,r.depth-i,o.depth-i)},$.prototype.replace=function(e,t,n){return w(this.resolve(e),this.resolve(t),n)},$.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}},$.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},$.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},$.prototype.resolve=function(e){return N.resolveCached(this,e)},$.prototype.resolveNoCache=function(e){return N.resolve(this,e)},$.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},B.isBlock.get=function(){return this.type.isBlock},B.isTextblock.get=function(){return this.type.isTextblock},B.inlineContent.get=function(){return this.type.inlineContent},B.isInline.get=function(){return this.type.isInline},B.isText.get=function(){return this.type.isText},B.isLeaf.get=function(){return this.type.isLeaf},B.isAtom.get=function(){return this.type.isAtom},$.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),j(this.marks,e)},$.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},$.prototype.canReplace=function(e,t,n,r,o){void 0===n&&(n=c.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(e).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},$.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},$.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},$.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=f.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!f.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},$.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},$.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=c.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties($.prototype,B);var _=function(e){function t(t,n,r,o){if(e.call(this,t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):j(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}($);function j(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var L=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},V={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};L.parse=function(e,t){var n=new W(e,t);if(null==n.next)return L.empty;var r=q(n);n.next&&n.err("Unexpected trailing text");var o=te(Q(r));return ne(o,n),o},L.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},L.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r},V.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},V.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},L.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},L.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];function o(i,s){var a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return c.from(s.map((function(e){return e.createAndFill()})));for(var l=0;l<i.next.length;l+=2){var u=i.next[l],h=i.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var p=o(h,s.concat(u));if(p)return p}}}return o(this,[])},L.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},L.prototype.computeWrapping=function(e){var t=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}},V.edgeCount.get=function(){return this.next.length>>1},L.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},L.prototype.toString=function(){var e=[];function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}return t(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)r+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return r})).join("\n")},Object.defineProperties(L.prototype,V),L.empty=new L(!0);var W=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},H={next:{configurable:!0}};function q(e){var t=[];do{t.push(J(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function J(e){var t=[];do{t.push(Y(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Y(e){for(var t=Z(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=U(e,t)}return t}function K(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function U(e,t){var n=K(e),r=n;return e.eat(",")&&(r="}"!=e.next?K(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function G(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&o.push(s)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}function Z(e){if(e.eat("(")){var t=q(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=G(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}function Q(e){var t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}function i(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(i(n,t))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=i(e.exprs[s],t);if(s==e.exprs.length-1)return a;o(a,t=n())}else{if("star"==e.type){var c=n();return r(t,c),o(i(e.expr,c),c),[r(c)]}if("plus"==e.type){var l=n();return o(i(e.expr,t),l),o(i(e.expr,l),l),[r(l)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){for(var u=t,h=0;h<e.min;h++){var p=n();o(i(e.expr,u),p),u=p}if(-1==e.max)o(i(e.expr,u),u);else for(var f=e.min;f<e.max;f++){var d=n();r(u,d),o(i(e.expr,u),d),u=d}return[r(u)]}if("name"==e.type)return[r(t,null,e.value)]}}}function X(e,t){return t-e}function ee(e,t){var n=[];return r(t),n.sort(X);function r(t){var o=e[t];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(t);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function te(e){var t=Object.create(null);return n(ee(e,0));function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];ee(e,r).forEach((function(e){s||o.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var i=t[r.join(",")]=new L(r.indexOf(e.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(X);i.next.push(o[s],t[a.join(",")]||n(a))}return i}}function ne(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function re(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function oe(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function ie(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new ce(e[n]);return t}H.next.get=function(){return this.tokens[this.pos]},W.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},W.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(W.prototype,H);var se=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=ie(n.attrs),this.defaultAttrs=re(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},ae={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};ae.isInline.get=function(){return!this.isBlock},ae.isTextblock.get=function(){return this.isBlock&&this.inlineContent},ae.isLeaf.get=function(){return this.contentMatch==L.empty},ae.isAtom.get=function(){return this.isLeaf||this.spec.atom},ae.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")},se.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},se.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},se.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:oe(this.attrs,e)},se.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $(this,this.computeAttrs(e),c.from(t),f.setFrom(n))},se.prototype.createChecked=function(e,t,n){if(t=c.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new $(this,this.computeAttrs(e),t,f.setFrom(n))},se.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),t=c.from(t),t.size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t).fillBefore(c.empty,!0);return o?new $(this,e,t.append(o),f.setFrom(n)):null},se.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},se.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},se.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},se.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:f.empty:e},se.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new se(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(se.prototype,ae);var ce=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},le={isRequired:{configurable:!0}};le.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(ce.prototype,le);var ue=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=ie(r.attrs),this.rank=t,this.excluded=null;var o=re(this.attrs);this.instance=o&&new f(this,o)};ue.prototype.create=function(e){return!e&&this.instance?this.instance:new f(this,oe(this.attrs,e))},ue.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,o){return n[e]=new ue(e,r++,t,o)})),n},ue.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},ue.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},ue.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var he=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=i.from(e.nodes),this.spec.marks=i.from(e.marks),this.nodes=se.compile(this.spec.nodes,this),this.marks=ue.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=n[s]||(n[s]=L.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?pe(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:pe(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function pe(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(var a in e.marks){var c=e.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}he.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof se))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},he.prototype.text=function(e,t){var n=this.nodes.text;return new _(n,n.defaultAttrs,e,f.setFrom(t))},he.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},he.prototype.nodeFromJSON=function(e){return $.fromJSON(this,e)},he.prototype.markFromJSON=function(e){return f.fromJSON(this,e)},he.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var fe=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};fe.prototype.parse=function(e,t){void 0===t&&(t={});var n=new xe(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},fe.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new xe(this,t,!0);return n.addAll(e,null,t.from,t.to),m.maxOpen(n.finish())},fe.prototype.matchTag=function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Me(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},fe.prototype.matchStyle=function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(e)||i.context&&!n.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s}return i}}},fe.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r],i=null==o.priority?50:o.priority;if(i<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Ee(e)),e.mark=t}))};for(var o in e.marks)r(o);var i=function(t){var r=e.nodes[s].spec.parseDOM;r&&r.forEach((function(e){n(e=Ee(e)),e.node=s}))};for(var s in e.nodes)i();return t},fe.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new fe(e,fe.schemaRules(e)))};var de={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},me={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ve={ol:!0,ul:!0},ge=1,ye=2,we=4;function be(e,t,n){return null!=t?(t?ge:0)|("full"===t?ye:0):e&&"pre"==e.whitespace?ge|ye:n&~we}var ke=function(e,t,n,r,o,i,s){this.type=e,this.attrs=t,this.solid=o,this.match=i||(s&we?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=f.none,this.pendingMarks=r,this.stashMarks=[]};ke.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(c.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},ke.prototype.finish=function(e){if(!(this.options&ge)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=c.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(c.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},ke.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},ke.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):Ae(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},ke.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!de.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var xe=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r,o=t.topNode,i=be(null,t.preserveWhitespace,0)|(n?we:0);r=o?new ke(o.type,o.attrs,f.none,f.none,!0,t.topMatch||o.type.contentMatch,i):new ke(n?null:e.schema.topNodeType,null,f.none,f.none,!0,null,i),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},Se={top:{configurable:!0},currentPos:{configurable:!0}};function Ce(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&ve.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}function Me(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Oe(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(t=n.exec(e))r.push(t[1],t[2].trim());return r}function Ee(e){var t={};for(var n in e)t[n]=e[n];return t}function Ae(e,t){var n=t.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(e)){var i=[],s=function(e){i.push(e);for(var n=0;n<e.edgeCount;n++){var r=e.edge(n),o=r.type,a=r.next;if(o==t)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}function Ne(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}Se.top.get=function(){return this.nodes[this.open]},xe.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(Oe(t)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(e),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},xe.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if(n.options&ye||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&ge)t=n.options&ye?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},xe.prototype.addElement=function(e,t){var n,r=e.nodeName.toLowerCase();ve.hasOwnProperty(r)&&this.parser.normalizeLists&&Ce(e);var o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:me.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);var i,s=this.top,a=this.needsBlock;if(de.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,o,!1===o.consuming?n:null)},xe.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},xe.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},xe.prototype.readStyles=function(e){var t=f.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(e[n],e[n+1],this,r);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;r=o}return t},xe.prototype.addElementByRule=function(e,t,n){var r,o,i,s,a=this;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs,t.preserveWhitespace)):(i=this.parser.schema.marks[t.mark],s=i.create(t.attrs),this.addPendingMark(s));var c=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return a.insertNode(e)}));else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,r)}r&&(this.sync(c),this.open--),s&&this.removePendingMark(s,c)},xe.prototype.addAll=function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&de.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},xe.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},xe.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},xe.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r},xe.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e,t);var i=be(e,r,o.options);o.options&we&&0==o.content.length&&(i|=we),this.nodes.push(new ke(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},xe.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},xe.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},xe.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},Se.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},xe.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},xe.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},xe.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){var o=t.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},xe.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},xe.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(e,a){for(;e>=0;e--){var c=n[e];if(""==c){if(e==n.length-1||0==e)continue;for(;a>=i;a--)if(s(e-1,a))return!0;return!1}var l=a>0||0==a&&o?t.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},xe.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},xe.prototype.addPendingMark=function(e){var t=Ne(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},xe.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(e);if(o>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var i=r.popFromStashMark(e);i&&r.type&&r.type.allowsMarkType(i.type)&&(r.activeMarks=i.addToSet(r.activeMarks))}if(r==t)break}},Object.defineProperties(xe.prototype,Se);var Te=function(e,t){this.nodes=e||{},this.marks=t||{}};function De(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Ie(e){return e.document||window.document}Te.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=Ie(t).createDocumentFragment());var o=n,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);var n=0,s=0;while(n<i.length&&s<e.marks.length){var a=e.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<i.length)o=i.pop(),i.pop();while(s<e.marks.length){var c=e.marks[s++],l=r.serializeMark(c,e.isInline,t);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNodeInner(e,t))})),n},Te.prototype.serializeNodeInner=function(e,t){void 0===t&&(t={});var n=Te.renderSpec(Ie(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r},Te.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Te.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&Te.renderSpec(Ie(n),r(e,t))},Te.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var r=t[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?e.createElementNS(n,r):e.createElement(r),a=t[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var h=c;h<t.length;h++){var p=t[h];if(0===p){if(h<t.length-1||h>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var f=Te.renderSpec(e,p,n),d=f.dom,m=f.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},Te.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new Te(this.nodesFromSchema(e),this.marksFromSchema(e)))},Te.nodesFromSchema=function(e){var t=De(e.nodes);return t.text||(t.text=function(e){return e.text}),t},Te.marksFromSchema=function(e){return De(e.marks)}},74465:function(e,t,n){"use strict";n.d(t,{IB:function(){return s},bw:function(){return l},s6:function(){return i}});var r=n(21081),o=n(38638);function i(e){return function(t,n){var i=t.selection,s=i.$from,a=i.$to,c=i.node;if(c&&c.isBlock||s.depth<2||!s.sameParent(a))return!1;var l=s.node(-1);if(l.type!=e)return!1;if(0==s.parent.content.size&&s.node(-1).childCount==s.indexAfter(-1)){if(2==s.depth||s.node(-3).type!=e||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var u=o.HY.empty,h=s.index(-1)?1:s.index(-2)?2:3,p=s.depth-h;p>=s.depth-3;p--)u=o.HY.from(s.node(p).copy(u));var f=s.indexAfter(-1)<s.node(-2).childCount?1:s.indexAfter(-2)<s.node(-3).childCount?2:3;u=u.append(o.HY.from(e.createAndFill()));var d=s.before(s.depth-(h-1)),m=t.tr.replace(d,s.after(-f),new o.p2(u,4-h,0)),v=-1;m.doc.nodesBetween(d,m.doc.content.size,(function(e,t){if(v>-1)return!1;e.isTextblock&&0==e.content.size&&(v=t+1)})),v>-1&&m.setSelection(t.selection.constructor.near(m.doc.resolve(v))),n(m.scrollIntoView())}return!0}var g=a.pos==s.end()?l.contentMatchAt(0).defaultType:null,y=t.tr.delete(s.pos,a.pos),w=g&&[null,{type:g}];return!!(0,r.Ax)(y.doc,s.pos,2,w)&&(n&&n(y.split(s.pos,2,w).scrollIntoView()),!0)}}function s(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,s=o.blockRange(i,(function(t){return t.childCount&&t.firstChild.type==e}));return!!s&&(!n||(o.node(s.depth-1).type==e?a(t,n,e,s):c(t,n,s)))}}function a(e,t,n,i){var s=e.tr,a=i.end,c=i.$to.end(i.depth);return a<c&&(s.step(new r.FC(a-1,c,a,c,new o.p2(o.HY.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new o.Ts(s.doc.resolve(i.$from.pos),s.doc.resolve(c),i.depth)),t(s.lift(i,(0,r.k9)(i)).scrollIntoView()),!0}function c(e,t,n){for(var i=e.tr,s=n.parent,a=n.end,c=n.endIndex-1,l=n.startIndex;c>l;c--)a-=s.child(c).nodeSize,i.delete(a-1,a+1);var u=i.doc.resolve(n.start),h=u.nodeAfter;if(i.mapping.map(n.end)!=n.start+u.nodeAfter.nodeSize)return!1;var p=0==n.startIndex,f=n.endIndex==s.childCount,d=u.node(-1),m=u.index(-1);if(!d.canReplace(m+(p?0:1),m+1,h.content.append(f?o.HY.empty:o.HY.from(s))))return!1;var v=u.pos,g=v+h.nodeSize;return i.step(new r.FC(v-(p?1:0),g+(f?1:0),v+1,g-1,new o.p2((p?o.HY.empty:o.HY.from(s.copy(o.HY.empty))).append(f?o.HY.empty:o.HY.from(s.copy(o.HY.empty))),p?0:1,f?0:1),p?0:1)),t(i.scrollIntoView()),!0}function l(e){return function(t,n){var i=t.selection,s=i.$from,a=i.$to,c=s.blockRange(a,(function(t){return t.childCount&&t.firstChild.type==e}));if(!c)return!1;var l=c.startIndex;if(0==l)return!1;var u=c.parent,h=u.child(l-1);if(h.type!=e)return!1;if(n){var p=h.lastChild&&h.lastChild.type==u.type,f=o.HY.from(p?e.create():null),d=new o.p2(o.HY.from(e.create(null,o.HY.from(u.type.create(null,f)))),p?3:1,0),m=c.start,v=c.end;n(t.tr.step(new r.FC(m-(p?3:1),v,m,v,d,1,!0)).scrollIntoView())}return!0}}},76922:function(e,t,n){"use strict";n.d(t,{C1:function(){return f},yy:function(){return M},qv:function(){return h},Sy:function(){return N},H$:function(){return I},Y1:function(){return s},xm:function(){return c},Bs:function(){return l}});var r=n(38638),o=n(21081),i=Object.create(null),s=function(e,t,n){this.ranges=n||[new c(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(e,t){void 0===t&&(t=r.p2.empty);for(var n=t.content.lastChild,o=null,i=0;i<t.openEnd;i++)o=n,n=n.lastChild;for(var s=e.steps.length,a=this.ranges,c=0;c<a.length;c++){var l=a[c],u=l.$from,h=l.$to,p=e.mapping.slice(s);e.replaceRange(p.map(u.pos),p.map(h.pos),c?r.p2.empty:t),0==c&&v(e,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},s.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=e.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);o?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),v(e,n,t.isInline?-1:1))}},s.findFrom=function(e,t,n){var r=e.parent.inlineContent?new l(e):m(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?m(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):m(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},s.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new f(e.node(0))},s.atStart=function(e){return m(e,e,0,0,1)||new f(e)},s.atEnd=function(e){return m(e,e,e.content.size,e.childCount,-1)||new f(e)},s.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},s.jsonID=function(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t},s.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(e,t){this.$from=e,this.$to=t},l=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=n.resolve(r.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,n){if(void 0===n&&(n=r.p2.empty),e.prototype.replace.call(this,t,n),n==r.p2.empty){var o=this.$from.marksAcross(this.$to);o&&t.ensureMarks(o)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new u(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!s)return e.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i?n=r:(n=(e.findFrom(n,-o,!0)||e.findFrom(n,o,!0)).$anchor,n.pos<r.pos!=i<0&&(n=r))),new t(n,r)},Object.defineProperties(t.prototype,n),t}(s);s.jsonID("text",l);var u=function(e,t){this.anchor=e,this.head=t};u.prototype.map=function(e){return new u(e.map(this.anchor),e.map(this.head))},u.prototype.resolve=function(e){return l.between(e.resolve(this.anchor),e.resolve(this.head))};var h=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?e.near(a):new t(a)},t.prototype.content=function(){return new r.p2(r.HY.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new p(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(s);h.prototype.visible=!1,s.jsonID("node",h);var p=function(e){this.anchor=e};p.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new u(r,r):new p(r)},p.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&h.isSelectable(n)?new h(t):s.near(t)};var f=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=r.p2.empty),n==r.p2.empty){t.delete(0,t.doc.content.size);var o=e.atStart(t.doc);o.eq(t.selection)||t.setSelection(o)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return d},t}(s);s.jsonID("all",f);var d={map:function(){return this},resolve:function(e){return new f(e)}};function m(e,t,n,r,o,i){if(t.inlineContent)return l.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&h.isSelectable(a))return h.create(e,n-(o<0?a.nodeSize:0))}else{var c=m(e,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function v(e,t,n){var r=e.steps.length-1;if(!(r<t)){var i=e.steps[r];if(i instanceof o.Pu||i instanceof o.FC){var a,c=e.mapping.maps[r];c.forEach((function(e,t,n,r){null==a&&(a=r)})),e.setSelection(s.near(e.doc.resolve(a),n))}}}var g=1,y=2,w=4,b=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|g)&~y,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&g)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=y,this},t.prototype.ensureMarks=function(e){return r.vc.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&y)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=this.updated&~y,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.vc.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=w,this},n.scrolledIntoView.get=function(){return(this.updated&w)>0},Object.defineProperties(t.prototype,n),t}(o.wx);function k(e,t){return t&&e?e.bind(t):e}var x=function(e,t,n){this.name=e,this.init=k(t.init,n),this.apply=k(t.apply,n)},S=[new x("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new x("selection",{init:function(e,t){return e.selection||s.atStart(t.doc)},apply:function(e){return e.selection}}),new x("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new x("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],C=function(e,t){var n=this;this.schema=e,this.fields=S.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new x(e.key,e.spec.state,e))}))},M=function(e){this.config=e},O={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};O.schema.get=function(){return this.config.schema},O.plugins.get=function(){return this.config.plugins},M.prototype.apply=function(e){return this.applyTransaction(e).state},M.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},M.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,l=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},M.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new M(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<E.length;i++)E[i](this,e,t);return t},O.tr.get=function(){return new b(this)},M.create=function(e){for(var t=new C(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new M(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},M.prototype.reconfigure=function(e){for(var t=new C(this.schema,e.plugins),n=t.fields,r=new M(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},M.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},M.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new C(e.schema,e.plugins),i=new M(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r.NB.fromJSON(e.schema,t.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],l=c.spec.state;if(c.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,a))return void(i[o.name]=l.fromJSON.call(c,e,t[a],i))}i[o.name]=o.init(e,i)}})),i},M.addApplyListener=function(e){E.push(e)},M.removeApplyListener=function(e){var t=E.indexOf(e);t>-1&&E.splice(t,1)},Object.defineProperties(M.prototype,O);var E=[];function A(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=A(o,t,{})),n[r]=o}return n}var N=function(e){this.props={},e.props&&A(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:D("plugin")};N.prototype.getState=function(e){return e[this.key]};var T=Object.create(null);function D(e){return e in T?e+"$"+ ++T[e]:(T[e]=0,e+"$")}var I=function(e){void 0===e&&(e="key"),this.key=D(e)};I.prototype.get=function(e){return e.config.pluginsByKey[this.key]},I.prototype.getState=function(e){return e[this.key]}},21081:function(e,t,n){"use strict";n.d(t,{WJ:function(){return F},vs:function(){return h},FC:function(){return b},Pu:function(){return w},wx:function(){return f},Mn:function(){return T},Ax:function(){return N},nj:function(){return R},nd:function(){return C},k9:function(){return S},dR:function(){return $}});var r=n(38638),o=65535,i=Math.pow(2,16);function s(e,t){return e+t*i}function a(e){return e&o}function c(e){return(e-(e&o))/i}var l=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},u=function e(t,n){if(void 0===n&&(n=!1),!t.length&&e.empty)return e.empty;this.ranges=t,this.inverted=n};u.prototype.recover=function(e){var t=0,n=a(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+c(e)},u.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},u.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},u.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?r:0);if(c>e)break;var u=this.ranges[a+o],h=this.ranges[a+i],p=c+u;if(e<=p){var f=u?e==c?-1:e==p?1:t:t,d=c+r+(f<0?0:h);if(n)return d;var m=e==(t<0?c:p)?null:s(a/3,e-c);return new l(d,t<0?e!=c:e!=p,m)}r+=h-u}return n?e+r:new l(e+r)},u.prototype.touches=function(e,t){for(var n=0,r=a(t),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?n:0);if(c>e)break;var l=this.ranges[s+o],u=c+l;if(e<=u&&s==3*r)return!0;n+=this.ranges[s+i]-l}return!1},u.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+t],l=this.ranges[r+n];e(s,s+c,a,a+l),o+=l-c}},u.prototype.invert=function(){return new u(this.ranges,!this.inverted)},u.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},u.offset=function(e){return 0==e?u.empty:new u(e<0?[0,-e,0]:[0,0,e])},u.empty=new u([]);var h=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function p(e){var t=Error.call(this,e);return t.__proto__=p.prototype,t}h.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new h(this.maps,this.mirror,e,t)},h.prototype.copy=function(){return new h(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},h.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},h.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},h.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},h.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},h.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},h.prototype.invert=function(){var e=new h;return e.appendMappingInverted(this),e},h.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},h.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},h.prototype._map=function(e,t,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o],s=i.mapResult(e,t);if(null!=s.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,e=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),e=s.pos}return n?e:new l(e,r)},p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="TransformError";var f=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new h},d={before:{configurable:!0},docChanged:{configurable:!0}};function m(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},f.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new p(t.failed);return this},f.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},d.docChanged.get=function(){return this.steps.length>0},f.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(f.prototype,d);var v=Object.create(null),g=function(){};g.prototype.apply=function(e){return m()},g.prototype.getMap=function(){return u.empty},g.prototype.invert=function(e){return m()},g.prototype.map=function(e){return m()},g.prototype.merge=function(e){return null},g.prototype.toJSON=function(){return m()},g.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=v[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},g.jsonID=function(e,t){if(e in v)throw new RangeError("Duplicate use of step JSON ID "+e);return v[e]=t,t.prototype.jsonID=e,t};var y=function(e,t){this.doc=e,this.failed=t};y.ok=function(e){return new y(e,null)},y.fail=function(e){return new y(null,e)},y.fromReplace=function(e,t,n,o){try{return y.ok(e.replace(t,n,o))}catch(i){if(i instanceof r.e4)return y.fail(i.message);throw i}};var w=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&k(e,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new u([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?r.p2.empty:new r.p2(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var o=this.slice.size+e.slice.size==0?r.p2.empty:new r.p2(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),o,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,r.p2.fromJSON(e,n.slice),!!n.structure)},t}(g);g.jsonID("replace",w);var b=function(e){function t(t,n,r,o,i,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(k(e,this.from,this.gapFrom)||k(e,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return y.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?y.fromReplace(e,this.from,this.to,n):y.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new u([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,r.p2.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(g);function k(e,t,n){var r=e.resolve(t),o=n-t,i=r.depth;while(o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount)i--,o--;if(o>0){var s=r.node(i).maybeChild(r.indexAfter(i));while(o>0){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function x(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function S(e){for(var t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex),r=e.depth;;--r){var o=e.$from.node(r),i=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&o.canReplace(i,s,n))return r;if(0==r||o.type.spec.isolating||!x(o,i,s))break}}function C(e,t,n,r){void 0===r&&(r=e);var o=O(e,t),i=o&&E(r,t);return i?o.map(M).concat({type:t,attrs:n}).concat(i.map(M)):null}function M(e){return{type:e,attrs:null}}function O(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}function E(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=s.length?s[s.length-1]:t,c=a.contentMatch,l=r;c&&l<o;l++)c=c.matchType(n.child(l).type);return c&&c.validEnd?s:null}function A(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function N(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var h=l.content.cutByIndex(u,l.childCount),p=r&&r[c]||l;if(p!=l&&(h=h.replaceChild(0,p.type.create(p.attrs))),!l.canReplace(u+1,l.childCount)||!p.type.validContent(h))return!1}var f=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(f,f,d?d.type:o.node(i+1).type)}function T(e,t){var n=e.resolve(t),r=n.index();return D(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function D(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function I(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function R(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0),u=r.node(a),h=!1;if(1==s)h=u.canReplace(l,l,o);else{var p=u.contentMatchAt(l).findWrapping(o.firstChild.type);h=p&&u.canReplaceWith(l,l,p[0])}if(h)return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function z(e,t,n){for(var o=[],i=0;i<e.childCount;i++){var s=e.child(i);s.content.size&&(s=s.copy(z(s.content,t,s))),s.isInline&&(s=t(s,n,i)),o.push(s)}return r.HY.fromArray(o)}g.jsonID("replaceAround",b),f.prototype.lift=function(e,t){for(var n=e.$from,o=e.$to,i=e.depth,s=n.before(i+1),a=o.after(i+1),c=s,l=a,u=r.HY.empty,h=0,p=i,f=!1;p>t;p--)f||n.index(p)>0?(f=!0,u=r.HY.from(n.node(p).copy(u)),h++):c--;for(var d=r.HY.empty,m=0,v=i,g=!1;v>t;v--)g||o.after(v+1)<o.end(v)?(g=!0,d=r.HY.from(o.node(v).copy(d)),m++):l++;return this.step(new b(c,l,s,a,new r.p2(u.append(d),h,m),u.size-h,!0))},f.prototype.wrap=function(e,t){for(var n=r.HY.empty,o=t.length-1;o>=0;o--){if(n.size){var i=t[o].type.contentMatch.matchFragment(n);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=r.HY.from(t[o].type.create(t[o].attrs,n))}var s=e.start,a=e.end;return this.step(new b(s,a,s,a,new r.p2(n,0,0),t.length,!0))},f.prototype.setBlockType=function(e,t,n,o){var i=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,o)&&A(i.doc,i.mapping.slice(s).map(t),n)){i.clearIncompatible(i.mapping.slice(s).map(t,1),n);var a=i.mapping.slice(s),c=a.map(t,1),l=a.map(t+e.nodeSize,1);return i.step(new b(c,l,c+1,l-1,new r.p2(r.HY.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}})),this},f.prototype.setNodeMarkup=function(e,t,n,o){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var s=t.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new b(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new r.p2(r.HY.from(s),0,0),1,!0))},f.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var o=this.doc.resolve(e),i=r.HY.empty,s=r.HY.empty,a=o.depth,c=o.depth-t,l=t-1;a>c;a--,l--){i=r.HY.from(o.node(a).copy(i));var u=n&&n[l];s=r.HY.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}return this.step(new w(e,e,new r.p2(i.append(s),t,t),!0))},f.prototype.join=function(e,t){void 0===t&&(t=1);var n=new w(e-t,e+t,r.p2.empty,!0);return this.step(n)};var F=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=e.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r.p2(z(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),n.openStart,n.openEnd);return y.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new P(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(g);g.jsonID("addMark",F);var P=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=new r.p2(z(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return y.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new F(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(g);function $(e,t,n,o){if(void 0===n&&(n=t),void 0===o&&(o=r.p2.empty),t==n&&!o.size)return null;var i=e.resolve(t),s=e.resolve(n);return B(i,s,o)?new w(t,n,o):new _(i,s,o).fit()}function B(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}g.jsonID("removeMark",P),f.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var h=Math.max(c,e),p=Math.min(c+r.nodeSize,t),f=n.addToSet(u),d=0;d<u.length;d++)u[d].isInSet(f)||(s&&s.to==h&&s.mark.eq(u[d])?s.to=p:o.push(s=new P(h,p,u[d])));a&&a.to==h?a.to=p:i.push(a=new F(h,p,n))}}})),o.forEach((function(e){return r.step(e)})),i.forEach((function(e){return r.step(e)})),this},f.prototype.removeMark=function(e,t,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(e,t,(function(o,a){if(o.isInline){s++;var c=null;if(n instanceof r.ZU){var l,u=o.marks;while(l=n.isInSet(u))(c||(c=[])).push(l),u=l.removeFromSet(u)}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var h=Math.min(a+o.nodeSize,t),p=0;p<c.length;p++){for(var f=c[p],d=void 0,m=0;m<i.length;m++){var v=i[m];v.step==s-1&&f.eq(i[m].style)&&(d=v)}d?(d.to=h,d.step=s):i.push({style:f,from:Math.max(a,e),to:h,step:s})}}})),i.forEach((function(e){return o.step(new P(e.from,e.to,e.style))})),this},f.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var o=this.doc.nodeAt(e),i=[],s=e+1,a=0;a<o.childCount;a++){var c=o.child(a),l=s+c.nodeSize,u=n.matchType(c.type,c.attrs);if(u){n=u;for(var h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||this.step(new P(s,l,c.marks[h]))}else i.push(new w(s,l,r.p2.empty));s=l}if(!n.validEnd){var p=n.fillBefore(r.HY.empty,!0);this.replace(s,s,new r.p2(p,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},f.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=r.p2.empty);var o=$(this.doc,e,t,n);return o&&this.step(o),this},f.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new r.p2(r.HY.from(n),0,0))},f.prototype.delete=function(e,t){return this.replace(e,t,r.p2.empty)},f.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var _=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var o=0;o<=e.depth;o++){var i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}this.placed=r.HY.empty;for(var s=e.depth;s>0;s--)this.placed=r.HY.from(e.node(s).copy(this.placed))},j={depth:{configurable:!0}};function L(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(L(e.firstChild.content,t-1,n)))}function V(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(V(e.lastChild.content,t-1,n)))}function W(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function H(e,t,n){if(t<=0)return e;var o=e.content;return t>1&&(o=o.replaceChild(0,H(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(r.HY.empty,!0)))),e.copy(o)}function q(e,t,n,r,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!J(n,i.content,s)?a:null}function J(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function Y(e,t,n,o,i){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(Y(s.content,t+1,n,o,s)))}if(t>o){var a=i.contentMatchAt(0),c=a.fillBefore(e).append(e);e=c.append(a.matchFragment(c).fillBefore(r.HY.empty,!0))}return e}function K(e,t){for(var n=[],r=Math.min(e.depth,t.depth),o=r;o>=0;o--){var i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(i==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==i-1)&&n.push(o)}return n}j.depth.get=function(){return this.frontier.length-1},_.prototype.fit=function(){while(this.unplaced.size){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(t<0?this.$to:o.doc.resolve(t));if(!i)return null;var s=this.placed,a=o.depth,c=i.depth;while(a&&c&&1==s.childCount)s=s.firstChild.content,a--,c--;var l=new r.p2(s,a,c);return t>-1?new b(o.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||o.pos!=this.$to.pos?new w(o.pos,i.pos,l):void 0},_.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--){var n=void 0,o=void 0;t?(o=W(this.unplaced.content,t-1).firstChild,n=o.content):n=this.unplaced.content;for(var i=n.firstChild,s=this.depth;s>=0;s--){var a=this.frontier[s],c=a.type,l=a.match,u=void 0,h=void 0;if(1==e&&(i?l.matchType(i.type)||(h=l.fillBefore(r.HY.from(i),!1)):c.compatibleContent(o.type)))return{sliceDepth:t,frontierDepth:s,parent:o,inject:h};if(2==e&&i&&(u=l.findWrapping(i.type)))return{sliceDepth:t,frontierDepth:s,parent:o,wrap:u};if(o&&l.matchType(o.type))break}}},_.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,o=e.openEnd,i=W(t,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.p2(t,n+1,Math.max(o,i.size+n>=t.size-o?n+1:0)),!0)},_.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,o=e.openEnd,i=W(t,n);if(i.childCount<=1&&n>0){var s=t.size-n<=n+i.size;this.unplaced=new r.p2(L(t,n-1,1),n-1,s?n-1:o)}else this.unplaced=new r.p2(L(t,n,1),n,o)},_.prototype.placeNodes=function(e){var t=e.sliceDepth,n=e.frontierDepth,o=e.parent,i=e.inject,s=e.wrap;while(this.depth>n)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,l=o?o.content:c.content,u=c.openStart-t,h=0,p=[],f=this.frontier[n],d=f.match,m=f.type;if(i){for(var v=0;v<i.childCount;v++)p.push(i.child(v));d=d.matchFragment(i)}var g=l.size+t-(c.content.size-c.openEnd);while(h<l.childCount){var y=l.child(h),w=d.matchType(y.type);if(!w)break;h++,(h>1||0==u||y.content.size)&&(d=w,p.push(H(y.mark(m.allowedMarks(y.marks)),1==h?u:0,h==l.childCount?g:-1)))}var b=h==l.childCount;b||(g=-1),this.placed=V(this.placed,n,r.HY.from(p)),this.frontier[n].match=d,b&&g<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var k=0,x=l;k<g;k++){var S=x.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),x=S.content}this.unplaced=b?0==t?r.p2.empty:new r.p2(L(c.content,t-1,1),t-1,g<0?c.openEnd:t-1):new r.p2(L(c.content,t,h),c.openStart,c.openEnd)},_.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!q(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;var n=this.$to,r=n.depth,o=this.$to.after(r);while(r>1&&o==this.$to.end(--r))++o;return o},_.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=q(e,t,o,r,i);if(s){for(var a=t-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=c.type,h=q(e,a,u,l,!0);if(!h||h.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}},_.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;while(this.depth>t.depth)this.closeFrontierNode();t.fit.childCount&&(this.placed=V(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e},_.prototype.openFrontierNode=function(e,t,n){var o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=V(this.placed,this.depth,r.HY.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},_.prototype.closeFrontierNode=function(){var e=this.frontier.pop(),t=e.match.fillBefore(r.HY.empty,!0);t.childCount&&(this.placed=V(this.placed,this.frontier.length,t))},Object.defineProperties(_.prototype,j),f.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var o=this.doc.resolve(e),i=this.doc.resolve(t);if(B(o,i,n))return this.step(new w(e,t,n));var s=K(o,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var c=o.depth,l=o.pos-1;c>0;c--,l--){var u=o.node(c).type.spec;if(u.defining||u.isolating)break;s.indexOf(c)>-1?a=c:o.before(c)==l&&s.splice(1,0,-c)}for(var h=s.indexOf(a),p=[],f=n.openStart,d=n.content,m=0;;m++){var v=d.firstChild;if(p.push(v),m==n.openStart)break;d=v.content}f>0&&p[f-1].type.spec.defining&&o.node(h).type!=p[f-1].type?f-=1:f>=2&&p[f-1].isTextblock&&p[f-2].type.spec.defining&&o.node(h).type!=p[f-2].type&&(f-=2);for(var g=n.openStart;g>=0;g--){var y=(g+f+1)%(n.openStart+1),b=p[y];if(b)for(var k=0;k<s.length;k++){var x=s[(k+h)%s.length],S=!0;x<0&&(S=!1,x=-x);var C=o.node(x-1),M=o.index(x-1);if(C.canReplaceWith(M,M,b.type,b.marks))return this.replace(o.before(x),S?i.after(x):t,new r.p2(Y(n.content,0,n.openStart,y),y,n.openEnd))}}for(var O=this.steps.length,E=s.length-1;E>=0;E--){if(this.replace(e,t,n),this.steps.length>O)break;var A=s[E];A<0||(e=o.before(A),t=i.after(A))}return this},f.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var o=I(this.doc,e,n.type);null!=o&&(e=t=o)}return this.replaceRange(e,t,new r.p2(r.HY.from(n),0,0))},f.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=K(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)}},98780:function(e,t,n){"use strict";n.d(t,{tk:function(){return Vn}});var r=n(76922),o=n(38638),i=n(21081),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var h=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!h,s.chrome_version=h&&+h[1],s.safari=!u&&/Apple Computer/.test(navigator.vendor),s.ios=s.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),s.mac=s.ios||/Mac/.test(navigator.platform),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var p=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},f=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},d=null,m=function(e,t,n){var r=d||(d=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},v=function(e,t,n,r){return n&&(y(e,t,n,r,-1)||y(e,t,n,r,1))},g=/^(img|br|input|textarea|hr)$/i;function y(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:w(e))){var i=e.parentNode;if(!i||1!=i.nodeType||k(e)||g.test(e.nodeName)||"false"==e.contentEditable)return!1;t=p(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(e=e.childNodes[t+(o<0?-1:0)],"false"==e.contentEditable)return!1;t=o<0?w(e):0}}}function w(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function b(e,t,n){for(var r=0==t,o=t==w(e);r||o;){if(e==n)return!0;var i=p(e);if(e=e.parentNode,!e)return!1;r=r&&0==i,o=o&&i==w(e)}}function k(e){for(var t,n=e;n;n=n.parentNode)if(t=n.pmViewDesc)break;return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var x=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function S(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function C(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function M(e,t){return"number"==typeof e?e:e[t]}function O(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function E(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;;s=f(s)){if(!s)break;if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?C(i):O(s),l=0,u=0;if(t.top<c.top+M(r,"top")?u=-(c.top-t.top+M(o,"top")):t.bottom>c.bottom-M(r,"bottom")&&(u=t.bottom-c.bottom+M(o,"bottom")),t.left<c.left+M(r,"left")?l=-(c.left-t.left+M(o,"left")):t.right>c.right-M(r,"right")&&(l=t.right-c.right+M(o,"right")),l||u)if(a)i.defaultView.scrollBy(l,u);else{var h=s.scrollLeft,p=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var d=s.scrollLeft-h,m=s.scrollTop-p;t={left:t.left-d,top:t.top-m,right:t.right-d,bottom:t.bottom-m}}if(a)break}}}function A(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:N(e.dom)}}function N(e){for(var t=[],n=e.ownerDocument;e;e=f(e))if(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e==n)break;return t}function T(e){var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0;D(r,0==o?0:o-n)}function D(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var I=null;function R(e){if(e.setActive)return e.setActive();if(I)return e.focus(I);var t=N(e);e.focus(null==I?{get preventScroll(){return I={preventScroll:!0},!0}}:void 0),I||(I=!1,D(t,0))}function z(e,t){for(var n,r,o=2e8,i=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=m(c).getClientRects()}for(var h=0;h<u.length;h++){var p=u[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var f=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(f<o){n=c,o=f,r=f&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==c.nodeType&&f&&(i=l+(t.left>=(p.left+p.right)/2?1:0));continue}}!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=l+1)}}return n&&3==n.nodeType?F(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:z(n,r)}function F(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=V(r,1);if(i.top!=i.bottom&&P(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function P(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function $(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function B(e,t,n){var r=z(t,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}function _(e,t,n,r){for(var o=-1,i=t;;){if(i==e.dom)break;var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}function j(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=e.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(P(t,l))return j(s,t,l)}if((i=(i+1)%r)==o)break}return e}function L(e,t){var n,r,o,i,a=e.dom.ownerDocument;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(n=c,o=n.offsetNode,i=n.offset)}catch(y){}if(!o&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(t.left,t.top);l&&(r=l,o=r.startContainer,i=r.startOffset)}var u,h=(e.root.elementFromPoint?e.root:a).elementFromPoint(t.left,t.top+1);if(!h||!e.dom.contains(1!=h.nodeType?h.parentNode:h)){var p=e.dom.getBoundingClientRect();if(!P(t,p))return null;if(h=j(e.dom,t,p),!h)return null}if(s.safari)for(var d=h;o&&d;d=f(d))d.draggable&&(o=i=null);if(h=$(h,t),o){if(s.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length),i<o.childNodes.length)){var m,v=o.childNodes[i];"IMG"==v.nodeName&&(m=v.getBoundingClientRect()).right<=t.left&&m.bottom>t.top&&i++}o==e.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?u=e.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(u=_(e,o,i,t))}null==u&&(u=B(e,h,t));var g=e.docView.nearestDesc(h,!0);return{pos:u,inside:g?g.posAtStart-g.border:-1}}function V(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var W=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function H(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,a=s.webkit||s.gecko;if(3==o.nodeType){if(!a||!W.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var c=i,l=i,u=n<0?1:-1;return n<0&&!i?(l++,u=-1):n>=0&&i==o.nodeValue.length?(c--,u=1):n<0?c--:l++,q(V(m(o,c,l),u),u<0)}var h=V(m(o,i,i),n);if(s.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var p=V(m(o,i-1,i-1),-1);if(p.top==h.top){var f=V(m(o,i,i+1),-1);if(f.top!=h.top)return q(f,f.left<p.left)}}return h}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==w(o))){var d=o.childNodes[i-1];if(1==d.nodeType)return J(d.getBoundingClientRect(),!1)}if(i<w(o)){var v=o.childNodes[i];if(1==v.nodeType)return J(v.getBoundingClientRect(),!0)}return J(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==w(o))){var g=o.childNodes[i-1],y=3==g.nodeType?m(g,w(g)-(a?0:1)):1!=g.nodeType||"BR"==g.nodeName&&g.nextSibling?null:g;if(y)return q(V(y,1),!1)}if(i<w(o)){var b=o.childNodes[i];while(b.pmViewDesc&&b.pmViewDesc.ignoreForCoords)b=b.nextSibling;var k=b?3==b.nodeType?m(b,0,a?0:1):1==b.nodeType?b:null:null;if(k)return q(V(k,-1),!0)}return q(V(3==o.nodeType?m(o):o,-n),n>=0)}function q(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function J(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Y(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function K(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return Y(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1),r=t.node;;){var i=e.docView.nearestDesc(r,!0);if(!i)break;if(i.node.isBlock){r=i.dom;break}r=i.dom.parentNode}for(var s=H(e,o.pos,1),a=r.firstChild;a;a=a.nextSibling){var c=void 0;if(1==a.nodeType)c=a.getClientRects();else{if(3!=a.nodeType)continue;c=m(a,0,a.nodeValue.length).getClientRects()}for(var l=0;l<c.length;l++){var u=c[l];if(u.bottom>u.top+1&&("up"==n?s.top-u.top>2*(u.bottom-s.top):u.bottom-s.bottom>2*(s.bottom-u.top)))return!1}}return!0}))}var U=/[\u0590-\u08ac]/;function G(e,t,n){var r=t.selection,o=r.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,s=!i,a=i==o.parent.content.size,c=e.root.getSelection();return U.test(o.parent.textContent)&&c.modify?Y(e,t,(function(){var t=c.getRangeAt(0),r=c.focusNode,i=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a=o.depth?e.docView.domAfterPos(o.before()):e.dom,l=!a.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&i==c.focusOffset;return c.removeAllRanges(),c.addRange(t),null!=s&&(c.caretBidiLevel=s),l})):"left"==n||"backward"==n?s:a}var Z=null,Q=null,X=!1;function ee(e,t,n){return Z==t&&Q==n?X:(Z=t,Q=n,X="up"==n||"down"==n?K(e,t,n):G(e,t,n))}var te=0,ne=1,re=2,oe=3,ie=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=te},se={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};ie.prototype.matchesWidget=function(){return!1},ie.prototype.matchesMark=function(){return!1},ie.prototype.matchesNode=function(){return!1},ie.prototype.matchesHack=function(e){return!1},ie.prototype.parseRule=function(){return null},ie.prototype.stopEvent=function(){return!1},se.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},se.border.get=function(){return 0},ie.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},ie.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},se.posBefore.get=function(){return this.parent.posBeforeChild(this)},se.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},se.posAfter.get=function(){return this.posBefore+this.size},se.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},ie.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;r=e.previousSibling}while(r&&(!(o=r.pmViewDesc)||o.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;i=e.nextSibling}while(i&&(!(s=i.pmViewDesc)||s.parent!=this))i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>p(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},ie.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==e.nodeType?e:e.parentNode):o.nodeDOM==e))return o;n=!1}}},ie.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},ie.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1},ie.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},ie.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=0;n<this.children.length;n++){var i=this.children[n],s=o+i.size;if(s>e||i instanceof de){r=e-o;break}o=s}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(var a=void 0;n&&!(a=this.children[n-1]).size&&a instanceof ce&&a.widget.type.side>=0;n--);if(t<=0){for(var c,l=!0;;n--,l=!1)if(c=n?this.children[n-1]:null,!c||c.dom.parentNode==this.contentDOM)break;return c&&t&&l&&!c.border&&!c.domAtom?c.domFromPos(c.size,t):{node:this.contentDOM,offset:c?p(c.dom)+1:0}}for(var u,h=!0;;n++,h=!1)if(u=n<this.children.length?this.children[n]:null,!u||u.dom.parentNode==this.contentDOM)break;return u&&h&&!u.border&&!u.domAtom?u.domFromPos(0,t):{node:this.contentDOM,offset:u?p(u.dom):this.contentDOM.childNodes.length}},ie.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&e<=c){var l=i+a.border;if(e>=l&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,l);e=i;for(var u=s;u>0;u--){var h=this.children[u-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=p(h.dom)+1;break}e-=h.size}-1==r&&(r=0)}if(r>-1&&(c>t||s==this.children.length-1)){t=c;for(var f=s+1;f<this.children.length;f++){var d=this.children[f];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=p(d.dom);break}t+=d.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},ie.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},ie.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},ie.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),a=0,c=0;a<this.children.length;a++){var l=this.children[a],u=c+l.size;if(o>c&&i<u)return l.setSelection(e-c-l.border,t-c-l.border,n,r);c=u}var h=this.domFromPos(e,e?-1:1),f=t==e?h:this.domFromPos(t,t?-1:1),d=n.getSelection(),m=!1;if((s.gecko||s.safari)&&e==t){var g=h.node,y=h.offset;if(3==g.nodeType){if(m=y&&"\n"==g.nodeValue[y-1],m&&y==g.nodeValue.length)for(var w=g,b=void 0;w;w=w.parentNode){if(b=w.nextSibling){"BR"==b.nodeName&&(h=f={node:b.parentNode,offset:p(b)+1});break}var k=w.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{var x=g.childNodes[y-1];m=x&&("BR"==x.nodeName||"false"==x.contentEditable)}}if(s.gecko&&d.focusNode&&d.focusNode!=f.node&&1==d.focusNode.nodeType){var S=d.focusNode.childNodes[d.focusOffset];S&&"false"==S.contentEditable&&(r=!0)}if(r||m&&s.safari||!v(h.node,h.offset,d.anchorNode,d.anchorOffset)||!v(f.node,f.offset,d.focusNode,d.focusOffset)){var C=!1;if((d.extend||e==t)&&!m){d.collapse(h.node,h.offset);try{e!=t&&d.extend(f.node,f.offset),C=!0}catch(E){if(!(E instanceof DOMException))throw E}}if(!C){if(e>t){var M=h;h=f,f=M}var O=document.createRange();O.setEnd(f.node,f.offset),O.setStart(h.node,h.offset),d.removeAllRanges(),d.addRange(O)}}},ie.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},se.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},ie.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+o.border,a=i-o.border;if(e>=s&&t<=a)return this.dirty=e==n||t==i?re:ne,void(e!=s||t!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-s,t-s):o.dirty=oe);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?oe:re}n=i}this.dirty=re},ie.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?re:ne;t.dirty<n&&(t.dirty=n)}},se.domAtom.get=function(){return!1},se.ignoreForCoords.get=function(){return!1},Object.defineProperties(ie.prototype,se);var ae=[],ce=function(e){function t(t,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,ae,s,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(e){return this.dirty==te&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(ie),le=function(e){function t(t,n,r,o){e.call(this,t,ae,n,null),this.textDOM=r,this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(ie),ue=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=o.PW.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return this.dirty&oe||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return this.dirty!=oe&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),this.dirty!=te){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=te}},t.prototype.slice=function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=Ie(i,n,s,r)),e>0&&(i=Ie(i,0,e,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},t}(ie),he=function(e){function t(t,n,r,o,i,s,a,c,l){e.call(this,t,n.isLeaf?ae:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,r,i,s,a){var c,l,u=s.nodeViews[n.type.name],h=u&&u(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r,i),p=h&&h.dom,f=h&&h.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(c=o.PW.renderSpec(document,n.type.spec.toDOM(n)),p=c.dom,f=c.contentDOM);f||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var d=p;return p=xe(p,r,n),h?l=new me(e,n,r,i,p,f,d,h,s,a+1):n.isText?new fe(e,n,r,i,p,d,s):new t(e,n,r,i,p,f,d,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return"pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?o.HY.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return this.dirty==te&&e.eq(this.node)&&Se(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,i=t,a=e.composing&&this.localCompositionInfo(e,t),c=a&&a.pos>-1?a:null,l=a&&a.pos<0,u=new Me(this,c&&c.node);Ae(this.node,this.innerDeco,(function(t,s,a){t.spec.marks?u.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&u.syncToMarks(s==n.node.childCount?o.vc.none:n.node.child(s).marks,r,e),u.placeWidget(t,e,i)}),(function(t,n,o,s){var c;u.syncToMarks(t.marks,r,e),u.findNodeMatch(t,n,o,s)||l&&e.state.selection.from>i&&e.state.selection.to<i+t.nodeSize&&(c=u.findIndexWithChild(a.node))>-1&&u.updateNodeAt(t,n,o,c,e)||u.updateNextNode(t,n,o,e,s)||u.addNode(t,n,o,e,i),i+=t.nodeSize})),u.syncToMarks(ae,r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==re)&&(c&&this.protectLocalComposition(e,c),ve(this.contentDOM,this.children,e),s.ios&&Ne(this.dom))},t.prototype.localCompositionInfo=function(e,t){var n=e.state.selection,o=n.from,i=n.to;if(!(!(e.state.selection instanceof r.Bs)||o<t||i>t+this.node.content.size)){var s=e.root.getSelection(),a=Te(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){if(this.node.inlineContent){var c=a.nodeValue,l=De(this.node.content,c,o-t,i-t);return l<0?null:{node:a,pos:l,text:c}}return{node:a,pos:-1}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new le(this,i,n,o);e.compositionNodes.push(s),this.children=Ie(this.children,r,r+o.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(this.dirty==oe||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=te},t.prototype.updateOuterDeco=function(e){if(!Se(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=be(this.dom,this.nodeDOM,we(this.outerDeco,this.node,t),we(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(ie);function pe(e,t,n,r,o){return xe(r,t,e),new he(null,e,t,n,r,r,r,o,0)}var fe=function(e){function t(t,n,r,o,i,s,a){e.call(this,t,n,r,o,i,null,s,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){var e=this.nodeDOM.parentNode;while(e&&e!=this.dom&&!e.pmIsDeco)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(this.dirty==oe||this.dirty!=te&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==te&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=te,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},t.prototype.markDirty=function(t,n){e.prototype.markDirty.call(this,t,n),this.dom==this.nodeDOM||0!=t&&n!=this.nodeDOM.nodeValue.length||(this.dirty=oe)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(he),de=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(e){return this.dirty==te&&this.dom.nodeName==e},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(t.prototype,n),t}(ie),me=function(e){function t(t,n,r,o,i,s,a,c,l,u){e.call(this,t,n,r,o,i,s,a,l,u),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,o){if(this.dirty==oe)return!1;if(this.spec.update){var i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(he);function ve(e,t,n){for(var r=e.firstChild,o=!1,i=0;i<t.length;i++){var s=t[i],a=s.dom;if(a.parentNode==e){while(a!=r)r=Ce(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(s instanceof ue){var c=r?r.previousSibling:e.lastChild;ve(s.contentDOM,s.children,n),r=c?c.nextSibling:e.firstChild}}while(r)r=Ce(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}function ge(e){e&&(this.nodeName=e)}ge.prototype=Object.create(null);var ye=[new ge];function we(e,t,n){if(0==e.length)return ye;for(var r=n?ye[0]:new ge,o=[r],i=0;i<e.length;i++){var s=e[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(r=new ge(s.nodeName)),s){var c=s[a];null!=c&&(n&&1==o.length&&o.push(r=new ge(t.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+c:"style"==a?r.style=(r.style?r.style+";":"")+c:"nodeName"!=a&&(r[a]=c))}}return o}function be(e,t,n,r){if(n==ye&&r==ye)return t;for(var o=t,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(o),a=ye[0]),o=c}ke(o,a||ye[0],s)}return o}function ke(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):ae,s=n.class?n.class.split(" ").filter(Boolean):ae,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&e.classList.add(s[c]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(l=u.exec(t.style))e.style.removeProperty(l[1])}n.style&&(e.style.cssText+=n.style)}}function xe(e,t,n){return be(e,e,ye,we(t,n,1!=e.nodeType))}function Se(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Ce(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Me=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=Oe(e.node.content,e)};function Oe(e,t){var n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];e:while(o>0){for(var a=void 0;;)if(r){var c=n.children[r-1];if(!(c instanceof ue)){a=c,r--;break}n=c,r=c.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var l=a.node;if(l){if(l!=e.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function Ee(e,t){return e.type.side-t.type.side}function Ae(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var s=0,a=[],c=null,l=0;;){if(s<o.length&&o[s].to==i){var u=o[s++],h=void 0;while(s<o.length&&o[s].to==i)(h||(h=[u])).push(o[s++]);if(h){h.sort(Ee);for(var p=0;p<h.length;p++)n(h[p],l,!!c)}else n(u,l,!!c)}var f=void 0,d=void 0;if(c)d=-1,f=c,c=null;else{if(!(l<e.childCount))break;d=l,f=e.child(l++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);while(s<o.length&&o[s].from<=i&&o[s].to>i)a.push(o[s++]);var v=i+f.nodeSize;if(f.isText){var g=v;s<o.length&&o[s].from<g&&(g=o[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=f.cut(g-i),f=f.cut(0,g-i),v=g,d=-1)}var w=a.length?f.isInline&&!f.isLeaf?a.filter((function(e){return!e.inline})):a.slice():ae;r(f,w,t.forChild(i,f),d),i=v}else for(var b=0;b<e.childCount;b++){var k=e.child(b);r(k,o,t.forChild(i,k),b),i+=k.nodeSize}}function Ne(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Te(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=w(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function De(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var s=e.child(o++),a=i;if(i+=s.nodeSize,s.isText){var c=s.text;while(o<e.childCount){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n&&a<r){var u=c.lastIndexOf(t,r-a-1);if(u>=0&&u+t.length+a>=n)return a+u}}}return-1}function Ie(e,t,n,r,o){for(var i=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,u=a+=c.size;l>=n||u<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function Re(e,t){var n=e.root.getSelection(),o=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),s=i&&0==i.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,l,u=o.resolve(a);if(x(n)){c=u;while(i&&!i.node)i=i.parent;if(i&&i.node.isAtom&&r.qv.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!b(n.focusNode,n.focusOffset,i.dom))){var h=i.posBefore;l=new r.qv(a==h?u:o.resolve(h))}}else{var p=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(p<0)return null;c=o.resolve(p)}if(!l){var f="pointer"==t||e.state.selection.head<u.pos&&!s?1:-1;l=He(e,c,u,f)}return l}function ze(e){return e.editable?e.hasFocus():Je(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Fe(e,t){var n=e.state.selection;if(Ve(e,n),ze(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault&&s.chrome){var o=e.root.getSelection(),i=e.domObserver.currentSelection;if(o.anchorNode&&v(o.anchorNode,o.anchorOffset,i.anchorNode,i.anchorOffset))return e.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Le(e);else{var a,c,l=n.anchor,u=n.head;!Pe||n instanceof r.Bs||(n.$from.parent.inlineContent||(a=$e(e,n.from)),n.empty||n.$from.parent.inlineContent||(c=$e(e,n.to))),e.docView.setSelection(l,u,e.root,t),Pe&&(a&&_e(a),c&&_e(c)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&je(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}Me.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},Me.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Me.prototype.syncToMarks=function(e,t,n){var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);while(r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning)r++;while(r<o)this.destroyRest(),this.top.dirty=te,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;while(o<e.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=ue.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},Me.prototype.findNodeMatch=function(e,t,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(var s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){var c=this.top.children[s];if(c.matchesNode(e,t,n)&&!this.preMatch.matched.has(c)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},Me.prototype.updateNodeAt=function(e,t,n,r,o){var i=this.top.children[r];return!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index=r+1,!0)},Me.prototype.findIndexWithChild=function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}},Me.prototype.updateNextNode=function(e,t,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof he){var a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;var c=s.dom,l=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&s.dirty!=oe&&Se(t,s.outerDeco));if(!l&&s.update(e,t,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},Me.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,he.create(this.top,e,t,n,r,o)),this.changed=!0},Me.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new ce(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},Me.prototype.addTextblockHacks=function(){var e=this.top.children[this.index-1];while(e instanceof ue)e=e.children[e.children.length-1];e&&e instanceof fe&&!/\n$/.test(e.node.text)||((s.safari||s.chrome)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},Me.prototype.addHackNode=function(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);"IMG"==e&&(t.className="ProseMirror-separator"),"BR"==e&&(t.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new de(this.top,ae,t,null)),this.changed=!0}};var Pe=s.safari||s.chrome&&s.chrome_version<63;function $e(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(s.safari&&i&&"false"==i.contentEditable)return Be(i);if((!i||"false"==i.contentEditable)&&(!a||"false"==a.contentEditable)){if(i)return Be(i);if(a)return Be(a)}}function Be(e){return e.contentEditable="true",s.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function _e(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function je(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){ze(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}function Le(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,p(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function Ve(e,t){if(t instanceof r.qv){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(We(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else We(e)}function We(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function He(e,t,n,o){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||r.Bs.between(t,n,o)}function qe(e){return(!e.editable||e.root.activeElement==e.dom)&&Je(e)}function Je(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Ye(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return v(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Ke(e,t){var n=e.selection,o=n.$anchor,i=n.$head,s=t>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&r.Y1.findFrom(a,t)}function Ue(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ge(e,t,n){var o=e.state.selection;if(!(o instanceof r.Bs)){if(o instanceof r.qv&&o.node.isInline)return Ue(e,new r.Bs(t>0?o.$to:o.$from));var i=Ke(e.state,t);return!!i&&Ue(e,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var a=Ke(e.state,t);return!!(a&&a instanceof r.qv)&&Ue(e,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,l=o.$head,u=l.textOffset?null:t<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText)return!1;var h=t<0?l.pos-u.nodeSize:l.pos;return!!(u.isAtom||(c=e.docView.descAt(h))&&!c.contentDOM)&&(r.qv.isSelectable(u)?Ue(e,new r.qv(t<0?e.state.doc.resolve(l.pos-u.nodeSize):l)):!!s.webkit&&Ue(e,new r.Bs(e.state.doc.resolve(t<0?h:h+u.nodeSize))))}}function Ze(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Qe(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Xe(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<Ze(n)&&Qe(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Qe(c))o=n,i=--r;else{if(3!=c.nodeType)break;n=c,r=n.nodeValue.length}}else{if(tt(n))break;var l=n.previousSibling;while(l&&Qe(l))o=n.parentNode,i=p(l),l=l.previousSibling;if(l)n=l,r=Ze(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}a?nt(e,t,n,r):o&&nt(e,t,o,i)}}function et(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,s=Ze(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!Qe(a))break;o=n,i=++r}else{if(tt(n))break;var c=n.nextSibling;while(c&&Qe(c))o=c.parentNode,i=p(c)+1,c=c.nextSibling;if(c)n=c,r=0,s=Ze(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}o&&nt(e,t,o,i)}}function tt(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function nt(e,t,n,r){if(x(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&Fe(e)}),50)}function rt(e,t,n){var o=e.state.selection;if(o instanceof r.Bs&&!o.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,a=o.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var c=Ke(e.state,t);if(c&&c instanceof r.qv)return Ue(e,c)}if(!i.parent.inlineContent){var l=t<0?i:a,u=o instanceof r.C1?r.Y1.near(l,t):r.Y1.findFrom(l,t);return!!u&&Ue(e,u)}return!1}function ot(e,t){if(!(e.state.selection instanceof r.Bs))return!0;var n=e.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!o.textOffset&&(t<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return t<0?c.delete(o.pos-a.nodeSize,o.pos):c.delete(o.pos,o.pos+a.nodeSize),e.dispatch(c),!0}return!1}function it(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function st(e){if(s.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;it(e,o,!0),setTimeout((function(){return it(e,o,!1)}),20)}}}function at(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function ct(e,t){var n=t.keyCode,r=at(t);return 8==n||s.mac&&72==n&&"c"==r?ot(e,-1)||Xe(e):46==n||s.mac&&68==n&&"c"==r?ot(e,1)||et(e):13==n||27==n||(37==n?Ge(e,-1,r)||Xe(e):39==n?Ge(e,1,r)||et(e):38==n?rt(e,-1,r)||Xe(e):40==n?st(e)||rt(e,1,r)||et(e):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function lt(e,t,n){var r=e.docView.parseRange(t,n),i=r.node,a=r.fromOffset,c=r.toOffset,l=r.from,u=r.to,h=e.root.getSelection(),p=null,f=h.anchorNode;if(f&&e.dom.contains(1==f.nodeType?f:f.parentNode)&&(p=[{node:f,offset:h.anchorOffset}],x(h)||p.push({node:h.focusNode,offset:h.focusOffset})),s.chrome&&8===e.lastKeyCode)for(var d=c;d>a;d--){var m=i.childNodes[d-1],v=m.pmViewDesc;if("BR"==m.nodeName&&!v){c=d;break}if(!v||v.size)break}var g=e.state.doc,y=e.someProp("domParser")||o.aw.fromSchema(e.state.schema),w=g.resolve(l),b=null,k=y.parse(i,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:a,to:c,preserveWhitespace:"pre"!=w.parent.type.whitespace||"full",editableContent:!0,findPositions:p,ruleFromNode:ut,context:w});if(p&&null!=p[0].pos){var S=p[0].pos,C=p[1]&&p[1].pos;null==C&&(C=S),b={anchor:S+l,head:C+l}}return{doc:k,sel:b,from:l,to:u}}function ut(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(s.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||s.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function ht(e,t,n,o,i){if(t<0){var a=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,c=Re(e,a);if(c&&!e.state.selection.eq(c)){var l=e.state.tr.setSelection(c);"pointer"==a?l.setMeta("pointer",!0):"key"==a&&l.scrollIntoView(),e.dispatch(l)}}else{var u=e.state.doc.resolve(t),h=u.sharedDepth(n);t=u.before(h+1),n=e.state.doc.resolve(n).after(h+1);var p=e.state.selection,f=lt(e,t,n);if(s.chrome&&e.cursorWrapper&&f.sel&&f.sel.anchor==e.cursorWrapper.deco.from){var d=e.cursorWrapper.deco.type.toDOM.nextSibling,m=d&&d.nodeValue?d.nodeValue.length:1;f.sel={anchor:f.sel.anchor+m,head:f.sel.anchor+m}}var v,g,y=e.state.doc,w=y.slice(f.from,f.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(v=e.state.selection.to,g="end"):(v=e.state.selection.from,g="start"),e.lastKeyCode=null;var b=vt(w.content,f.doc.content,f.from,v,g);if(!b){if(!(o&&p instanceof r.Bs&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||f.sel&&f.sel.anchor!=f.sel.head){if((s.ios&&e.lastIOSEnter>Date.now()-225||s.android)&&i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,S(13,"Enter"))})))return void(e.lastIOSEnter=0);if(f.sel){var k=pt(e,e.state.doc,f.sel);k&&!k.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(k))}return}b={start:p.from,endA:p.to,endB:p.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof r.Bs&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),s.ie&&s.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>f.from&&" \xa0"==f.doc.textBetween(b.start-f.from-1,b.start-f.from+1)&&(b.start--,b.endA--,b.endB--);var x,C=f.doc.resolveNoCache(b.start-f.from),M=f.doc.resolveNoCache(b.endB-f.from),O=C.sameParent(M)&&C.parent.inlineContent;if((s.ios&&e.lastIOSEnter>Date.now()-225&&(!O||i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!O&&C.pos<f.doc.content.size&&(x=r.Y1.findFrom(f.doc.resolve(C.pos+1),1,!0))&&x.head==M.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,S(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&dt(y,b.start,b.endA,C,M)&&e.someProp("handleKeyDown",(function(t){return t(e,S(8,"Backspace"))})))s.android&&s.chrome&&e.domObserver.suppressSelectionUpdates();else{s.chrome&&s.android&&b.toB==b.from&&(e.lastAndroidDelete=Date.now()),s.android&&!O&&C.start()!=M.start()&&0==M.parentOffset&&C.depth==M.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==b.endA&&(b.endB-=2,M=f.doc.resolveNoCache(b.endB-f.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,S(13,"Enter"))}))}),20));var E,A,N,T,D=b.start,I=b.endA;if(O)if(C.pos==M.pos)s.ie&&s.ie_version<=11&&0==C.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Fe(e)}),20)),E=e.state.tr.delete(D,I),A=y.resolve(b.start).marksAcross(y.resolve(b.endA));else if(b.endA==b.endB&&(T=y.resolve(b.start))&&(N=ft(C.parent.content.cut(C.parentOffset,M.parentOffset),T.parent.content.cut(T.parentOffset,b.endA-T.start()))))E=e.state.tr,"add"==N.type?E.addMark(D,I,N.mark):E.removeMark(D,I,N.mark);else if(C.parent.child(C.index()).isText&&C.index()==M.index()-(M.textOffset?0:1)){var R=C.parent.textBetween(C.parentOffset,M.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,D,I,R)})))return;E=e.state.tr.insertText(R,D,I)}if(E||(E=e.state.tr.replace(D,I,f.doc.slice(b.start-f.from,b.endB-f.from))),f.sel){var z=pt(e,E.doc,f.sel);z&&!(s.chrome&&s.android&&e.composing&&z.empty&&(b.start!=b.endB||e.lastAndroidDelete<Date.now()-100)&&(z.head==D||z.head==E.mapping.map(I)-1)||s.ie&&z.empty&&z.head==D)&&E.setSelection(z)}A&&E.ensureMarks(A),e.dispatch(E.scrollIntoView())}}}function pt(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:He(e,t.resolve(n.anchor),t.resolve(n.head))}function ft(e,t){for(var n,r,i,s=e.firstChild.marks,a=t.firstChild.marks,c=s,l=a,u=0;u<a.length;u++)c=a[u].removeFromSet(c);for(var h=0;h<s.length;h++)l=s[h].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var p=[],f=0;f<t.childCount;f++)p.push(i(t.child(f)));if(o.HY.from(p).eq(e))return{mark:r,type:n}}function dt(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||mt(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(mt(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||mt(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function mt(e,t,n){var r=e.depth,o=t?e.end():e.pos;while(r>0&&(t||e.indexAfter(r)==e.node(r).childCount))r--,o++,t=!1;if(n){var i=e.node(r).maybeChild(e.indexAfter(r));while(i&&!i.isLeaf)i=i.firstChild,o++}return o}function vt(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;if("end"==o){var l=Math.max(0,i-Math.min(a,c));r-=a+l-i}if(a<i&&e.size<t.size){var u=r<=i&&r>=a?i-r:0;i-=u,c=i+(c-a),a=i}else if(c<i){var h=r<=i&&r>=c?i-r:0;i-=h,a=i+(a-c),c=i}return{start:i,endA:a,endB:c}}function gt(e,t){var n=[],r=t.content,i=t.openStart,s=t.openEnd;while(i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){i--,s--;var a=r.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||o.PW.fromSchema(e.state.schema),l=At(),u=l.createElement("div");u.appendChild(c.serializeFragment(r,{document:l}));var h,p=u.firstChild;while(p&&1==p.nodeType&&(h=Ot[p.nodeName.toLowerCase()])){for(var f=h.length-1;f>=0;f--){var d=l.createElement(h[f]);while(u.firstChild)d.appendChild(u.firstChild);u.appendChild(d),"tbody"!=h[f]&&(i++,s++)}p=u.firstChild}p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n));var m=e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:u,text:m}}function yt(e,t,n,r,i){var a,c,l=i.parent.type.spec.code;if(!n&&!t)return null;var u=t&&(r||l||!n);if(u){if(e.someProp("transformPastedText",(function(e){t=e(t,l||r)})),l)return t?new o.p2(o.HY.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):o.p2.empty;var h=e.someProp("clipboardTextParser",(function(e){return e(t,i,r)}));if(h)c=h;else{var p=i.marks(),f=e.state,d=f.schema,m=o.PW.fromSchema(d);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=a.appendChild(document.createElement("p"));e&&t.appendChild(m.serializeNode(d.text(e,p)))}))}}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),a=Nt(n),s.webkit&&Tt(a);var v=a&&a.querySelector("[data-pm-slice]"),g=v&&/^(\d+) (\d+) (.*)/.exec(v.getAttribute("data-pm-slice"));if(!c){var y=e.someProp("clipboardParser")||e.someProp("domParser")||o.aw.fromSchema(e.state.schema);c=y.parseSlice(a,{preserveWhitespace:!(!u&&!g),context:i,ruleFromNode:function(e){if("BR"==e.nodeName&&!e.nextSibling&&e.parentNode&&!wt.test(e.parentNode.nodeName))return{ignore:!0}}})}if(g)c=Dt(Mt(c,+g[1],+g[2]),g[3]);else if(c=o.p2.maxOpen(bt(c.content,i),!0),c.openStart||c.openEnd){for(var w=0,b=0,k=c.content.firstChild;w<c.openStart&&!k.type.spec.isolating;w++,k=k.firstChild);for(var x=c.content.lastChild;b<c.openEnd&&!x.type.spec.isolating;b++,x=x.lastChild);c=Mt(c,w,b)}return e.someProp("transformPasted",(function(e){c=e(c)})),c}var wt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function bt(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n),i=r.contentMatchAt(t.index(n)),s=void 0,a=[];if(e.forEach((function(e){if(a){var t,n=i.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&s.length&&xt(n,s,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=St(a[a.length-1],s.length));var r=kt(e,n);a.push(r),i=i.matchType(r.type,r.attrs),s=n}}})),a)return{v:o.HY.from(a)}},r=t.depth;r>=0;r--){var i=n(r);if(i)return i.v}return e}function kt(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,o.HY.from(e));return e}function xt(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){var s=xt(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));var a=r.contentMatchAt(r.childCount);if(a.matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(o.HY.from(kt(n,e,i+1))))}}function St(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,St(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(o.HY.empty,!0);return e.copy(n.append(r))}function Ct(e,t,n,r,i,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return i<r-1&&(c=Ct(c,t,n,r,i+1,s)),i>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(o.HY.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}function Mt(e,t,n){return t<e.openStart&&(e=new o.p2(Ct(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new o.p2(Ct(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Ot={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Et=null;function At(){return Et||(Et=document.implementation.createHTMLDocument("title"))}function Nt(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=At().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&Ot[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join("")),r.innerHTML=e,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}function Tt(e){for(var t=e.querySelectorAll(s.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Dt(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(u){return e}for(var i=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=o.HY.from(l.create(n[c+1],i)),s++,a++}return new o.p2(i,s,a)}var It={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Rt=s.ie&&s.ie_version<=11,zt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};zt.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},zt.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Ft=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);s.ie&&s.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new zt,Rt&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ft.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Ft.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Ft.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,It),Rt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Ft.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Rt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Ft.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Ft.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Ft.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Ft.prototype.onSelectionChange=function(){if(qe(this.view)){if(this.suppressingSelectionUpdates)return Fe(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&v(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Ft.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Ft.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Ft.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Je(this.view)&&!this.ignoreSelectionChange(t),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var l=this.registerMutation(e[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(s.gecko&&a.length>1){var u=a.filter((function(e){return"BR"==e.nodeName}));if(2==u.length){var h=u[0],p=u[1];h.parentNode&&h.parentNode.parentNode==p.parentNode?p.remove():h.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),$t(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Fe(this.view),this.currentSelection.set(t))}},Ft.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++)t.push(e.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var o=e.previousSibling,i=e.nextSibling;if(s.ie&&s.ie_version<=11&&e.addedNodes.length)for(var a=0;a<e.addedNodes.length;a++){var c=e.addedNodes[a],l=c.previousSibling,u=c.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l),(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(i=u)}var h=o&&o.parentNode==e.target?p(o)+1:0,f=n.localPosFromDOM(e.target,h,-1),d=i&&i.parentNode==e.target?p(i):e.target.childNodes.length,m=n.localPosFromDOM(e.target,d,1);return{from:f,to:m}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Pt=!1;function $t(e){Pt||(Pt=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var Bt={},_t={};function jt(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Ft(e,(function(t,n,r,o){return ht(e,t,n,r,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Bt[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!qt(e,t)||Ht(e,t)||!e.editable&&t.type in _t||n(e,t)})};for(var n in Bt)t(n);s.safari&&e.dom.addEventListener("input",(function(){return null})),Wt(e)}function Lt(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Vt(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}function Wt(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ht(e,t)})}))}function Ht(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function qt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Jt(e,t){Ht(e,t)||!Bt[t.type]||!e.editable&&t.type in _t||Bt[t.type](e,t)}function Yt(e){return{left:e.clientX,top:e.clientY}}function Kt(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Ut(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Gt(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Zt(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),o=n.nodeAfter;return!!(o&&o.isAtom&&r.qv.isSelectable(o))&&(Gt(e,new r.qv(n),"pointer"),!0)}function Qt(e,t){if(-1==t)return!1;var n,o,i=e.state.selection;i instanceof r.qv&&(n=i.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.qv.isSelectable(c)){o=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(Gt(e,r.qv.create(e.state.doc,o),"pointer"),!0)}function Xt(e,t,n,r,o){return Ut(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?Qt(e,n):Zt(e,n))}function en(e,t,n,r){return Ut(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function tn(e,t,n,r){return Ut(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||nn(e,n,r)}function nn(e,t,n){if(0!=n.button)return!1;var o=e.state.doc;if(-1==t)return!!o.inlineContent&&(Gt(e,r.Bs.create(o,0,o.content.size),"pointer"),!0);for(var i=o.resolve(t),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s),c=i.before(s);if(a.inlineContent)Gt(e,r.Bs.create(o,c+1,c+1+a.content.size),"pointer");else{if(!r.qv.isSelectable(a))continue;Gt(e,r.qv.create(o,c),"pointer")}return!0}}function rn(e){return pn(e)}_t.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!an(e,t)&&(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!s.android||!s.chrome||13!=t.keyCode))if(229!=t.keyCode&&e.domObserver.forceFlush(),!s.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||ct(e,t)?t.preventDefault():Lt(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,S(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},_t.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},_t.keypress=function(e,t){if(!(an(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof r.Bs)||!n.$from.sameParent(n.$to)){var o=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,o)}))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}}};var on=s.mac?"metaKey":"ctrlKey";Bt.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=rn(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&Kt(t,e.lastClick)&&!t[on]&&("singleClick"==e.lastClick.type?o="doubleClick":"doubleClick"==e.lastClick.type&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(Yt(t));i&&("singleClick"==o?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new sn(e,i,t,n)):("doubleClick"==o?en:tn)(e,i.pos,i.inside,t)?t.preventDefault():Lt(e,"pointer"))};var sn=function(e,t,n,o){var i,a,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=o,this.selectNode=n[on],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1,t.inside>-1)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{var l=e.state.doc.resolve(t.pos);i=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var u=o?null:n.target,h=u?e.docView.nearestDesc(u,!0):null;this.target=h?h.dom:null;var p=e.state,f=p.selection;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||f instanceof r.qv&&f.from<=a&&f.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){c.view.mouseDown==c&&c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Lt(e,"pointer")};function an(e,t){return!!e.composing||!!(s.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}sn.prototype.done=function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return Fe(e.view)})),this.view.mouseDown=null},sn.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Yt(e))),this.allowDefault||!t?Lt(this.view,"pointer"):Xt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r.Bs)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Gt(this.view,r.Y1.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Lt(this.view,"pointer")}},sn.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Lt(this.view,"pointer"),0==e.buttons&&this.done()},Bt.touchdown=function(e){rn(e),Lt(e,"pointer")},Bt.contextmenu=function(e){return rn(e)};var cn=s.android?5e3:-1;function ln(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return pn(e)}),t))}function un(e){e.composing&&(e.composing=!1,e.compositionEndedAt=hn());while(e.compositionNodes.length>0)e.compositionNodes.pop().markParentsDirty()}function hn(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function pn(e,t){if(!(s.android&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),un(e),t||e.docView&&e.docView.dirty){var n=Re(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}function fn(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}_t.compositionstart=_t.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),pn(e,!0),e.markCursor=null;else if(pn(e),s.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}e.composing=!0}ln(e,cn)},_t.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,ln(e,20))};var dn=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function mn(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function vn(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gn(e,r.value,null,t):gn(e,r.textContent,r.innerHTML,t)}),50)}}function gn(e,t,n,r){var i=yt(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,i||o.p2.empty)})))return!0;if(!i)return!1;var s=mn(i),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Bt.copy=_t.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=dn?null:t.clipboardData,i=n.content(),s=gt(e,i),a=s.dom,c=s.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):fn(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},_t.paste=function(e,t){if(!e.composing||s.android){var n=dn?null:t.clipboardData;n&&gn(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():vn(e,t)}};var yn=function(e,t){this.slice=e,this.move=t},wn=s.mac?"altKey":"ctrlKey";for(var bn in Bt.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var o=e.state.selection,i=o.empty?null:e.posAtCoords(Yt(t));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r.qv?o.to-1:o.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(r.qv.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&e.dispatch(e.state.tr.setSelection(r.qv.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=gt(e,a),l=c.dom,u=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(dn?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",dn||t.dataTransfer.setData("text/plain",u),e.dragging=new yn(a,!t[wn])}},Bt.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},_t.dragover=_t.dragenter=function(e,t){return t.preventDefault()},_t.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var s=e.posAtCoords(Yt(t));if(s){var a=e.state.doc.resolve(s.pos);if(a){var c=n&&n.slice;c?e.someProp("transformPasted",(function(e){c=e(c)})):c=yt(e,t.dataTransfer.getData(dn?"Text":"text/plain"),dn?null:t.dataTransfer.getData("text/html"),!1,a);var l=n&&!t[wn];if(e.someProp("handleDrop",(function(n){return n(e,t,c||o.p2.empty,l)})))t.preventDefault();else if(c){t.preventDefault();var u=c?(0,i.nj)(e.state.doc,a.pos,c):a.pos;null==u&&(u=a.pos);var h=e.state.tr;l&&h.deleteSelection();var p=h.mapping.map(u),f=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,d=h.doc;if(f?h.replaceRangeWith(p,p,c.content.firstChild):h.replaceRange(p,p,c),!h.doc.eq(d)){var m=h.doc.resolve(p);if(f&&r.qv.isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new r.qv(m));else{var v=h.mapping.map(u);h.mapping.maps[h.mapping.maps.length-1].forEach((function(e,t,n,r){return v=r})),h.setSelection(He(e,m,h.doc.resolve(v)))}e.focus(),e.dispatch(h.setMeta("uiEvent","drop"))}}}}}},Bt.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Fe(e)}),20))},Bt.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)},Bt.beforeinput=function(e,t){if(s.chrome&&s.android&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,S(8,"Backspace"))})))){var t=e.state.selection,r=t.$cursor;r&&r.pos>0&&e.dispatch(e.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},_t)Bt[bn]=_t[bn];function kn(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var xn=function(e,t){this.spec=t||An,this.side=this.spec.side||0,this.toDOM=e};xn.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos,s=o.deleted;return s?null:new Mn(i-n,i-n,this)},xn.prototype.valid=function(){return!0},xn.prototype.eq=function(e){return this==e||e instanceof xn&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&kn(this.spec,e.spec))},xn.prototype.destroy=function(e){this.spec.destroy&&this.spec.destroy(e)};var Sn=function(e,t){this.spec=t||An,this.attrs=e};Sn.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Mn(o,i,this)},Sn.prototype.valid=function(e,t){return t.from<t.to},Sn.prototype.eq=function(e){return this==e||e instanceof Sn&&kn(this.attrs,e.attrs)&&kn(this.spec,e.spec)},Sn.is=function(e){return e.type instanceof Sn};var Cn=function(e,t){this.spec=t||An,this.attrs=e};Cn.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Mn(o.pos-n,i.pos-n,this)},Cn.prototype.valid=function(e,t){var n,r=e.content.findIndex(t.from),o=r.index,i=r.offset;return i==t.from&&!(n=e.child(o)).isText&&i+n.nodeSize==t.to},Cn.prototype.eq=function(e){return this==e||e instanceof Cn&&kn(this.attrs,e.attrs)&&kn(this.spec,e.spec)};var Mn=function(e,t,n){this.from=e,this.to=t,this.type=n},On={spec:{configurable:!0},inline:{configurable:!0}};Mn.prototype.copy=function(e,t){return new Mn(e,t,this.type)},Mn.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Mn.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},Mn.widget=function(e,t,n){return new Mn(e,e,new xn(t,n))},Mn.inline=function(e,t,n,r){return new Mn(e,t,new Sn(n,r))},Mn.node=function(e,t,n,r){return new Mn(e,t,new Cn(n,r))},On.spec.get=function(){return this.type.spec},On.inline.get=function(){return this.type instanceof Sn},Object.defineProperties(Mn.prototype,On);var En=[],An={},Nn=function(e,t){this.local=e&&e.length?e:En,this.children=t&&t.length?t:En};Nn.create=function(e,t){return t.length?$n(t,e,0,An):Tn},Nn.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},Nn.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,r+c,o)}},Nn.prototype.map=function(e,t,n){return this==Tn||0==e.maps.length?this:this.mapInner(e,t,0,0,n||An)},Nn.prototype.mapInner=function(e,t,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?In(this.children,i,e,t,n,r,o):i?new Nn(i.sort(Bn)):Tn},Nn.prototype.add=function(e,t){return t.length?this==Tn?Nn.create(e,t):this.addInner(e,t,0):this},Nn.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,s){var a,c=s+n;if(a=Fn(t,e,c)){r||(r=o.children.slice());while(i<r.length&&r[i]<s)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(e,a,c+1):r.splice(i,0,s,s+e.nodeSize,$n(a,e,c+1,An)),i+=3}}));for(var s=Rn(i?Pn(t):t,-n),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Nn(s.length?this.local.concat(s).sort(Bn):this.local,r||this.children)},Nn.prototype.remove=function(e){return 0==e.length||this==Tn?this:this.removeInner(e,0)},Nn.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+t,a=n[o+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=Tn?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var h=0,p=void 0;h<e.length;h++)if(p=e[h])for(var f=0;f<r.length;f++)r[f].eq(p,t)&&(r==this.local&&(r=this.local.slice()),r.splice(f--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Nn(r,n):Tn},Nn.prototype.forChild=function(e,t){if(this==Tn)return this;if(t.isLeaf)return Nn.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof Sn){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var h=new Nn(r.sort(Bn));return n?new Dn([h,n]):h}return n||Tn},Nn.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Nn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},Nn.prototype.locals=function(e){return _n(this.localsInner(e))},Nn.prototype.localsInner=function(e){if(this==Tn)return En;if(e.inlineContent||!this.local.some(Sn.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Sn||t.push(this.local[n]);return t};var Tn=new Nn;Nn.empty=Tn,Nn.removeOverlap=_n;var Dn=function(e){this.members=e};function In(e,t,n,r,o,i,s){for(var a=e.slice(),c=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+i||(t>=a[s]+i?a[s+1]=-1:n>=o&&(l=r-n-(t-e))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,h=0;h<a.length;h+=3)if(-1==a[h+1]){var p=n.map(e[h]+i),f=p-o;if(f<0||f>=r.content.size){u=!0;continue}var d=n.map(e[h+1]+i,-1),m=d-o,v=r.content.findIndex(f),g=v.index,y=v.offset,w=r.maybeChild(g);if(w&&y==f&&y+w.nodeSize==m){var b=a[h+2].mapInner(n,w,p+1,e[h]+i+1,s);b!=Tn?(a[h]=f,a[h+1]=m,a[h+2]=b):(a[h+1]=-2,u=!0)}else u=!0}if(u){var k=zn(a,e,t||[],n,o,i,s),x=$n(k,r,0,s);t=x.local;for(var S=0;S<a.length;S+=3)a[S+1]<0&&(a.splice(S,3),S-=3);for(var C=0,M=0;C<x.children.length;C+=3){var O=x.children[C];while(M<a.length&&a[M]<O)M+=3;a.splice(M,0,x.children[C],x.children[C+1],x.children[C+2])}}return new Nn(t&&t.sort(Bn),a)}function Rn(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Mn(o.from+t,o.to+t,o.type))}return n}function zn(e,t,n,r,o,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(r,o,t);c?n.push(c):s.onRemove&&s.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+i+1);return n}function Fn(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function Pn(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function $n(e,t,n,r){var o=[],i=!1;t.forEach((function(t,s){var a=Fn(e,t,s+n);if(a){i=!0;var c=$n(a,t,n+s+1,r);c!=Tn&&o.push(s,s+t.nodeSize,c)}}));for(var s=Rn(i?Pn(e):e,-n).sort(Bn),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Nn(s,o):Tn}function Bn(e,t){return e.from-t.from||e.to-t.to}function _n(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),jn(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),jn(t,o+1,i.copy(r.to,i.to)))}}return t}function jn(e,t,n){while(t<e.length&&Bn(n,e[t])>0)t++;e.splice(t,0,n)}function Ln(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Tn&&t.push(r)})),e.cursorWrapper&&t.push(Nn.create(e.state.doc,[e.cursorWrapper.deco])),Dn.from(t)}Dn.prototype.map=function(e,t){var n=this.members.map((function(n){return n.map(e,t,An)}));return Dn.from(n)},Dn.prototype.forChild=function(e,t){if(t.isLeaf)return Nn.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=Tn&&(o instanceof Dn?n=n.concat(o.members):n.push(o))}return Dn.from(n)},Dn.prototype.eq=function(e){if(!(e instanceof Dn)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Dn.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?_n(n?t:t.sort(Bn)):En},Dn.from=function(e){switch(e.length){case 0:return Tn;case 1:return e[0];default:return new Dn(e)}};var Vn=function(e,t){this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Gn),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Jn(this),this.markCursor=null,this.cursorWrapper=null,qn(this),this.nodeViews=Kn(this),this.docView=pe(this.state.doc,Hn(this),Ln(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,jt(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},Wn={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function Hn(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r&&(t.class+=" "+n[r]),"style"==r?t.style=(t.style?t.style+";":"")+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[Mn.node(0,e.state.doc.content.size,t)]}function qn(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Mn.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Jn(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Yn(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function Kn(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function Un(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r}function Gn(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}Wn.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Vn.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Wt(this),this._props=e,e.plugins&&(e.plugins.forEach(Gn),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)},Vn.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Vn.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Vn.prototype.updateStateInner=function(e,t){var n=this,o=this.state,i=!1,a=!1;if(e.storedMarks&&this.composing&&(un(this),a=!0),this.state=e,t){var c=Kn(this);Un(c,this.nodeViews)&&(this.nodeViews=c,i=!0),Wt(this)}this.editable=Jn(this),qn(this);var l=Ln(this),u=Hn(this),h=t?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(e.doc,u,l);!p&&e.selection.eq(o.selection)||(a=!0);var f="preserve"==h&&a&&null==this.dom.style.overflowAnchor&&A(this);if(a){this.domObserver.stop();var d=p&&(s.ie||s.chrome)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&Yn(o.selection,e.selection);if(p){var m=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(e.doc,u,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=pe(e.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(d=!0)}d||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Ye(this))?Fe(this,d):(Ve(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==h)this.dom.scrollTop=0;else if("to selection"==h){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof r.qv?E(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),v):E(this,this.coordsAtPos(e.selection.head,1),v))}else f&&T(f)},Vn.prototype.destroyPluginViews=function(){var e;while(e=this.pluginViews.pop())e.destroy&&e.destroy()},Vn.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var s=this.state.plugins[i];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}},Vn.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var c=s[a].props[e];if(null!=c&&(n=t?t(c):c))return n}},Vn.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Vn.prototype.focus=function(){this.domObserver.stop(),this.editable&&R(this.dom),Fe(this),this.domObserver.start()},Wn.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Vn.prototype.posAtCoords=function(e){return L(this,e)},Vn.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),H(this,e,t)},Vn.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},Vn.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Vn.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Vn.prototype.endOfTextblock=function(e,t){return ee(this,t||this.state,e)},Vn.prototype.destroy=function(){this.docView&&(Vt(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ln(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Wn.isDestroyed.get=function(){return null==this.docView},Vn.prototype.dispatchEvent=function(e){return Jt(this,e)},Vn.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Vn.prototype,Wn)},71216:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});const r=function(e){if(void 0===e||null===e)return c;if("string"===typeof e)return s(e);if("object"===typeof e)return Array.isArray(e)?o(e):i(e);if("function"===typeof e)return a(e);throw new Error("Expected function, string, or object as test")};function o(e){const t=[];let n=-1;while(++n<e.length)t[n]=r(e[n]);return a(o);function o(...e){let n=-1;while(++n<t.length)if(t[n].call(this,...e))return!0;return!1}}function i(e){return a(t);function t(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function s(e){return a(t);function t(t){return t&&t.type===e}}function a(e){return t;function t(...t){return Boolean(e.call(this,...t))}}function c(){return!0}},3004:function(e,t,n){"use strict";n.d(t,{BK:function(){return a},AM:function(){return s},S4:function(){return c}});var r=n(71216);function o(e){return e}const i=!0,s="skip",a=!1,c=function(e,t,n,i){"function"===typeof t&&"function"!==typeof n&&(i=n,n=t,t=null);const c=(0,r.O)(t),u=i?-1:1;function h(e,r,p){const f="object"===typeof e&&null!==e?e:{};let d;return"string"===typeof f.type&&(d="string"===typeof f.tagName?f.tagName:"string"===typeof f.name?f.name:void 0,Object.defineProperty(m,"name",{value:"node ("+o(f.type+(d?"<"+d+">":""))+")"})),m;function m(){let o,f,d,m=[];if((!t||c(e,r,p[p.length-1]||null))&&(m=l(n(e,p)),m[0]===a))return m;if(e.children&&m[0]!==s){f=(i?e.children.length:-1)+u,d=p.concat(e);while(f>-1&&f<e.children.length){if(o=h(e.children[f],f,d)(),o[0]===a)return o;f="number"===typeof o[1]?o[1]:f+u}}return m}}h(e,null,[])()};function l(e){return Array.isArray(e)?e:"number"===typeof e?[i,e]:[e]}},62854:function(e,t,n){"use strict";n.d(t,{Vn:function(){return o}});var r=n(3004);const o=function(e,t,n,o){function i(e,t){const r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}"function"===typeof t&&"function"!==typeof n&&(o=n,n=t,t=null),(0,r.S4)(e,t,i,o)}}}]);